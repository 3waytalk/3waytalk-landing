"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();!function(){var e=function(){function e(){_classCallCheck(this,e);var t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(this.init.bind(this))}return _createClass(e,[{key:"init",value:function(){var e=this;this.fired=!1,this.tablet=1200,this.mobile=750,this.min_height=300;var t=document.querySelector(".header"),i=document.querySelector(".clock");window.requestAnimFrame=window.requestAnimationFrame,$(".landing").fullpage({sectionSelector:".landing__section",navigation:!0,afterLoad:this.hideLoader.bind(this),afterRender:this.recountSlides.bind(this),afterResize:this.recountSlides.bind(this),onLeave:function(s,r,l){1==r?(t.classList.toggle("header_open",!1),e.hideNav()):(t.classList.toggle("header_open",!0),e.showNav()),6==r?i.classList.toggle("clock_visible",!0):i.classList.toggle("clock_visible",!1)}}),document.querySelector(".footer__top").addEventListener("click",this.scrollToTop.bind(this))}},{key:"hideNav",value:function(){var e=this;Velocity(this.nav,"finish"),Velocity(this.nav,{opacity:0},{duration:300,complete:function(){e.nav.style.display="none"}})}},{key:"showNav",value:function(){var e=this;Velocity(this.nav,"finish"),Velocity(this.nav,{opacity:1},{duration:300,begin:function(){e.nav.style.display="block"}})}},{key:"hideLoader",value:function(){if(!this.fired){this.fired=!0,this.nav=document.getElementById("fp-nav"),this.hideNav(),[].forEach.call(document.querySelectorAll(".slide__resizable, .slide__centred"),function(e){e.setAttribute("data-height",e.offsetHeight),e.setAttribute("data-width",e.offsetWidth)});var e=document.querySelector(".loader__wrapper"),t={opacity:0},i={duration:500,complete:function(){e.parentNode.removeChild(e)}};Velocity(e,t,i)}}},{key:"recountSlides",value:function(){var e=this,t=document.querySelectorAll(".slide__resizable"),i=document.querySelectorAll(".slide__centred"),s=document.querySelector(".slide_service"),r=document.querySelector(".slide__illustration"),l=document.querySelector(".slide_main"),o=document.querySelector(".shema"),n=document.querySelector(".header").offsetHeight,a=document.querySelector(".footer").offsetHeight,d=o.closest(".slide__details"),c=l.querySelector(".slide__phones"),h=l.querySelector(".slide__phone"),u=void 0,f=void 0,y=void 0,v=void 0,g=20,p=void 0,m=1,b=1,_=1,x=void 0,A=void 0,S=void 0,L=void 0,q=void 0,z=void 0,M=void 0,k=void 0,w=void 0,W=void 0,C=void 0,H=void 0,I=void 0;p=l.querySelector(".fp-tableCell"),u=Math.min(p.offsetHeight,parseInt(p.style.height,10)),f=p.offsetWidth,710>u&&750>f?(o.style.display="none",d.style.display="block",d.style.height="auto"):(o.removeAttribute("style"),d.removeAttribute("style")),x=l.querySelector(".slide__header"),l.style.backgroundSize="auto "+u+"px",v=u-g-x.offsetHeight,500>v&&v>=200?(c.style.height=v+"px",c.style.visibility="visible"):200>v?c.style.visibility="hidden":c.removeAttribute("style"),750>f&&(790>u&&u>480?(m=u/790,1>m?h.style[Modernizr.prefixed("transform")]="scale("+m+")":(h.removeAttribute("style"),x.removeAttribute("style"))):481>u?x.removeAttribute("style"):(h.removeAttribute("style"),x.removeAttribute("style")),f>500&&1>m?(H=440*m/3*2,h.style[Modernizr.prefixed("transform-origin")]="66.666% 66.666%",h.style.right=-(H/2)+"px",x.style.borderRightWidth=H-20+"px"):501>f&&f>420&&1>m?(H=440*m/2,h.style[Modernizr.prefixed("transform-origin")]="50% 66.666%",h.style.right=-H+"px",x.style.borderRightWidth=H-20+"px"):1>m&&(H=440*m/3,h.style[Modernizr.prefixed("transform-origin")]="33.333% 66.666%",h.style.right=-(2*H)+"px",x.style.borderRightWidth=H-20+"px"),f>500&&m>=1?(h.style.right="-145px",x.style.borderRightWidth="270px"):501>f&&f>420&&m>=1?(h.style.right="-220px",x.style.borderRightWidth="200px"):m>=1&&(h.style.right="-290px",x.style.borderRightWidth="125px")),p=s.querySelector(".fp-tableCell"),u=Math.min(p.offsetHeight,parseInt(p.style.height,10)),f=p.offsetWidth,x=s.querySelector(".slide__header"),w=Math.min(p.offsetHeight,parseInt(p.style.height,10))-x.offsetHeight-a-n,r.style.height=w+"px",W=700,C=570,H=1.2*f,I=C*H/W,w>I?(r.classList.toggle("slide__illustration_hidden",!1),r.style.backgroundPosition="50% 100%"):370>w?r.classList.toggle("slide__illustration_hidden",!0):(r.classList.toggle("slide__illustration_hidden",!1),r.style.backgroundPosition="50% 0"),[].forEach.call(i,function(e){A=e.closest(".slide"),p=e.closest(".fp-tableCell"),u=Math.min(p.offsetHeight,parseInt(p.style.height,10)),f=p.offsetWidth,k=parseInt(e.getAttribute("data-height"),10),f>1220?(M=1230,L=170):f>750?(M=1050,L=170):(M=400,k=900,L=0),v=u-n-g+L,y=f-40,b=v/k,_=y/M,m=Math.min(b,_),q=0,z=0,M>y&&1221>f&&f>750&&(z=-(M-f)/2),300>u?(A.classList.add("slide_hide-centred"),e.style[Modernizr.prefixed("transform")]="none",[].forEach.call(e.querySelectorAll(".steps__step"),function(e){e.removeAttribute("style")})):1>m?(A.classList.remove("slide_hide-centred"),e.style[Modernizr.prefixed("transform")]="translateX("+z+"px) scale("+m+")",[].forEach.call(e.querySelectorAll(".steps__step"),function(e){e.style[Modernizr.prefixed("transform")]="scale("+(1+(1-m))+")"})):(A.classList.remove("slide_hide-centred"),e.style[Modernizr.prefixed("transform")]="translateX("+z+"px)",[].forEach.call(e.querySelectorAll(".steps__step"),function(e){e.removeAttribute("style")}))}),[].forEach.call(t,function(t){A=t.closest(".slide"),x=t.closest(".slide__details").querySelector(".slide__header"),p=t.closest(".fp-tableCell"),u=Math.min(p.offsetHeight,parseInt(p.style.height,10)),f=p.offsetWidth,k=parseInt(t.getAttribute("data-height"),10),M=parseInt(t.getAttribute("data-width"),10),b=v/k,_=y/M,m=Math.min(b,_),f>e.mobile?(v=u-n-g,y=f/2-40,b=v/k,_=y/M,m=Math.min(b,_),v<e.min_height?A.classList.add("slide_hide-resizable"):1>m?(A.classList.remove("slide_hide-resizable"),t.style[Modernizr.prefixed("transform")]="scale("+m+")",A.classList.contains("slide_right")?(S=parseInt(t.getAttribute("data-width"),10)*m,x.style.borderLeftWidth=S+"px",f>e.tablet&&(t.style.marginRight=x.offsetWidth/2-S+"px")):(S=parseInt(t.getAttribute("data-width"),10)*m,x.style.borderRightWidth=S+"px",f>e.tablet&&(t.style.marginLeft=x.offsetWidth/2-S+"px"))):(A.classList.remove("slide_hide-resizable"),t.removeAttribute("style"),x.removeAttribute("style"))):(v=u-n-x.offsetHeight-60,y=f-40,b=v/k,_=y/M,m=Math.min(b,_),M>y?t.style.marginLeft=-((M-y)/2-20)+"px":t.style.marginLeft="auto",200>v?(console.log("hidding"),A.classList.add("slide_hide-resizable")):1>m?(A.classList.remove("slide_hide-resizable"),t.style[Modernizr.prefixed("transform")]="scale("+m+")"):(A.classList.remove("slide_hide-resizable"),t.removeAttribute("style"),x.removeAttribute("style")))})}},{key:"scrollToTop",value:function(e){e.preventDefault(),$.fn.fullpage.moveTo(1,0)}}]),e}();new e}();
"use strict";function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function i(i,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(e,n,o){return n&&i(e.prototype,n),o&&i(e,o),e}}();!function(){window.mobileAndTabletcheck=function(){var i=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(i=!0)}(navigator.userAgent||navigator.vendor||window.opera),i},window.isMobile={Android:function(){return/Android/i.test(navigator.userAgent)},BlackBerry:function(){return/BlackBerry/i.test(navigator.userAgent)},iOS:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},Windows:function(){return/IEMobile/i.test(navigator.userAgent)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Windows()}};var i=function(){function i(){_classCallCheck(this,i);var e=new Promise(function(i,e){return"loading"!=document.readyState?i():void document.addEventListener("DOMContentLoaded",function(){return i()})});e.then(this.init.bind(this))}return _createClass(i,[{key:"init",value:function(){window.isMobile.Android()?document.body.parentNode.classList.add("android"):window.isMobile.iOS()?document.body.parentNode.classList.add("ios"):window.mobileAndTabletcheck()?document.body.parentNode.classList.add("unknown-mobile"):document.body.parentNode.classList.add("desktop")}}]),i}();new i}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}();!function(){var e=function(){function e(){_classCallCheck(this,e);var t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(this.init.bind(this))}return _createClass(e,[{key:"init",value:function(){var e=this,t=document.querySelectorAll(".login__back"),o=document.querySelectorAll(".login__login-button, .login_success .login__submit"),i=document.querySelectorAll(".menu__interpreter, .header__interpreter");this.menu_popup_open=!1,this.login_button=document.querySelector(".menu__login"),this.register_button=document.querySelector(".menu__register"),this.step1=document.querySelector(".login_register-step-1"),this.step1_form=document.querySelector(".login_register-step-1 form.login__form"),this.step2=document.querySelector(".login_register-step-2"),this.step2_form=document.querySelector(".login_register-step-2 form.login__form"),this.mobile_popup=document.querySelector(".popup_mobile"),this.mobile_popup_close=this.mobile_popup.querySelector(".popup__close"),this.wrapper=document.querySelector(".menu__wrapper"),this.header_register_button=document.querySelector(".header__link_register"),this.header_login_button=document.querySelector(".header__link_login"),this.recovery_button=document.querySelector(".login__password-recovery"),this.lightbox=document.querySelector("body>.lightbox"),this.login_popup=document.querySelector(".login_login"),this.recovery=document.querySelector(".login_recovery"),this.password=document.querySelector(".login_password"),this.recovery_form=this.recovery.querySelector(".login__form"),this.password_form=this.password.querySelector(".login__form"),this.error_message=document.querySelector(".login_error"),this.email=document.querySelector(".login_email"),this.success=document.querySelector(".login_success"),this.current=document.querySelector(".login_open"),this.last=[],this.login_button.addEventListener("click",this.openLoginForm.bind(this)),this.recovery_button.addEventListener("click",this.openRecovery.bind(this)),this.lightbox.addEventListener("click",this.closeAll.bind(this)),this.register_button.addEventListener("click",this.openRegister.bind(this)),this.header_login_button.addEventListener("click",this.openLoginOuter.bind(this)),this.header_register_button.addEventListener("click",this.openRegisterOuter.bind(this)),this.mobile_popup_close.addEventListener("click",this.closeMobilePopup.bind(this)),this.recovery_form.addEventListener("submit",this.sendData.bind(this)),this.password_form.addEventListener("submit",this.sendData.bind(this)),this.step1_form.addEventListener("submit",this.openNext.bind(this)),this.step2_form.addEventListener("submit",this.sendData.bind(this)),window.addEventListener("resize",this.reposPopup.bind(this)),$(".login select").select2(),[].forEach.call(i,function(t){t.addEventListener("click",e.openMobilePopup.bind(e))}),[].forEach.call(t,function(t){t.addEventListener("click",e.goback.bind(e))}),[].forEach.call(o,function(t){t.addEventListener("click",e.openLoginInner.bind(e))}),this.WebRTCSupport=!document.documentElement.classList.contains("no-peerconnection"),this.WebRTCSupport||([].forEach.call(document.querySelectorAll("form.login__form input, form.login__form button, form.login__form select"),function(e){e.setAttribute("disabled","disabled")}),[].forEach.call(document.documentElement.querySelectorAll("form.login__form"),function(e){e.addEventListener("click",function(t){e.closest(".login").querySelector(".popup_browser").open()})}),[].forEach.call(document.querySelectorAll(".popup_browser"),function(t){e.showPopup(t)}))}},{key:"openNext",value:function(e){e.preventDefault(),0!=this.step1_form.validate()&&this.openForm(this.step2)}},{key:"reposPopup",value:function(e){this.menu_popup_open&&(this.mobile_popup.style[Modernizr.prefixed("transform")]="translateY("+this.mobile_popup.offsetHeight+"px)")}},{key:"closeMobilePopup",value:function(){var e=this;this.menu_popup_open&&(this.menu_popup_open=!1,Velocity(this.mobile_popup,"stop"),Velocity(this.mobile_popup,{translateY:0},250),Velocity(this.mobile_popup_button,"stop"),Velocity(this.mobile_popup_button,{opacity:1},{duration:250,begin:function(){e.mobile_popup_button.style.display="block"}}))}},{key:"openMobilePopup",value:function(){var e=this;this.menu_popup_open||(this.menu_popup_open=!0,Velocity(this.mobile_popup,"stop"),Velocity(this.mobile_popup,{translateY:this.mobile_popup.offsetHeight+"px"},250),Velocity(this.mobile_popup_button,"stop"),Velocity(this.mobile_popup_button,{opacity:0},{duration:250,complete:function(){e.mobile_popup_button.style.display="none"}}))}},{key:"showPopup",value:function(e){void 0!=e.show?e.show():setTimeout(this.showPopup.bind(this,e),50)}},{key:"openLoginOuter",value:function(e){var t=this;e.preventDefault(),$.fn.fullpage.moveTo(1,0),setTimeout(function(){t.login_button.click()},800)}},{key:"openRegisterOuter",value:function(e){var t=this;e.preventDefault(),$.fn.fullpage.moveTo(1,0),setTimeout(function(){t.register_button.click()},800)}},{key:"sendData",value:function(e){var t=this;e.preventDefault();var o=e.currentTarget;if(0!=o.validate())try{!function(){var e=4,i=200,n=void 0,r=new XMLHttpRequest,s=new Promise(function(n,s){r.open("POST",o.getAttribute("action")),r.send(new FormData(o)),r.onreadystatechange=function(){r.readyState===e&&(t.recovery_form.reset(),r.status===i?n():s({code:parseInt(r.status,10),message:r.statusText}))}});n=o.hasAttribute("data-check")?t.showCheckMessage.bind(t):t.showSuccessMessage.bind(t),s.then(n)["catch"](t.showErrorMessage.bind(t))}()}catch(i){console.log("error: ",i)}}},{key:"showCheckMessage",value:function(){this.openForm(this.email)}},{key:"showSuccessMessage",value:function(){this.openForm(this.success)}},{key:"openLoginInner",value:function(){this.openForm(this.login_popup)}},{key:"showErrorMessage",value:function(e){this.last=new Array,console.log(e.code,"Responce status code: "+e.code+". "+e.message+"."),this.openForm(this.error_message,!0)}},{key:"goback",value:function(){this.openForm()}},{key:"emailHaveSend",value:function(){this.openForm(this.email)}},{key:"openRegisterInner",value:function(){this.openForm(this.step1)}},{key:"openRegister",value:function(){var e=this;event.preventDefault(),$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1);var t={right:0},o={duration:250};Velocity(this.step1,t,o),this.current=this.step1,t={opacity:1},o={begin:function(){e.lightbox.style.display="block"},duration:250},Velocity(this.lightbox,t,o)}},{key:"openRecovery",value:function(e){e.preventDefault(),this.WebRTCSupport&&this.openForm(this.recovery)}},{key:"openForm",value:function(e,t){$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1);var o=this.current.querySelector("form");if(null!=o&&setTimeout(function(){o.clear()},250),"undefined"==typeof e&&this.last.length>0)e=this.last.pop();else{if("undefined"==typeof e&&0==this.last.length)return void this.closeAll();1!=t&&this.last.push(this.current)}o=e.querySelector("form"),null!=o&&(console.log("clearing"),setTimeout(function(){o.clear()},250));var i={right:-this.current.offsetWidth+"px"},n={duration:250};Velocity(this.current,i,n),i={right:0},n={duration:250},Velocity(e,i,n),this.current=e}},{key:"closeAll",value:function(){var e=this;$.fn.fullpage.setAllowScrolling(!0),$.fn.fullpage.setKeyboardScrolling(!0);var t={right:-this.current.offsetWidth+"px"},o={duration:250};Velocity(this.current,t,o),this.current=null,t={opacity:0},o={complete:function(){e.lightbox.style.display="none"},duration:250},Velocity(this.lightbox,t,o),this.clearAll()}},{key:"clearAll",value:function(){[].forEach.call(document.querySelectorAll("form"),function(e){e.clear()}),$(".login select").select2("destroy"),$(".login select").select2()}},{key:"openLoginForm",value:function(e){var t=this;e.preventDefault(),$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1);var o={right:0},i={duration:250};Velocity(this.login_popup,o,i),this.current=this.login_popup,o={opacity:1},i={begin:function(){t.lightbox.style.display="block"},duration:250},Velocity(this.lightbox,o,i)}}]),e}();new e}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}();!function(){var t=function(){function t(e){_classCallCheck(this,t),this.popup=e,e.querySelector(".popup__close").addEventListener("click",this.close.bind(this)),this.popup.close=this.close.bind(this),this.popup.open=this.open.bind(this),this.popup.show=this.show.bind(this),this.status=!1,this.jamping=!1}return _createClass(t,[{key:"show",value:function(){this.popup.style.display="block",this.popup.style[Modernizr.prefixed("transform")]="rotateX(0)",this.status=!0}},{key:"hide",value:function(){this.popup.style.display="none",this.popup.style[Modernizr.prefixed("transform")]="rotateX(180deg)",this.status=!1,Velocity(this.popup,"stop")}},{key:"close",value:function(){var t=this;this.jamping||this.status&&(Velocity(this.popup,"finish"),Velocity(this.popup,{rotateX:"120deg"},{duration:500,begin:function(){t.popup.style.display="block"},complete:function(){t.status=!1}}))}},{key:"open",value:function(){var t=this;if(!this.jamping){if(this.status)return void this.jump();this.jamping=!0,Velocity(this.popup,"finish"),Velocity(this.popup,{rotateX:"0deg"},{duration:500,begin:function(){t.popup.style.display="block"},complete:function(){t.status=!0}}),Velocity(this.popup,{rotateX:"20deg"},150),Velocity(this.popup,{rotateX:"0deg"},125),Velocity(this.popup,{rotateX:"10deg"},200),Velocity(this.popup,{rotateX:"0deg"},{duration:175,complete:function(){t.jamping=!1}})}}},{key:"jump",value:function(){var t=this;this.jamping=!0,Velocity(this.popup,"finish"),Velocity(this.popup,{rotateX:"35deg"},150),Velocity(this.popup,{rotateX:"0deg"},125),Velocity(this.popup,{rotateX:"20deg"},200),Velocity(this.popup,{rotateX:"0deg"},175),Velocity(this.popup,{rotateX:"15deg"},250),Velocity(this.popup,{rotateX:"0deg"},{duration:225,complete:function(){t.jamping=!1}})}}]),t}(),e=new Promise(function(t,e){return"loading"!=document.readyState?t():void document.addEventListener("DOMContentLoaded",function(){return t()})});e.then(function(){[].forEach.call(document.querySelectorAll(".popup_browser"),function(e){new t(e)})})}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();!function(){var e=function(){function e(t){_classCallCheck(this,e),this.form=t,t.setAttribute("novalidate","novalidate"),t.addEventListener("submit",this.validate.bind(this)),t.validate=this.validate.bind(this),t.clear=this.clear.bind(this),this.messages={en:{required:"Required field",email:"Wrong email format",equal:"Password fields should be equal",url:"Wrong url format"},ru:{required:"Поле обязательно для заполнения",email:"Проверьте формат email",equal:"Пароли должны совпадать",url:"Проверьте формат URL"}}}return _createClass(e,[{key:"clear",value:function(){this.form.reset();var e=$(this.form).find("select");e.length>0&&(e.select2("destroy"),e.select2()),setTimeout(function(){var e=document.querySelectorAll(".form-error"),t=document.querySelectorAll("[data-valid], [data-invalid]");[].forEach.call(e,function(e){e.parentNode.removeChild(e)}),[].forEach.call(t,function(e){e.removeAttribute("data-invalid"),e.removeAttribute("data-valid")})},100)}},{key:"addError",value:function(e,t,r){if(null==e.parentNode.querySelector('.form-error[data-type="'+r+'"]')){var a=document.createElement("P");a.appendChild(document.createTextNode(t)),a.classList.add("form-error"),a.setAttribute("data-type",r),e.parentNode.appendChild(a)}}},{key:"clearError",value:function(e,t){var r=e.parentNode.querySelector('.form-error[data-type="'+t+'"]');null!=r&&e.parentNode.removeChild(r)}},{key:"validate",value:function(e){var t=this;"undefined"==typeof e||e.currentTarget.hasAttribute("data-reload")||e.preventDefault();var r=!0,a=this.form.querySelectorAll("[data-equal]"),l=this.form.querySelectorAll("[required]"),o=this.form.querySelectorAll('input[type="url"]'),i=this.form.querySelectorAll('input[type="email"]'),n=new RegExp("^(http|https|ftp)://([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&amp;%$-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9-]+.)*[a-zA-Z0-9-]+.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(/($|[a-zA-Z0-9.,?'\\+&amp;%$#=~_-]+))*$","i"),u=new RegExp("^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$");[].forEach.call(a,function(e){var a=t.form.querySelector(e.getAttribute("data-equal"));e.value.trim()!=a.value.trim()?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].equal,"equal")):t.clearError(e,"equal")}),[].forEach.call(l,function(e){""===e.value.trim()?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].required,"required")):t.clearError(e,"required")}),[].forEach.call(o,function(e){e.value.trim().length>0&&n.test(e.value.trim())===!1?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].url,"url")):t.clearError(e,"url")}),[].forEach.call(i,function(e){e.value.trim().length>0&&u.test(e.value.trim())===!1?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].email,"email")):t.clearError(e,"email")});var d=Array.prototype.slice.call(a).concat(Array.prototype.slice.call(l),Array.prototype.slice.call(o),Array.prototype.slice.call(i));[].forEach.call(d,function(e){var t=e.parentNode.querySelector(".form-error");if(null!=t){var r=document.createAttribute("data-invalid");r.value=!0,"SELECT"==e.tagName?(e.nextSibling.setAttributeNode(r),e.nextSibling.removeAttribute("data-valid")):(e.setAttributeNode(r),e.removeAttribute("data-valid"))}else{var a=document.createAttribute("data-valid");a.value=!0,"SELECT"==e.tagName?(e.nextSibling.setAttributeNode(a),e.nextSibling.removeAttribute("data-invalid")):(e.setAttributeNode(a),e.removeAttribute("data-invalid"))}});var c=this.form.querySelectorAll(".form_error").length;return c>0&&(r=!1),r===!1&&"undefined"!=typeof e&&e.preventDefault(),r}}]),e}(),t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(function(){var t=document.querySelectorAll("form");[].forEach.call(t,function(t){new e(t)})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxhbmRpbmcvbGFuZGluZy5qcyIsImxheW91dC9sYXlvdXQuanMiLCJsb2dpbi9sb2dpbi5qcyIsInBvcHVwL3BvcHVwLmpzIiwidmFsaWRhdG9yL3ZhbGlkYXRpb24uanMiXSwibmFtZXMiOlsiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJMYW5kZ2luZyIsInRoaXMiLCJyZWFkeSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZG9jdW1lbnQiLCJyZWFkeVN0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRoZW4iLCJpbml0IiwiYmluZCIsInZhbHVlIiwiX3RoaXMiLCJmaXJlZCIsInRhYmxldCIsIm1vYmlsZSIsIm1pbl9oZWlnaHQiLCJoZWFkZXIiLCJxdWVyeVNlbGVjdG9yIiwiY2xvY2siLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbUZyYW1lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiJCIsImZ1bGxwYWdlIiwic2VjdGlvblNlbGVjdG9yIiwibmF2aWdhdGlvbiIsImFmdGVyTG9hZCIsImhpZGVMb2FkZXIiLCJhZnRlclJlbmRlciIsInJlY291bnRTbGlkZXMiLCJhZnRlclJlc2l6ZSIsIm9uTGVhdmUiLCJpbmRleCIsIm5leHRJbmRleCIsImRpcmVjdGlvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImhpZGVOYXYiLCJzaG93TmF2Iiwic2Nyb2xsVG9Ub3AiLCJfdGhpczIiLCJWZWxvY2l0eSIsIm5hdiIsIm9wYWNpdHkiLCJkdXJhdGlvbiIsImNvbXBsZXRlIiwic3R5bGUiLCJkaXNwbGF5IiwiX3RoaXMzIiwiYmVnaW4iLCJnZXRFbGVtZW50QnlJZCIsImZvckVhY2giLCJjYWxsIiwicXVlcnlTZWxlY3RvckFsbCIsInJlc2l6YWJsZSIsInNldEF0dHJpYnV0ZSIsIm9mZnNldEhlaWdodCIsIm9mZnNldFdpZHRoIiwibG9hZGVyIiwib3B0aW9ucyIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsIl90aGlzNCIsInJlc2l6YWJsZXMiLCJjZW50cmVkcyIsInNlcnZpY2Vfc2xpZGUiLCJzZXJ2aWNlX2lsbHVzdHJhdGlvbiIsIm1haW4iLCJzaGVtYSIsImhlYWRlcl9oZWlnaHQiLCJmb290ZXJfaGVpZ2h0Iiwic2hlbWFfZGV0YWlscyIsImNsb3Nlc3QiLCJwaG9uZXMiLCJwaG9uZSIsInZpZXdwb3J0X2hlaWdodCIsInVuZGVmaW5lZCIsInZpZXdwb3J0X3dpZHRoIiwiYXZhaWxhYmFsZV93aWR0aCIsImF2YWlsYWJhbGVfaGVpZ2h0IiwiZGVsdGEiLCJjZWxsIiwic2NhbGUiLCJzY2FsZV94Iiwic2NhbGVfeSIsInNsaWRlIiwiYm9yZGVyX3dpZHRoIiwiZGVsdGFfeSIsInRyX3kiLCJ0cl94IiwiZWxlbWVudF93aWR0aCIsImVsZW1lbnRfaGVpZ2h0IiwiaWxsdXN0cmF0aW9uX2hlaWdodCIsIndfd2lkdGgiLCJ3X2hlaWdodCIsImlfd2lkdGgiLCJpX2hlaWdodCIsIk1hdGgiLCJtaW4iLCJwYXJzZUludCIsImhlaWdodCIsInJlbW92ZUF0dHJpYnV0ZSIsImJhY2tncm91bmRTaXplIiwidmlzaWJpbGl0eSIsIk1vZGVybml6ciIsInByZWZpeGVkIiwicmlnaHQiLCJib3JkZXJSaWdodFdpZHRoIiwiYmFja2dyb3VuZFBvc2l0aW9uIiwiY2VudHJlZCIsImdldEF0dHJpYnV0ZSIsImFkZCIsInN0ZXAiLCJyZW1vdmUiLCJjb250YWlucyIsImJvcmRlckxlZnRXaWR0aCIsIm1hcmdpblJpZ2h0IiwibWFyZ2luTGVmdCIsImNvbnNvbGUiLCJsb2ciLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiZm4iLCJtb3ZlVG8iLCJtb2JpbGVBbmRUYWJsZXRjaGVjayIsImNoZWNrIiwiYSIsInRlc3QiLCJzdWJzdHIiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ2ZW5kb3IiLCJvcGVyYSIsImlzTW9iaWxlIiwiQW5kcm9pZCIsIkJsYWNrQmVycnkiLCJpT1MiLCJXaW5kb3dzIiwiYW55IiwiTGF5b3V0IiwiYm9keSIsIk1lbnUiLCJiYWNrX2J1dHRvbnMiLCJsb2dpbl9idXR0b25zIiwibW9iaWxlX3BvcHVwX2J1dHRvbnMiLCJtZW51X3BvcHVwX29wZW4iLCJsb2dpbl9idXR0b24iLCJyZWdpc3Rlcl9idXR0b24iLCJzdGVwMSIsInN0ZXAxX2Zvcm0iLCJzdGVwMiIsInN0ZXAyX2Zvcm0iLCJtb2JpbGVfcG9wdXAiLCJtb2JpbGVfcG9wdXBfY2xvc2UiLCJ3cmFwcGVyIiwiaGVhZGVyX3JlZ2lzdGVyX2J1dHRvbiIsImhlYWRlcl9sb2dpbl9idXR0b24iLCJyZWNvdmVyeV9idXR0b24iLCJsaWdodGJveCIsImxvZ2luX3BvcHVwIiwicmVjb3ZlcnkiLCJwYXNzd29yZCIsInJlY292ZXJ5X2Zvcm0iLCJwYXNzd29yZF9mb3JtIiwiZXJyb3JfbWVzc2FnZSIsImVtYWlsIiwic3VjY2VzcyIsImN1cnJlbnQiLCJsYXN0Iiwib3BlbkxvZ2luRm9ybSIsIm9wZW5SZWNvdmVyeSIsImNsb3NlQWxsIiwib3BlblJlZ2lzdGVyIiwib3BlbkxvZ2luT3V0ZXIiLCJvcGVuUmVnaXN0ZXJPdXRlciIsImNsb3NlTW9iaWxlUG9wdXAiLCJzZW5kRGF0YSIsIm9wZW5OZXh0IiwicmVwb3NQb3B1cCIsInNlbGVjdDIiLCJidXR0b24iLCJvcGVuTW9iaWxlUG9wdXAiLCJnb2JhY2siLCJvcGVuTG9naW5Jbm5lciIsIldlYlJUQ1N1cHBvcnQiLCJkb2N1bWVudEVsZW1lbnQiLCJlbGVtZW50IiwiZm9ybSIsIm9wZW4iLCJwb3B1cCIsInNob3dQb3B1cCIsInZhbGlkYXRlIiwib3BlbkZvcm0iLCJ0cmFuc2xhdGVZIiwibW9iaWxlX3BvcHVwX2J1dHRvbiIsInNob3ciLCJzZXRUaW1lb3V0IiwiY2xpY2siLCJfdGhpczUiLCJfdGhpczYiLCJjdXJyZW50VGFyZ2V0IiwiRE9ORSIsIk9LIiwibWVzc2FnZSIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwibG9hZGVkIiwic2VuZCIsIkZvcm1EYXRhIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVzZXQiLCJzdGF0dXMiLCJjb2RlIiwic3RhdHVzVGV4dCIsImhhc0F0dHJpYnV0ZSIsInNob3dDaGVja01lc3NhZ2UiLCJzaG93U3VjY2Vzc01lc3NhZ2UiLCJzaG93RXJyb3JNZXNzYWdlIiwiZXJyIiwicmVhc29uIiwiQXJyYXkiLCJfdGhpczciLCJzZXRBbGxvd1Njcm9sbGluZyIsInNldEtleWJvYXJkU2Nyb2xsaW5nIiwiZG9udF9zYXZlIiwiY2xlYXIiLCJwb3AiLCJwdXNoIiwiX3RoaXM4IiwiY2xlYXJBbGwiLCJfdGhpczkiLCJQb3B1cCIsImNsb3NlIiwiamFtcGluZyIsInJvdGF0ZVgiLCJqdW1wIiwiVmFsaWRhdGlvbiIsIm1lc3NhZ2VzIiwiZW4iLCJyZXF1aXJlZCIsImVxdWFsIiwidXJsIiwicnUiLCJzZWxlY3RvcnMiLCJmaW5kIiwiZXJyb3JzIiwiZmllbGRzIiwiZXJyb3IiLCJmaWVsZCIsInR5cGUiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsInZhbGlkIiwiZXF1YWxfZmllbGRzIiwicmVxdWlyZWRfZmllbGRzIiwidXJsX2ZpZWxkcyIsImVtYWlsX2ZpZWxkcyIsInVybF9yZWdleCIsIlJlZ0V4cCIsImVtYWlsX3JlZ2V4IiwidHJpbSIsImFkZEVycm9yIiwiY2xlYXJFcnJvciIsImFsbF9maWVsZHMiLCJzbGljZSIsImNvbmNhdCIsImludmFsaWQiLCJjcmVhdGVBdHRyaWJ1dGUiLCJ0YWdOYW1lIiwibmV4dFNpYmxpbmciLCJzZXRBdHRyaWJ1dGVOb2RlIiwiX3ZhbGlk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QkFBaUIsV0FDbkNGLFFBQVFDLEtBQUs4TixFQUFPLFNBQUN2RixHQUNwQixHQUFJaUQsR0FBV2pEIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbihmdW5jdGlvbigpIHtcbiAgICBjbGFzcyBMYW5kZ2luZyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gU3RhcnQgaW5pdGlhbGl6YXRpb24gb24gZG9tbG9hZFxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgbGV0IHJlYWR5ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9IFwibG9hZGluZ1wiKSByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHJlc29sdmUoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlYWR5LnRoZW4odGhpcy5pbml0LmJpbmQodGhpcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBBZGRpbmcgZXZlbnRzIGFuZCBwcm9wZXJ0aWVzXG4gICAgICAgICAqL1xuICAgICAgICBpbml0KCkge1xuICAgICAgICAgICAgdGhpcy5maXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy50YWJsZXQgPSAxMjAwO1xuICAgICAgICAgICAgdGhpcy5tb2JpbGUgPSA3NTA7XG4gICAgICAgICAgICB0aGlzLm1pbl9oZWlnaHQgPSAzMDA7XG5cbiAgICAgICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJylcbiAgICAgICAgICAgICAgICAsIGNsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsb2NrJyk7XG5cbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbUZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiAgICAgICAgICAgICQoXCIubGFuZGluZ1wiKS5mdWxscGFnZSh7XG4gICAgICAgICAgICAgICAgc2VjdGlvblNlbGVjdG9yOiBcIi5sYW5kaW5nX19zZWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBhZnRlckxvYWQ6IHRoaXMuaGlkZUxvYWRlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGFmdGVyUmVuZGVyOiB0aGlzLnJlY291bnRTbGlkZXMuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBhZnRlclJlc2l6ZTogdGhpcy5yZWNvdW50U2xpZGVzLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgb25MZWF2ZTogKGluZGV4LCBuZXh0SW5kZXgsIGRpcmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dEluZGV4ID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfb3BlbicsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZU5hdigpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9vcGVuJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dOYXYoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0SW5kZXggPT0gNikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvY2suY2xhc3NMaXN0LnRvZ2dsZSgnY2xvY2tfdmlzaWJsZScsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvY2suY2xhc3NMaXN0LnRvZ2dsZSgnY2xvY2tfdmlzaWJsZScsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb290ZXJfX3RvcFwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5zY3JvbGxUb1RvcC5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGhpZGVOYXYgKCkge1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5uYXYsIFwiZmluaXNoXCIpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5uYXYsIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMFxuICAgICAgICAgICAgICAgICwgY29tcGxldGU6ICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBzaG93TmF2ICgpIHtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubmF2LCBcImZpbmlzaFwiKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubmF2LCB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDBcbiAgICAgICAgICAgICAgICAsIGJlZ2luOiAoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXYuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGhpZGVMb2FkZXIoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5maXJlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5uYXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnAtbmF2Jyk7XG4gICAgICAgICAgICB0aGlzLmhpZGVOYXYoKTtcblxuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZV9fcmVzaXphYmxlLCAuc2xpZGVfX2NlbnRyZWQnKSwgKHJlc2l6YWJsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc2l6YWJsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaGVpZ2h0JywgcmVzaXphYmxlLm9mZnNldEhlaWdodCk7XG4gICAgICAgICAgICAgICAgcmVzaXphYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS13aWR0aCcsIHJlc2l6YWJsZS5vZmZzZXRXaWR0aCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IGxvYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkZXJfX3dyYXBwZXInKSxcbiAgICAgICAgICAgICAgICBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGxvYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBWZWxvY2l0eShsb2FkZXIsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgcmVjb3VudFNsaWRlcygpIHtcblxuICAgICAgICAgICAgbGV0IHJlc2l6YWJsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVfX3Jlc2l6YWJsZScpXG4gICAgICAgICAgICAgICAgLCBjZW50cmVkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZV9fY2VudHJlZCcpXG4gICAgICAgICAgICAgICAgLCBzZXJ2aWNlX3NsaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlX3NlcnZpY2UnKVxuICAgICAgICAgICAgICAgICwgc2VydmljZV9pbGx1c3RyYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVfX2lsbHVzdHJhdGlvbicpXG4gICAgICAgICAgICAgICAgLCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlX21haW4nKVxuICAgICAgICAgICAgICAgICwgc2hlbWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hlbWEnKVxuICAgICAgICAgICAgICAgICwgaGVhZGVyX2hlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKS5vZmZzZXRIZWlnaHRcbiAgICAgICAgICAgICAgICAsIGZvb3Rlcl9oZWlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9vdGVyJykub2Zmc2V0SGVpZ2h0XG4gICAgICAgICAgICAgICAgLCBzaGVtYV9kZXRhaWxzID0gc2hlbWEuY2xvc2VzdCgnLnNsaWRlX19kZXRhaWxzJylcbiAgICAgICAgICAgICAgICAsIHBob25lcyA9IG1haW4ucXVlcnlTZWxlY3RvcignLnNsaWRlX19waG9uZXMnKVxuICAgICAgICAgICAgICAgICwgcGhvbmUgPSBtYWluLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZV9fcGhvbmUnKVxuICAgICAgICAgICAgICAgICwgdmlld3BvcnRfaGVpZ2h0XG4gICAgICAgICAgICAgICAgLCB2aWV3cG9ydF93aWR0aFxuICAgICAgICAgICAgICAgICwgYXZhaWxhYmFsZV93aWR0aFxuICAgICAgICAgICAgICAgICwgYXZhaWxhYmFsZV9oZWlnaHRcbiAgICAgICAgICAgICAgICAsIGRlbHRhID0gMjBcbiAgICAgICAgICAgICAgICAsIGNlbGxcbiAgICAgICAgICAgICAgICAsIHNjYWxlID0gMVxuICAgICAgICAgICAgICAgICwgc2NhbGVfeCA9IDFcbiAgICAgICAgICAgICAgICAsIHNjYWxlX3kgPSAxXG4gICAgICAgICAgICAgICAgLCBoZWFkZXJcbiAgICAgICAgICAgICAgICAsIHNsaWRlXG4gICAgICAgICAgICAgICAgLCBib3JkZXJfd2lkdGhcbiAgICAgICAgICAgICAgICAsIGRlbHRhX3lcbiAgICAgICAgICAgICAgICAsIHRyX3lcbiAgICAgICAgICAgICAgICAsIHRyX3hcbiAgICAgICAgICAgICAgICAsIGVsZW1lbnRfd2lkdGhcbiAgICAgICAgICAgICAgICAsIGVsZW1lbnRfaGVpZ2h0XG4gICAgICAgICAgICAgICAgLCBpbGx1c3RyYXRpb25faGVpZ2h0XG4gICAgICAgICAgICAgICAgLCB3X3dpZHRoXG4gICAgICAgICAgICAgICAgLCB3X2hlaWdodFxuICAgICAgICAgICAgICAgICwgaV93aWR0aFxuICAgICAgICAgICAgICAgICwgaV9oZWlnaHQ7XG5cbiAgICAgICAgICAgIGNlbGwgPSBtYWluLnF1ZXJ5U2VsZWN0b3IoJy5mcC10YWJsZUNlbGwnKTtcbiAgICAgICAgICAgIHZpZXdwb3J0X2hlaWdodCA9IE1hdGgubWluKGNlbGwub2Zmc2V0SGVpZ2h0LCBwYXJzZUludChjZWxsLnN0eWxlLmhlaWdodCwgMTApKTtcbiAgICAgICAgICAgIHZpZXdwb3J0X3dpZHRoID0gY2VsbC5vZmZzZXRXaWR0aDtcblxuICAgICAgICAgICAgaWYgKCh2aWV3cG9ydF9oZWlnaHQgPCA3MTApICYmICh2aWV3cG9ydF93aWR0aDw3NTApKSB7XG4gICAgICAgICAgICAgICAgc2hlbWEuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIHNoZW1hX2RldGFpbHMuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICBzaGVtYV9kZXRhaWxzLnN0eWxlLmhlaWdodCA9IFwiYXV0b1wiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzaGVtYS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgc2hlbWFfZGV0YWlscy5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGhlYWRlciA9IG1haW4ucXVlcnlTZWxlY3RvcignLnNsaWRlX19oZWFkZXInKTtcbiAgICAgICAgICAgIG1haW4uc3R5bGUuYmFja2dyb3VuZFNpemUgPSBcImF1dG8gXCIgKyB2aWV3cG9ydF9oZWlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICBhdmFpbGFiYWxlX2hlaWdodCA9IHZpZXdwb3J0X2hlaWdodCAtIGRlbHRhIC0gaGVhZGVyLm9mZnNldEhlaWdodDtcblxuICAgICAgICAgICAgaWYgKChhdmFpbGFiYWxlX2hlaWdodCA8IDUwMCkmJihhdmFpbGFiYWxlX2hlaWdodCA+PSAyMDApKSB7XG4gICAgICAgICAgICAgICAgcGhvbmVzLnN0eWxlLmhlaWdodCA9IGF2YWlsYWJhbGVfaGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgICAgIHBob25lcy5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGF2YWlsYWJhbGVfaGVpZ2h0IDwgMjAwICkge1xuICAgICAgICAgICAgICAgIHBob25lcy5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGhvbmVzLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHZpZXdwb3J0X3dpZHRoIDwgNzUwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCh2aWV3cG9ydF9oZWlnaHQgPCA3OTApICYmICh2aWV3cG9ydF9oZWlnaHQgPiA0ODApKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlID0gdmlld3BvcnRfaGVpZ2h0Lzc5MDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2NhbGUgPCAxKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lLnN0eWxlW01vZGVybml6ci5wcmVmaXhlZCgndHJhbnNmb3JtJyldID0gJ3NjYWxlKCcgKyBzY2FsZSArICcpJztcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmUucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2aWV3cG9ydF9oZWlnaHQgPCA0ODEpe1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXIucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBob25lLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoKHZpZXdwb3J0X3dpZHRoID4gNTAwKSAmJiAoc2NhbGUgPCAxKSkge1xuICAgICAgICAgICAgICAgICAgICBpX3dpZHRoID0gKChzY2FsZSo0NDApLzMpKjI7XG4gICAgICAgICAgICAgICAgICAgIHBob25lLnN0eWxlW01vZGVybml6ci5wcmVmaXhlZCgndHJhbnNmb3JtLW9yaWdpbicpXSA9IFwiNjYuNjY2JSA2Ni42NjYlXCI7XG4gICAgICAgICAgICAgICAgICAgIHBob25lLnN0eWxlLnJpZ2h0ID0gLShpX3dpZHRoLzIpK1wicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnN0eWxlLmJvcmRlclJpZ2h0V2lkdGggPSBpX3dpZHRoIC0gMjAgKyBcInB4XCJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCh2aWV3cG9ydF93aWR0aCA8IDUwMSkgJiYgKHZpZXdwb3J0X3dpZHRoID4gNDIwKSAmJiAoc2NhbGUgPCAxKSkge1xuICAgICAgICAgICAgICAgICAgICBpX3dpZHRoID0gKHNjYWxlKjQ0MCkvMjtcbiAgICAgICAgICAgICAgICAgICAgcGhvbmUuc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0tb3JpZ2luJyldID0gXCI1MCUgNjYuNjY2JVwiO1xuICAgICAgICAgICAgICAgICAgICBwaG9uZS5zdHlsZS5yaWdodCA9IC1pX3dpZHRoK1wicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnN0eWxlLmJvcmRlclJpZ2h0V2lkdGggPSBpX3dpZHRoIC0gMjAgKyBcInB4XCJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNjYWxlIDwgMSkge1xuICAgICAgICAgICAgICAgICAgICBpX3dpZHRoID0gKHNjYWxlKjQ0MCkvMztcbiAgICAgICAgICAgICAgICAgICAgcGhvbmUuc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0tb3JpZ2luJyldID0gXCIzMy4zMzMlIDY2LjY2NiVcIjtcbiAgICAgICAgICAgICAgICAgICAgcGhvbmUuc3R5bGUucmlnaHQgPSAtKGlfd2lkdGgqMikrXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXIuc3R5bGUuYm9yZGVyUmlnaHRXaWR0aCA9IGlfd2lkdGggLSAyMCArIFwicHhcIlxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICgodmlld3BvcnRfd2lkdGggPiA1MDApICYmIChzY2FsZT49MSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGhvbmUuc3R5bGUucmlnaHQgPSBcIi0xNDVweFwiO1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXIuc3R5bGUuYm9yZGVyUmlnaHRXaWR0aCA9ICBcIjI3MHB4XCI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgodmlld3BvcnRfd2lkdGggPCA1MDEpICYmICh2aWV3cG9ydF93aWR0aCA+IDQyMCkgJiYgKHNjYWxlPj0xKSkge1xuICAgICAgICAgICAgICAgICAgICBwaG9uZS5zdHlsZS5yaWdodCA9IFwiLTIyMHB4XCI7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlci5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gXCIyMDBweFwiXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzY2FsZT49MSkge1xuICAgICAgICAgICAgICAgICAgICBwaG9uZS5zdHlsZS5yaWdodCA9IFwiLTI5MHB4XCI7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlci5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gXCIxMjVweFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjZWxsID0gc2VydmljZV9zbGlkZS5xdWVyeVNlbGVjdG9yKCcuZnAtdGFibGVDZWxsJyk7XG4gICAgICAgICAgICB2aWV3cG9ydF9oZWlnaHQgPSBNYXRoLm1pbihjZWxsLm9mZnNldEhlaWdodCwgcGFyc2VJbnQoY2VsbC5zdHlsZS5oZWlnaHQsIDEwKSk7XG4gICAgICAgICAgICB2aWV3cG9ydF93aWR0aCA9IGNlbGwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICBoZWFkZXIgPSBzZXJ2aWNlX3NsaWRlLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZV9faGVhZGVyJyk7XG4gICAgICAgICAgICBpbGx1c3RyYXRpb25faGVpZ2h0ID0gKE1hdGgubWluKGNlbGwub2Zmc2V0SGVpZ2h0LCBwYXJzZUludChjZWxsLnN0eWxlLmhlaWdodCwgMTApKSAtIGhlYWRlci5vZmZzZXRIZWlnaHQgLSBmb290ZXJfaGVpZ2h0IC0gaGVhZGVyX2hlaWdodCk7XG4gICAgICAgICAgICBzZXJ2aWNlX2lsbHVzdHJhdGlvbi5zdHlsZS5oZWlnaHQgPSBpbGx1c3RyYXRpb25faGVpZ2h0ICsgXCJweFwiO1xuXG4gICAgICAgICAgICB3X3dpZHRoID0gNzAwO1xuICAgICAgICAgICAgd19oZWlnaHQgPSA1NzA7XG4gICAgICAgICAgICBpX3dpZHRoID0gdmlld3BvcnRfd2lkdGgqMS4yO1xuICAgICAgICAgICAgaV9oZWlnaHQgPSB3X2hlaWdodCppX3dpZHRoL3dfd2lkdGg7XG5cbiAgICAgICAgICAgIGlmIChpX2hlaWdodCA8IGlsbHVzdHJhdGlvbl9oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBzZXJ2aWNlX2lsbHVzdHJhdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdzbGlkZV9faWxsdXN0cmF0aW9uX2hpZGRlbicsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXJ2aWNlX2lsbHVzdHJhdGlvbi5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBcIjUwJSAxMDAlXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlsbHVzdHJhdGlvbl9oZWlnaHQgPCAzNzApIHtcbiAgICAgICAgICAgICAgICBzZXJ2aWNlX2lsbHVzdHJhdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdzbGlkZV9faWxsdXN0cmF0aW9uX2hpZGRlbicsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXJ2aWNlX2lsbHVzdHJhdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdzbGlkZV9faWxsdXN0cmF0aW9uX2hpZGRlbicsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXJ2aWNlX2lsbHVzdHJhdGlvbi5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBcIjUwJSAwXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChjZW50cmVkcywgKGNlbnRyZWQpID0+IHtcbiAgICAgICAgICAgICAgICBzbGlkZSA9IGNlbnRyZWQuY2xvc2VzdCgnLnNsaWRlJyk7XG4gICAgICAgICAgICAgICAgY2VsbCA9IGNlbnRyZWQuY2xvc2VzdCgnLmZwLXRhYmxlQ2VsbCcpO1xuXG4gICAgICAgICAgICAgICAgdmlld3BvcnRfaGVpZ2h0ID0gTWF0aC5taW4oY2VsbC5vZmZzZXRIZWlnaHQsIHBhcnNlSW50KGNlbGwuc3R5bGUuaGVpZ2h0LCAxMCkpO1xuICAgICAgICAgICAgICAgIHZpZXdwb3J0X3dpZHRoID0gY2VsbC5vZmZzZXRXaWR0aDtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnRfaGVpZ2h0ID0gcGFyc2VJbnQoY2VudHJlZC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaGVpZ2h0JyksMTApO1xuXG4gICAgICAgICAgICAgICAgaWYgKHZpZXdwb3J0X3dpZHRoID4gMTIyMCl7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRfd2lkdGggPSAxMjMwO1xuICAgICAgICAgICAgICAgICAgICBkZWx0YV95ID0gMTcwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmlld3BvcnRfd2lkdGggPiA3NTApIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudF93aWR0aCA9IDEwNTA7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhX3kgPSAxNzA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudF93aWR0aCA9IDQwMDtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudF9oZWlnaHQgPSA5MDA7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhX3kgPSAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGF2YWlsYWJhbGVfaGVpZ2h0ID0gdmlld3BvcnRfaGVpZ2h0IC0gaGVhZGVyX2hlaWdodCAtIGRlbHRhICsgZGVsdGFfeTtcbiAgICAgICAgICAgICAgICBhdmFpbGFiYWxlX3dpZHRoID0gdmlld3BvcnRfd2lkdGggLSA0MDtcblxuICAgICAgICAgICAgICAgIHNjYWxlX3ggPSBhdmFpbGFiYWxlX2hlaWdodC9lbGVtZW50X2hlaWdodDtcbiAgICAgICAgICAgICAgICBzY2FsZV95ID0gYXZhaWxhYmFsZV93aWR0aC9lbGVtZW50X3dpZHRoO1xuICAgICAgICAgICAgICAgIHNjYWxlID0gTWF0aC5taW4oc2NhbGVfeCwgc2NhbGVfeSk7XG5cbiAgICAgICAgICAgICAgICB0cl95ID0gMDtcbiAgICAgICAgICAgICAgICB0cl94ID0gMDtcblxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgKGF2YWlsYWJhbGVfd2lkdGggPCBlbGVtZW50X3dpZHRoIClcbiAgICAgICAgICAgICAgICAgICAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgKHZpZXdwb3J0X3dpZHRoIDwgMTIyMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICYmICh2aWV3cG9ydF93aWR0aCA+IDc1MClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICB0cl94ID0gLShlbGVtZW50X3dpZHRoIC0gdmlld3BvcnRfd2lkdGgpLzI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoIHZpZXdwb3J0X2hlaWdodCA8IDMwMCApIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LmFkZCgnc2xpZGVfaGlkZS1jZW50cmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGNlbnRyZWQuc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0nKV0gPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChjZW50cmVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGVwc19fc3RlcCcpLCAoc3RlcCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RlcC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc2NhbGUgPCAxICkge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZV9oaWRlLWNlbnRyZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgY2VudHJlZC5zdHlsZVtNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zZm9ybScpXSA9ICd0cmFuc2xhdGVYKCcrdHJfeCsncHgpIHNjYWxlKCcgKyBzY2FsZSArICcpJztcblxuICAgICAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoY2VudHJlZC5xdWVyeVNlbGVjdG9yQWxsKCcuc3RlcHNfX3N0ZXAnKSwgKHN0ZXApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAuc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0nKV0gPSAnc2NhbGUoJyArICgxICsgKDEtc2NhbGUpKSArICcpJztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlX2hpZGUtY2VudHJlZCcpO1xuICAgICAgICAgICAgICAgICAgICBjZW50cmVkLnN0eWxlW01vZGVybml6ci5wcmVmaXhlZCgndHJhbnNmb3JtJyldID0gJ3RyYW5zbGF0ZVgoJyt0cl94KydweCknO1xuICAgICAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoY2VudHJlZC5xdWVyeVNlbGVjdG9yQWxsKCcuc3RlcHNfX3N0ZXAnKSwgKHN0ZXApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKHJlc2l6YWJsZXMsIChyZXNpemFibGUpID0+IHtcblxuICAgICAgICAgICAgICAgIHNsaWRlID0gcmVzaXphYmxlLmNsb3Nlc3QoJy5zbGlkZScpO1xuICAgICAgICAgICAgICAgIGhlYWRlciA9IHJlc2l6YWJsZS5jbG9zZXN0KCcuc2xpZGVfX2RldGFpbHMnKS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVfX2hlYWRlcicpO1xuICAgICAgICAgICAgICAgIGNlbGwgPSByZXNpemFibGUuY2xvc2VzdCgnLmZwLXRhYmxlQ2VsbCcpO1xuXG4gICAgICAgICAgICAgICAgdmlld3BvcnRfaGVpZ2h0ID0gTWF0aC5taW4oY2VsbC5vZmZzZXRIZWlnaHQsIHBhcnNlSW50KGNlbGwuc3R5bGUuaGVpZ2h0LCAxMCkpO1xuICAgICAgICAgICAgICAgIHZpZXdwb3J0X3dpZHRoID0gY2VsbC5vZmZzZXRXaWR0aDtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnRfaGVpZ2h0ID0gcGFyc2VJbnQocmVzaXphYmxlLmdldEF0dHJpYnV0ZSgnZGF0YS1oZWlnaHQnKSwxMCk7XG4gICAgICAgICAgICAgICAgZWxlbWVudF93aWR0aCA9IHBhcnNlSW50KHJlc2l6YWJsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2lkdGgnKSwxMCk7XG5cbiAgICAgICAgICAgICAgICBzY2FsZV94ID0gYXZhaWxhYmFsZV9oZWlnaHQvZWxlbWVudF9oZWlnaHQ7XG4gICAgICAgICAgICAgICAgc2NhbGVfeSA9IGF2YWlsYWJhbGVfd2lkdGgvZWxlbWVudF93aWR0aDtcbiAgICAgICAgICAgICAgICBzY2FsZSA9IE1hdGgubWluKHNjYWxlX3gsIHNjYWxlX3kpO1xuXG5cbiAgICAgICAgICAgICAgICBpZiAodmlld3BvcnRfd2lkdGggPiB0aGlzLm1vYmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0YWJsZXQgYW5kIGRlc2t0b3AgcmVzb2x1dGlvblxuXG4gICAgICAgICAgICAgICAgICAgIGF2YWlsYWJhbGVfaGVpZ2h0ID0gdmlld3BvcnRfaGVpZ2h0IC0gaGVhZGVyX2hlaWdodCAtIGRlbHRhO1xuICAgICAgICAgICAgICAgICAgICBhdmFpbGFiYWxlX3dpZHRoID0gdmlld3BvcnRfd2lkdGgvMiAtIDQwO1xuXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlX3ggPSBhdmFpbGFiYWxlX2hlaWdodC9lbGVtZW50X2hlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVfeSA9IGF2YWlsYWJhbGVfd2lkdGgvZWxlbWVudF93aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgc2NhbGUgPSBNYXRoLm1pbihzY2FsZV94LCBzY2FsZV95KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggYXZhaWxhYmFsZV9oZWlnaHQgPCB0aGlzLm1pbl9oZWlnaHQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLmNsYXNzTGlzdC5hZGQoJ3NsaWRlX2hpZGUtcmVzaXphYmxlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc2NhbGUgPCAxICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZV9oaWRlLXJlc2l6YWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlLnN0eWxlW01vZGVybml6ci5wcmVmaXhlZCgndHJhbnNmb3JtJyldID0gJ3NjYWxlKCcgKyBzY2FsZSArICcpJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlLmNsYXNzTGlzdC5jb250YWlucygnc2xpZGVfcmlnaHQnKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyX3dpZHRoID0gKHBhcnNlSW50KHJlc2l6YWJsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2lkdGgnKSwxMCkpKnNjYWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlci5zdHlsZS5ib3JkZXJMZWZ0V2lkdGggPSBib3JkZXJfd2lkdGggKyAncHgnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpZXdwb3J0X3dpZHRoID4gdGhpcy50YWJsZXQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRhYmxldCByZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZS5zdHlsZS5tYXJnaW5SaWdodCA9IChoZWFkZXIub2Zmc2V0V2lkdGgvMiAtIGJvcmRlcl93aWR0aCkgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJfd2lkdGggPSAocGFyc2VJbnQocmVzaXphYmxlLmdldEF0dHJpYnV0ZSgnZGF0YS13aWR0aCcpLDEwKSkqc2NhbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnN0eWxlLmJvcmRlclJpZ2h0V2lkdGggPSBib3JkZXJfd2lkdGggKyAncHgnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpZXdwb3J0X3dpZHRoID4gdGhpcy50YWJsZXQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRhYmxldCByZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZS5zdHlsZS5tYXJnaW5MZWZ0ID0gKGhlYWRlci5vZmZzZXRXaWR0aC8yIC0gYm9yZGVyX3dpZHRoKSArICdweCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZV9oaWRlLXJlc2l6YWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlci5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1vYmlsZSByZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgICAgIGF2YWlsYWJhbGVfaGVpZ2h0ID0gdmlld3BvcnRfaGVpZ2h0IC0gaGVhZGVyX2hlaWdodCAtIGhlYWRlci5vZmZzZXRIZWlnaHQgLSA2MDtcbiAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmFsZV93aWR0aCA9IHZpZXdwb3J0X3dpZHRoIC0gNDA7XG5cbiAgICAgICAgICAgICAgICAgICAgc2NhbGVfeCA9IGF2YWlsYWJhbGVfaGVpZ2h0L2VsZW1lbnRfaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBzY2FsZV95ID0gYXZhaWxhYmFsZV93aWR0aC9lbGVtZW50X3dpZHRoO1xuICAgICAgICAgICAgICAgICAgICBzY2FsZSA9IE1hdGgubWluKHNjYWxlX3gsIHNjYWxlX3kpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdmFpbGFiYWxlX3dpZHRoIDwgZWxlbWVudF93aWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlLnN0eWxlLm1hcmdpbkxlZnQgPSAtICgoKGVsZW1lbnRfd2lkdGggLSBhdmFpbGFiYWxlX3dpZHRoKS8yKSAtIDIwKSArIFwicHhcIlxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlLnN0eWxlLm1hcmdpbkxlZnQgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiggYXZhaWxhYmFsZV9oZWlnaHQgPCAyMDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaGlkZGluZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LmFkZCgnc2xpZGVfaGlkZS1yZXNpemFibGUnKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBzY2FsZSA8IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlX2hpZGUtcmVzaXphYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGUuc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0nKV0gPSAnc2NhbGUoJyArIHNjYWxlICsgJyknO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZV9oaWRlLXJlc2l6YWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlci5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBzY3JvbGxUb1RvcChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICQuZm4uZnVsbHBhZ2UubW92ZVRvKDEsIDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5ldyBMYW5kZ2luZztcbn0pKCk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbihmdW5jdGlvbigpIHtcbiAgICB3aW5kb3cubW9iaWxlQW5kVGFibGV0Y2hlY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNoZWNrID0gZmFsc2U7XG4gICAgICAgIChmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICBpZiAoLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWlub3xhbmRyb2lkfGlwYWR8cGxheWJvb2t8c2lsay9pLnRlc3QoYSkgfHwgLzEyMDd8NjMxMHw2NTkwfDNnc298NHRocHw1MFsxLTZdaXw3NzBzfDgwMnN8YSB3YXxhYmFjfGFjKGVyfG9vfHNcXC0pfGFpKGtvfHJuKXxhbChhdnxjYXxjbyl8YW1vaXxhbihleHxueXx5dyl8YXB0dXxhcihjaHxnbyl8YXModGV8dXMpfGF0dHd8YXUoZGl8XFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XFwtKG58dSl8YzU1XFwvfGNhcGl8Y2N3YXxjZG1cXC18Y2VsbHxjaHRtfGNsZGN8Y21kXFwtfGNvKG1wfG5kKXxjcmF3fGRhKGl0fGxsfG5nKXxkYnRlfGRjXFwtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnxcXC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXFwtfF8pfGcxIHV8ZzU2MHxnZW5lfGdmXFwtNXxnXFwtbW98Z28oXFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZFxcLShtfHB8dCl8aGVpXFwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcXC1jfGh0KGMoXFwtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aVxcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcXC18XFwvKXxpYnJvfGlkZWF8aWcwMXxpa29tfGltMWt8aW5ub3xpcGFxfGlyaXN8amEodHx2KWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndCggfFxcLyl8a2xvbnxrcHQgfGt3Y1xcLXxreW8oY3xrKXxsZShub3x4aSl8bGcoIGd8XFwvKGt8bHx1KXw1MHw1NHxcXC1bYS13XSl8bGlid3xseW54fG0xXFwtd3xtM2dhfG01MFxcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG1cXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcXC18IHxvfHYpfHp6KXxtdCg1MHxwMXx2ICl8bXdicHxteXdhfG4xMFswLTJdfG4yMFsyLTNdfG4zMCgwfDIpfG41MCgwfDJ8NSl8bjcoMCgwfDEpfDEwKXxuZSgoY3xtKVxcLXxvbnx0Znx3Znx3Z3x3dCl8bm9rKDZ8aSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oYXxkfHQpfHBkeGd8cGcoMTN8XFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXFwtMnxwbyhja3xydHxzZSl8cHJveHxwc2lvfHB0XFwtZ3xxYVxcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XFwtWzItN118aVxcLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcXC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcXC18b298cFxcLSl8c2RrXFwvfHNlKGMoXFwtfDB8MSl8NDd8bWN8bmR8cmkpfHNnaFxcLXxzaGFyfHNpZShcXC18bSl8c2tcXC0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGhcXC18dlxcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFxcLXx0ZGdcXC18dGVsKGl8bSl8dGltXFwtfHRcXC1tb3x0byhwbHxzaCl8dHMoNzB8bVxcLXxtM3xtNSl8dHhcXC05fHVwKFxcLmJ8ZzF8c2kpfHV0c3R8djQwMHx2NzUwfHZlcml8dmkocmd8dGUpfHZrKDQwfDVbMC0zXXxcXC12KXx2bTQwfHZvZGF8dnVsY3x2eCg1Mnw1M3w2MHw2MXw3MHw4MHw4MXw4M3w4NXw5OCl8dzNjKFxcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1xcLXx5b3VyfHpldG98enRlXFwtL2kudGVzdChhLnN1YnN0cigwLCA0KSkpIGNoZWNrID0gdHJ1ZVxuICAgICAgICB9KShuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgd2luZG93Lm9wZXJhKTtcbiAgICAgICAgcmV0dXJuIGNoZWNrO1xuICAgIH07XG5cbiAgICB3aW5kb3cuaXNNb2JpbGUgPSB7XG4gICAgICAgIEFuZHJvaWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIC9BbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgfSxcbiAgICAgICAgQmxhY2tCZXJyeTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gL0JsYWNrQmVycnkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICB9LFxuICAgICAgICBpT1M6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIC9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgfSxcbiAgICAgICAgV2luZG93czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gL0lFTW9iaWxlL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgfSxcbiAgICAgICAgYW55OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAoaXNNb2JpbGUuQW5kcm9pZCgpIHx8IGlzTW9iaWxlLkJsYWNrQmVycnkoKSB8fCBpc01vYmlsZS5pT1MoKSB8fCBpc01vYmlsZS5XaW5kb3dzKCkpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNsYXNzIExheW91dCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gU3RhcnQgaW5pdGlhbGl6YXRpb24gb24gZG9tbG9hZFxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgbGV0IHJlYWR5ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9IFwibG9hZGluZ1wiKSByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHJlc29sdmUoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlYWR5LnRoZW4odGhpcy5pbml0LmJpbmQodGhpcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBBZGRpbmcgZXZlbnRzIGFuZCBwcm9wZXJ0aWVzXG4gICAgICAgICAqL1xuICAgICAgICBpbml0KCkge1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5pc01vYmlsZS5BbmRyb2lkKCkpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnYW5kcm9pZCcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuaXNNb2JpbGUuaU9TKCkpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnaW9zJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5tb2JpbGVBbmRUYWJsZXRjaGVjaygpKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ3Vua25vd24tbW9iaWxlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdkZXNrdG9wJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnYW5kcm9pZCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5ldyBMYXlvdXQ7XG59KSgpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4oZnVuY3Rpb24gKCkge1xuICAgIGNsYXNzIE1lbnUge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFN0YXJ0IGluaXRpYWxpemF0aW9uIG9uIGRvbWxvYWRcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgICAgICAgICBsZXQgcmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+e1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9IFwibG9hZGluZ1wiKSByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVhZHkudGhlbih0aGlzLmluaXQuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIEFkZGluZyBldmVudHMgYW5kIHByb3BlcnRpZXNcbiAgICAgICAgICovXG4gICAgICAgIGluaXQgKCkge1xuICAgICAgICAgICAgbGV0IGJhY2tfYnV0dG9ucyA9ICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubG9naW5fX2JhY2snKVxuICAgICAgICAgICAgICAgICwgbG9naW5fYnV0dG9ucyA9ICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubG9naW5fX2xvZ2luLWJ1dHRvbiwgLmxvZ2luX3N1Y2Nlc3MgLmxvZ2luX19zdWJtaXQnKVxuICAgICAgICAgICAgICAgICwgbW9iaWxlX3BvcHVwX2J1dHRvbnMgPSAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudV9faW50ZXJwcmV0ZXIsIC5oZWFkZXJfX2ludGVycHJldGVyJyk7XG5cbiAgICAgICAgICAgIHRoaXMubWVudV9wb3B1cF9vcGVuID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMubG9naW5fYnV0dG9uID0gICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnVfX2xvZ2luJyk7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyX2J1dHRvbiA9ICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51X19yZWdpc3RlcicpO1xuXG4gICAgICAgICAgICB0aGlzLnN0ZXAxID0gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9yZWdpc3Rlci1zdGVwLTEnKTtcbiAgICAgICAgICAgIHRoaXMuc3RlcDFfZm9ybSA9ICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX3JlZ2lzdGVyLXN0ZXAtMSBmb3JtLmxvZ2luX19mb3JtJyk7XG4gICAgICAgICAgICB0aGlzLnN0ZXAyID0gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9yZWdpc3Rlci1zdGVwLTInKTtcbiAgICAgICAgICAgIHRoaXMuc3RlcDJfZm9ybSA9ICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX3JlZ2lzdGVyLXN0ZXAtMiBmb3JtLmxvZ2luX19mb3JtJyk7XG5cbiAgICAgICAgICAgIHRoaXMubW9iaWxlX3BvcHVwID0gICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX21vYmlsZScpO1xuICAgICAgICAgICAgdGhpcy5tb2JpbGVfcG9wdXBfY2xvc2UgPSAgICAgICB0aGlzLm1vYmlsZV9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJyk7XG5cbiAgICAgICAgICAgIHRoaXMud3JhcHBlciA9ICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnVfX3dyYXBwZXInKTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyX3JlZ2lzdGVyX2J1dHRvbiA9ICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fbGlua19yZWdpc3RlcicpO1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJfbG9naW5fYnV0dG9uID0gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19saW5rX2xvZ2luJyk7XG4gICAgICAgICAgICB0aGlzLnJlY292ZXJ5X2J1dHRvbiA9ICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9fcGFzc3dvcmQtcmVjb3ZlcnknKTtcbiAgICAgICAgICAgIHRoaXMubGlnaHRib3ggPSAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keT4ubGlnaHRib3gnKTtcbiAgICAgICAgICAgIHRoaXMubG9naW5fcG9wdXAgPSAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX2xvZ2luJyk7XG4gICAgICAgICAgICB0aGlzLnJlY292ZXJ5ID0gICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9yZWNvdmVyeScpO1xuICAgICAgICAgICAgdGhpcy5wYXNzd29yZCA9ICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW5fcGFzc3dvcmQnKTtcbiAgICAgICAgICAgIHRoaXMucmVjb3ZlcnlfZm9ybSA9ICAgICAgICAgICAgdGhpcy5yZWNvdmVyeS5xdWVyeVNlbGVjdG9yKCcubG9naW5fX2Zvcm0nKTtcbiAgICAgICAgICAgIHRoaXMucGFzc3dvcmRfZm9ybSA9ICAgICAgICAgICAgdGhpcy5wYXNzd29yZC5xdWVyeVNlbGVjdG9yKCcubG9naW5fX2Zvcm0nKTtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JfbWVzc2FnZSA9ICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX2Vycm9yJyk7XG4gICAgICAgICAgICB0aGlzLmVtYWlsID0gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9lbWFpbCcpO1xuICAgICAgICAgICAgdGhpcy5zdWNjZXNzID0gICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW5fc3VjY2VzcycpO1xuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW5fb3BlbicpO1xuICAgICAgICAgICAgdGhpcy5sYXN0ID0gW107XG5cbiAgICAgICAgICAgIHRoaXMubG9naW5fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vcGVuTG9naW5Gb3JtLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5yZWNvdmVyeV9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5SZWNvdmVyeS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMubGlnaHRib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlQWxsLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5SZWdpc3Rlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyX2xvZ2luX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3BlbkxvZ2luT3V0ZXIuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcl9yZWdpc3Rlcl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5SZWdpc3Rlck91dGVyLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5tb2JpbGVfcG9wdXBfY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlTW9iaWxlUG9wdXAuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgICAgIHRoaXMucmVjb3ZlcnlfZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnNlbmREYXRhLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5wYXNzd29yZF9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuc2VuZERhdGEuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnN0ZXAxX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5vcGVuTmV4dC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuc3RlcDJfZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnNlbmREYXRhLmJpbmQodGhpcykpO1xuXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZXBvc1BvcHVwLmJpbmQodGhpcykpO1xuXG4gICAgICAgICAgICAkKCcubG9naW4gc2VsZWN0Jykuc2VsZWN0MigpO1xuXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwobW9iaWxlX3BvcHVwX2J1dHRvbnMsIChidXR0b24pID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5Nb2JpbGVQb3B1cC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoYmFja19idXR0b25zLCAoYnV0dG9uKSA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5nb2JhY2suYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGxvZ2luX2J1dHRvbnMsIChidXR0b24pID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5Mb2dpbklubmVyLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuV2ViUlRDU3VwcG9ydCA9ICFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCduby1wZWVyY29ubmVjdGlvbicpO1xuXG5cbiAgICAgICAgICAgIGlmKCF0aGlzLldlYlJUQ1N1cHBvcnQpIHtcblxuICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdmb3JtLmxvZ2luX19mb3JtIGlucHV0LCBmb3JtLmxvZ2luX19mb3JtIGJ1dHRvbiwgZm9ybS5sb2dpbl9fZm9ybSBzZWxlY3QnKSwgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Zvcm0ubG9naW5fX2Zvcm0nKSwgKGZvcm0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5jbG9zZXN0KCcubG9naW4nKS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfYnJvd3NlcicpLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX2Jyb3dzZXInKSwgKHBvcHVwKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1BvcHVwKHBvcHVwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9wZW5OZXh0IChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0ZXAxX2Zvcm0udmFsaWRhdGUoKSA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5zdGVwMik7XG4gICAgICAgIH1cblxuICAgICAgICByZXBvc1BvcHVwIChldmVudCkge1xuICAgICAgICAgICAgaWYoIXRoaXMubWVudV9wb3B1cF9vcGVuKXtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1vYmlsZV9wb3B1cC5zdHlsZVtNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zZm9ybScpXSA9IFwidHJhbnNsYXRlWShcIiArIHRoaXMubW9iaWxlX3BvcHVwLm9mZnNldEhlaWdodCArIFwicHgpXCI7XG4gICAgICAgIH1cblxuICAgICAgICBjbG9zZU1vYmlsZVBvcHVwICgpIHtcbiAgICAgICAgICAgIGlmKCF0aGlzLm1lbnVfcG9wdXBfb3Blbil7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tZW51X3BvcHVwX29wZW4gPSBmYWxzZTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5tb2JpbGVfcG9wdXAsIFwic3RvcFwiKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubW9iaWxlX3BvcHVwLCB7dHJhbnNsYXRlWTogMH0sIDI1MCk7XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubW9iaWxlX3BvcHVwX2J1dHRvbiwgXCJzdG9wXCIpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5tb2JpbGVfcG9wdXBfYnV0dG9uLCB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTBcbiAgICAgICAgICAgICAgICAsIGJlZ2luOiAoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2JpbGVfcG9wdXBfYnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBvcGVuTW9iaWxlUG9wdXAgKCkge1xuICAgICAgICAgICAgaWYodGhpcy5tZW51X3BvcHVwX29wZW4pe1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWVudV9wb3B1cF9vcGVuID0gdHJ1ZTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5tb2JpbGVfcG9wdXAsIFwic3RvcFwiKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubW9iaWxlX3BvcHVwLCB7dHJhbnNsYXRlWTogdGhpcy5tb2JpbGVfcG9wdXAub2Zmc2V0SGVpZ2h0ICsgXCJweFwifSwgMjUwKTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5tb2JpbGVfcG9wdXBfYnV0dG9uLCBcInN0b3BcIik7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLm1vYmlsZV9wb3B1cF9idXR0b24sIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgICwgY29tcGxldGU6ICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vYmlsZV9wb3B1cF9idXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgc2hvd1BvcHVwIChwb3B1cCkge1xuICAgICAgICAgICAgaWYgKHBvcHVwLnNob3cgIT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICBwb3B1cC5zaG93KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5zaG93UG9wdXAuYmluZCh0aGlzLCBwb3B1cCksIDUwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gU2Nyb2xsIHRvIGZpcnN0IHNsaWRlIGFuZCBvcGVuIGxvZ2luIGZvcm1cbiAgICAgICAgICovXG4gICAgICAgIG9wZW5Mb2dpbk91dGVyIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICQuZm4uZnVsbHBhZ2UubW92ZVRvKDEsIDApO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgICAgIHRoaXMubG9naW5fYnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICB9LCA4MDApXG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFNjcm9sbCB0byBmaXJzdCBzbGlkZSBhbmQgb3BlbiByZWdpc3RlciBmb3JtXG4gICAgICAgICAqL1xuICAgICAgICBvcGVuUmVnaXN0ZXJPdXRlciAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLm1vdmVUbygxLCAwKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyX2J1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgfSwgODAwKVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTZW5kIHJlZ2lzdHJhdGlvbiBkYXRhIGFuZCBzaG93IG1lc3NhZ2VcbiAgICAgICAgICovXG4gICAgICAgIHNlbmREYXRhIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGxldCBmb3JtID0gZXZlbnQuY3VycmVudFRhcmdldDtcblxuICAgICAgICAgICAgaWYgKGZvcm0udmFsaWRhdGUoKSA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsZXQgRE9ORSA9IDRcbiAgICAgICAgICAgICAgICAsIE9LID0gMjAwXG4gICAgICAgICAgICAgICAgLCBtZXNzYWdlXG4gICAgICAgICAgICAgICAgLCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICAgICAgICAgICAgICAgICwgbG9hZGVkID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB4aHIub3BlbignUE9TVCcsIGZvcm0uZ2V0QXR0cmlidXRlKCdhY3Rpb24nKSk7XG4gICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKG5ldyBGb3JtRGF0YShmb3JtKSk7XG4gICAgICAgICAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IERPTkUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY292ZXJ5X2Zvcm0ucmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gT0spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBwYXJzZUludCh4aHIuc3RhdHVzLCAxMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB4aHIuc3RhdHVzVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZm9ybS5oYXNBdHRyaWJ1dGUoJ2RhdGEtY2hlY2snKSkge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gdGhpcy5zaG93Q2hlY2tNZXNzYWdlLmJpbmQodGhpcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IHRoaXMuc2hvd1N1Y2Nlc3NNZXNzYWdlLmJpbmQodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbG9hZGVkLnRoZW4obWVzc2FnZSkuY2F0Y2godGhpcy5zaG93RXJyb3JNZXNzYWdlLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgIC8vIGxvYWRlZC50aGVuKG1lc3NhZ2UpLmNhdGNoKG1lc3NhZ2UpO1xuXG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3I6ICcsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFNob3cgY2hlY2sgZW1haWwgbWVzc2FnZVxuICAgICAgICAgKi9cbiAgICAgICAgc2hvd0NoZWNrTWVzc2FnZSAoKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5Gb3JtKHRoaXMuZW1haWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTaG93IHN1Y2Nlc3MgbWVzc2FnZVxuICAgICAgICAgKi9cbiAgICAgICAgc2hvd1N1Y2Nlc3NNZXNzYWdlICgpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5zdWNjZXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gT3BlbiBsb2dpblxuICAgICAgICAgKi9cbiAgICAgICAgb3BlbkxvZ2luSW5uZXIgKCkge1xuICAgICAgICAgICAgdGhpcy5vcGVuRm9ybSh0aGlzLmxvZ2luX3BvcHVwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gU2hvdyBtZXNzYWdlXG4gICAgICAgICAqL1xuICAgICAgICBzaG93RXJyb3JNZXNzYWdlIChyZWFzb24pIHtcbiAgICAgICAgICAgIHRoaXMubGFzdCA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVhc29uLmNvZGUsICdSZXNwb25jZSBzdGF0dXMgY29kZTogJyArIHJlYXNvbi5jb2RlICsgJy4gJyArIHJlYXNvbi5tZXNzYWdlICsgJy4nKTtcbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5lcnJvcl9tZXNzYWdlLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gT3BlbiBsYXN0IHBhZ2VcbiAgICAgICAgICovXG4gICAgICAgIGdvYmFjayAoKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5Gb3JtKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFNob3cgZW1haWwgc2VudCB3YXJuaW5nXG4gICAgICAgICAqL1xuICAgICAgICBlbWFpbEhhdmVTZW5kICgpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5lbWFpbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIE9wZW4gcmVnaXN0ZXIgZm9ybVxuICAgICAgICAgKi9cbiAgICAgICAgb3BlblJlZ2lzdGVySW5uZXIgKCkge1xuICAgICAgICAgICAgdGhpcy5vcGVuRm9ybSh0aGlzLnN0ZXAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gT3BlbiByZWdpc3RlciBmb3JtXG4gICAgICAgICAqL1xuICAgICAgICBvcGVuUmVnaXN0ZXIgKCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5zZXRBbGxvd1Njcm9sbGluZyhmYWxzZSk7XG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLnNldEtleWJvYXJkU2Nyb2xsaW5nKGZhbHNlKTtcblxuICAgICAgICAgICAgbGV0IHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICByaWdodDogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMuc3RlcDEsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMuc3RlcDE7XG5cbiAgICAgICAgICAgIHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBiZWdpbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saWdodGJveC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5saWdodGJveCwgcHJvcHMsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBPcGVuIHJlY292ZXJ5IGZvcm1zXG4gICAgICAgICAqL1xuICAgICAgICBvcGVuUmVjb3ZlcnkgKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgaWYoIXRoaXMuV2ViUlRDU3VwcG9ydCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5yZWNvdmVyeSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIE9wZW4gcmVjb3ZlcnkgZm9ybXNcbiAgICAgICAgICogQHBhcmFtIGZvcm0ge25vZGV9IEZvcm0geW91IHdhbnQgdG8gb3BlblxuICAgICAgICAgKiBAcGFyYW0gYmFjayB7bm9kZX0gRm9ybSB3aGljaCB5b3Ugd2FudCB0byBvcGVuIHdoZW4gdXNlciBwcmVzcyBiYWNrLCBieSBkZWZhdWx0IOKAlMKgbGFzdCBmb3JtIG9wZW5lZFxuICAgICAgICAgKi9cbiAgICAgICAgb3BlbkZvcm0gKHBvcHVwLCBkb250X3NhdmUpIHtcbiAgICAgICAgICAgICQuZm4uZnVsbHBhZ2Uuc2V0QWxsb3dTY3JvbGxpbmcoZmFsc2UpO1xuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5zZXRLZXlib2FyZFNjcm9sbGluZyhmYWxzZSk7XG5cbiAgICAgICAgICAgIGxldCBmb3JtID0gdGhpcy5jdXJyZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbiAgICAgICAgICAgIGlmIChmb3JtICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57Zm9ybS5jbGVhcigpO30sIDI1MCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgcG9wdXAgPT0gXCJ1bmRlZmluZWRcIiAmJiB0aGlzLmxhc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHBvcHVwID0gdGhpcy5sYXN0LnBvcCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcG9wdXAgPT0gXCJ1bmRlZmluZWRcIiAmJiB0aGlzLmxhc3QubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlQWxsKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb250X3NhdmUgIT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdC5wdXNoKHRoaXMuY3VycmVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvcm0gPSBwb3B1cC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG4gICAgICAgICAgICBpZiAoZm9ybSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsZWFyaW5nJyk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e2Zvcm0uY2xlYXIoKTt9LCAyNTApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgcHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtIHRoaXMuY3VycmVudC5vZmZzZXRXaWR0aCArIFwicHhcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMuY3VycmVudCwgcHJvcHMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgcHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVmVsb2NpdHkocG9wdXAsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IHBvcHVwO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBDbG9zZSBhbGwgZm9ybXNcbiAgICAgICAgICovXG4gICAgICAgIGNsb3NlQWxsICgpIHtcblxuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5zZXRBbGxvd1Njcm9sbGluZyh0cnVlKTtcbiAgICAgICAgICAgICQuZm4uZnVsbHBhZ2Uuc2V0S2V5Ym9hcmRTY3JvbGxpbmcodHJ1ZSk7XG5cbiAgICAgICAgICAgIGxldCBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC0gdGhpcy5jdXJyZW50Lm9mZnNldFdpZHRoICsgXCJweFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5jdXJyZW50LCBwcm9wcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSBudWxsO1xuXG4gICAgICAgICAgICBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlnaHRib3guc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5saWdodGJveCwgcHJvcHMsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICB0aGlzLmNsZWFyQWxsKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjbGVhckFsbCAoKSB7XG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpLCAoZm9ybSkgPT4ge1xuICAgICAgICAgICAgICAgIGZvcm0uY2xlYXIoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKCcubG9naW4gc2VsZWN0Jykuc2VsZWN0MihcImRlc3Ryb3lcIik7XG4gICAgICAgICAgICAkKCcubG9naW4gc2VsZWN0Jykuc2VsZWN0MigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBPcGVuIGxvZ2luIHBvcHVwXG4gICAgICAgICAqL1xuICAgICAgICBvcGVuTG9naW5Gb3JtIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5zZXRBbGxvd1Njcm9sbGluZyhmYWxzZSk7XG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLnNldEtleWJvYXJkU2Nyb2xsaW5nKGZhbHNlKTtcblxuICAgICAgICAgICAgbGV0IHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICByaWdodDogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubG9naW5fcG9wdXAsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMubG9naW5fcG9wdXA7XG5cbiAgICAgICAgICAgIHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBiZWdpbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saWdodGJveC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5saWdodGJveCwgcHJvcHMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmV3IE1lbnU7XG59KSgpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4oZnVuY3Rpb24gKCkge1xuXG4gICAgLyoqXG4gICAgICogQGNsYXNzIFBvcHVwXG4gICAgICovXG4gICAgY2xhc3MgUG9wdXAge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIEFkZGluZyBldmVudHMgYW5kIHByb3BlcnRpZXNcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3RvciAocG9wdXApIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXAgPSBwb3B1cDtcbiAgICAgICAgICAgIHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnBvcHVwLmNsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cC5vcGVuID0gdGhpcy5vcGVuLmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBvcHVwLnNob3cgPSB0aGlzLnNob3cuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmphbXBpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3cgKCkge1xuICAgICAgICAgICAgdGhpcy5wb3B1cC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgdGhpcy5wb3B1cC5zdHlsZVtNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zZm9ybScpXSA9IFwicm90YXRlWCgwKVwiO1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaGlkZSAoKSB7XG4gICAgICAgICAgICB0aGlzLnBvcHVwLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIHRoaXMucG9wdXAuc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0nKV0gPSBcInJvdGF0ZVgoMTgwZGVnKVwiO1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBmYWxzZTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIFwic3RvcFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsb3NlICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmphbXBpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwgXCJmaW5pc2hcIik7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCB7XG4gICAgICAgICAgICAgICAgcm90YXRlWDogXCIxMjBkZWdcIlxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDBcbiAgICAgICAgICAgICAgICAsIGJlZ2luOiAoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1cC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAsIGNvbXBsZXRlOiAoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wZW4gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuamFtcGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cykge1xuICAgICAgICAgICAgICAgIHRoaXMuanVtcCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuamFtcGluZyA9IHRydWU7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCBcImZpbmlzaFwiKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIHtcbiAgICAgICAgICAgICAgICByb3RhdGVYOiBcIjBkZWdcIlxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDBcbiAgICAgICAgICAgICAgICAsIGJlZ2luOiAoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1cC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAsIGNvbXBsZXRlOiAoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge3JvdGF0ZVg6IFwiMjBkZWdcIn0sIDE1MCk7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCB7cm90YXRlWDogXCIwZGVnXCJ9LCAxMjUpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge3JvdGF0ZVg6IFwiMTBkZWdcIn0sIDIwMCk7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCB7cm90YXRlWDogXCIwZGVnXCJ9LCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246MTc1XG4gICAgICAgICAgICAgICAgLCBjb21wbGV0ZTogKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuamFtcGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBqdW1wICgpIHtcbiAgICAgICAgICAgIHRoaXMuamFtcGluZyA9IHRydWU7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCBcImZpbmlzaFwiKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIHtyb3RhdGVYOiBcIjM1ZGVnXCJ9LCAxNTApO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge3JvdGF0ZVg6IFwiMGRlZ1wifSwgMTI1KTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIHtyb3RhdGVYOiBcIjIwZGVnXCJ9LCAyMDApO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge3JvdGF0ZVg6IFwiMGRlZ1wifSwgMTc1KTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIHtyb3RhdGVYOiBcIjE1ZGVnXCJ9LCAyNTApO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge3JvdGF0ZVg6IFwiMGRlZ1wifSwge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMjVcbiAgICAgICAgICAgICAgICAsIGNvbXBsZXRlOiAoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5qYW1waW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG5cbiAgICBsZXQgcmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+e1xuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPSBcImxvYWRpbmdcIikgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCk9PiByZXNvbHZlKCkpO1xuICAgIH0pO1xuXG4gICAgcmVhZHkudGhlbigoKT0+e1xuICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX2Jyb3dzZXInKSwgKHBvcHVwKSA9PiB7XG4gICAgICAgICAgICBuZXcgUG9wdXAocG9wdXApO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxufSkoKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuKGZ1bmN0aW9uKCkge1xuXG4gICAgLyoqXG4gICAgICogQGNsYXNzZGVzYyBDbGFzcyByZXByZXNlbnRpbmcgZm9ybSB2YWxpZGF0aW9uXG4gICAgICogQGNsYXNzXG4gICAgICovXG5cbiAgICBjbGFzcyBWYWxpZGF0aW9uIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBBZGRpbmcgZXZlbnRzIGFuZCBwcm9wZXJ0aWVzXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IoZm9ybSkge1xuICAgICAgICAgICAgdGhpcy5mb3JtID0gZm9ybTtcbiAgICAgICAgICAgIGZvcm0uc2V0QXR0cmlidXRlKFwibm92YWxpZGF0ZVwiLCBcIm5vdmFsaWRhdGVcIik7XG4gICAgICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMudmFsaWRhdGUuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICBmb3JtLnZhbGlkYXRlID0gdGhpcy52YWxpZGF0ZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgZm9ybS5jbGVhciA9IHRoaXMuY2xlYXIuYmluZCh0aGlzKTtcblxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlcyA9IHtcbiAgICAgICAgICAgICAgICBlbjoge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogXCJSZXF1aXJlZCBmaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICwgZW1haWw6IFwiV3JvbmcgZW1haWwgZm9ybWF0XCJcbiAgICAgICAgICAgICAgICAgICAgLCBlcXVhbDogXCJQYXNzd29yZCBmaWVsZHMgc2hvdWxkIGJlIGVxdWFsXCJcbiAgICAgICAgICAgICAgICAgICAgLCB1cmw6IFwiV3JvbmcgdXJsIGZvcm1hdFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICwgcnU6IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwi0J/QvtC70LUg0L7QsdGP0LfQsNGC0LXQu9GM0L3QviDQtNC70Y8g0LfQsNC/0L7Qu9C90LXQvdC40Y9cIlxuICAgICAgICAgICAgICAgICAgICAsIGVtYWlsOiBcItCf0YDQvtCy0LXRgNGM0YLQtSDRhNC+0YDQvNCw0YIgZW1haWxcIlxuICAgICAgICAgICAgICAgICAgICAsIGVxdWFsOiBcItCf0LDRgNC+0LvQuCDQtNC+0LvQttC90Ysg0YHQvtCy0L/QsNC00LDRgtGMXCJcbiAgICAgICAgICAgICAgICAgICAgLCB1cmw6IFwi0J/RgNC+0LLQtdGA0YzRgtC1INGE0L7RgNC80LDRgiBVUkxcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gUmVzZXQgZm9ybSBhbmQgY2xlYXIgZXJyb3JzXG4gICAgICAgICAqL1xuICAgICAgICBjbGVhciAoKSB7XG4gICAgICAgICAgICB0aGlzLmZvcm0ucmVzZXQoKTtcbiAgICAgICAgICAgIGxldCBzZWxlY3RvcnMgPSAkKHRoaXMuZm9ybSkuZmluZCgnc2VsZWN0Jyk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0b3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvcnMuc2VsZWN0MihcImRlc3Ryb3lcIik7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3JzLnNlbGVjdDIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgICAgIGxldCBlcnJvcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1lcnJvcicpLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS12YWxpZF0sIFtkYXRhLWludmFsaWRdJyk7XG5cbiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZXJyb3JzLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZmllbGRzLCAoZmllbGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWludmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXZhbGlkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0sMTAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gUmVtb3ZlIGVycm9yIG1lc3NhZ2UgYWZ0ZXIgZWxlbWVudFxuICAgICAgICAgKiBAcGFyYW0ge05vZGV9IGVsZW1lbnQgLSBlbGVtZW50LCBhZnRlciB3aGljaCB3ZSB3aWxsIGFkZCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIC0gZXJyb3IgbWVzc2FnZVxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwcGUgLSBlcnJvciB0eXBlXG4gICAgICAgICAqL1xuICAgICAgICBhZGRFcnJvcihlbGVtZW50LCBtZXNzYWdlLCB0eXBlKSB7XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmZvcm0tZXJyb3JbZGF0YS10eXBlPVwiJyArIHR5cGUgKyAnXCJdJykgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBlcnJvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1AnKTtcbiAgICAgICAgICAgIGVycm9yLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG1lc3NhZ2UpKTtcbiAgICAgICAgICAgIGVycm9yLmNsYXNzTGlzdC5hZGQoJ2Zvcm0tZXJyb3InKTtcbiAgICAgICAgICAgIGVycm9yLnNldEF0dHJpYnV0ZSgnZGF0YS10eXBlJywgdHlwZSk7XG4gICAgICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBSZW1vdmUgZXJyb3IgbWVzc2FnZSBvZiBzb21lIHR5cGUgYWZ0ZXIgZWxlbWVudFxuICAgICAgICAgKiBAcGFyYW0ge05vZGV9IGVsZW1lbnQgLSBlbGVtZW50LCBhZnRlciB3aGljaCBlcnJvciBtZXNzYWdlIGlzXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBwZSAtIGVycm9yIHR5cGVcbiAgICAgICAgICovXG4gICAgICAgIGNsZWFyRXJyb3IoZWxlbWVudCwgdHlwZSkge1xuXG4gICAgICAgICAgICBsZXQgZXJyID0gZWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWVycm9yW2RhdGEtdHlwZT1cIicgKyB0eXBlICsgJ1wiXScpO1xuICAgICAgICAgICAgaWYgKGVyciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFZhbGlkYXRlIGZvcm1cbiAgICAgICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgLSBzdWJtaXQgZXZlbnRcbiAgICAgICAgICogQHRvZG8gSW1wbGVtZW50IGxvZ2luIHZhbGlkYXRpb25cbiAgICAgICAgICovXG4gICAgICAgIHZhbGlkYXRlKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50ICE9IFwidW5kZWZpbmVkXCIgJiYgIWV2ZW50LmN1cnJlbnRUYXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLXJlbG9hZCcpKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHZhbGlkID0gdHJ1ZSxcbiAgICAgICAgICAgICAgICBuZXh0ID0gbnVsbCxcbiAgICAgICAgICAgICAgICBlcXVhbF9maWVsZHMgPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZXF1YWxdJyksXG4gICAgICAgICAgICAgICAgcmVxdWlyZWRfZmllbGRzID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyZXF1aXJlZF0nKSxcbiAgICAgICAgICAgICAgICB1cmxfZmllbGRzID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJ1cmxcIl0nKSxcbiAgICAgICAgICAgICAgICBlbWFpbF9maWVsZHMgPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImVtYWlsXCJdJyksXG4gICAgICAgICAgICAgICAgdXJsX3JlZ2V4ID0gbmV3IFJlZ0V4cChcIl4oaHR0cHxodHRwc3xmdHApXFw6Ly8oW2EtekEtWjAtOVxcLlxcLV0rKFxcOlthLXpBLVowLTlcXC4mYW1wOyVcXCRcXC1dKykqQCkqKCgyNVswLTVdfDJbMC00XVswLTldfFswLTFdezF9WzAtOV17Mn18WzEtOV17MX1bMC05XXsxfXxbMS05XSlcXC4oMjVbMC01XXwyWzAtNF1bMC05XXxbMC0xXXsxfVswLTldezJ9fFsxLTldezF9WzAtOV17MX18WzEtOV18MClcXC4oMjVbMC01XXwyWzAtNF1bMC05XXxbMC0xXXsxfVswLTldezJ9fFsxLTldezF9WzAtOV17MX18WzEtOV18MClcXC4oMjVbMC01XXwyWzAtNF1bMC05XXxbMC0xXXsxfVswLTldezJ9fFsxLTldezF9WzAtOV17MX18WzAtOV0pfChbYS16QS1aMC05XFwtXStcXC4pKlthLXpBLVowLTlcXC1dK1xcLihjb218ZWR1fGdvdnxpbnR8bWlsfG5ldHxvcmd8Yml6fGFycGF8aW5mb3xuYW1lfHByb3xhZXJvfGNvb3B8bXVzZXVtfFthLXpBLVpdezJ9KSkoXFw6WzAtOV0rKSooLygkfFthLXpBLVowLTlcXC5cXCxcXD9cXCdcXFxcXFwrJmFtcDslXFwkI1xcPX5fXFwtXSspKSokXCIsIFwiaVwiKSxcbiAgICAgICAgICAgICAgICBlbWFpbF9yZWdleCA9IG5ldyBSZWdFeHAoXCJeKFthLXpBLVowLTlfXFwuXFwtXSkrXFxAKChbYS16QS1aMC05XFwtXSkrXFwuKSsoW2EtekEtWjAtOV17Miw0fSkrJFwiKTtcblxuICAgICAgICAgICAgLyogY2hlY2sgZXF1YWwgZmllbGRzICovXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZXF1YWxfZmllbGRzLCAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBlcXVhbCA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1lcXVhbFwiKSk7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudmFsdWUudHJpbSgpICE9IGVxdWFsLnZhbHVlLnRyaW0oKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEVycm9yKGVsZW1lbnQsIHRoaXMubWVzc2FnZXNbZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnbGFuZycpXS5lcXVhbCwgXCJlcXVhbFwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRXJyb3IoZWxlbWVudCwgXCJlcXVhbFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLyogY2hlY2sgcmVxdWlyZWQgZmllbGRzICovXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwocmVxdWlyZWRfZmllbGRzLCAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnZhbHVlLnRyaW0oKSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEVycm9yKGVsZW1lbnQsIHRoaXMubWVzc2FnZXNbZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnbGFuZycpXS5yZXF1aXJlZCwgXCJyZXF1aXJlZFwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRXJyb3IoZWxlbWVudCwgJ3JlcXVpcmVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qIGNoZWNrIHVybCBmaWVsZHMgKi9cbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbCh1cmxfZmllbGRzLCAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICgoZWxlbWVudC52YWx1ZS50cmltKCkubGVuZ3RoID4gMCkgJiYgKHVybF9yZWdleC50ZXN0KGVsZW1lbnQudmFsdWUudHJpbSgpKSA9PT0gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRXJyb3IoZWxlbWVudCwgdGhpcy5tZXNzYWdlc1tkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdsYW5nJyldLnVybCwgJ3VybCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJFcnJvcihlbGVtZW50LCAndXJsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qIGNoZWNrIGVtYWlsIGZpZWxkcyAqL1xuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGVtYWlsX2ZpZWxkcywgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoKGVsZW1lbnQudmFsdWUudHJpbSgpLmxlbmd0aCA+IDApICYmIChlbWFpbF9yZWdleC50ZXN0KGVsZW1lbnQudmFsdWUudHJpbSgpKSA9PT0gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRXJyb3IoZWxlbWVudCwgdGhpcy5tZXNzYWdlc1tkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdsYW5nJyldLmVtYWlsLCAnZW1haWwnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRXJyb3IoZWxlbWVudCwgJ2VtYWlsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgbGV0IGFsbF9maWVsZHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlcXVhbF9maWVsZHMpLmNvbmNhdChcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChyZXF1aXJlZF9maWVsZHMpLFxuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHVybF9maWVsZHMpLFxuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGVtYWlsX2ZpZWxkcylcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChhbGxfZmllbGRzLCAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBlcnIgPSBlbGVtZW50LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmZvcm0tZXJyb3InKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGludmFsaWQgPSBkb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUoXCJkYXRhLWludmFsaWRcIik7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWQudmFsdWUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT0gXCJTRUxFQ1RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5uZXh0U2libGluZy5zZXRBdHRyaWJ1dGVOb2RlKGludmFsaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5uZXh0U2libGluZy5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtdmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlTm9kZShpbnZhbGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWxpZCA9IGRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZShcImRhdGEtdmFsaWRcIik7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkLnZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PSBcIlNFTEVDVFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lm5leHRTaWJsaW5nLnNldEF0dHJpYnV0ZU5vZGUodmFsaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5uZXh0U2libGluZy5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtaW52YWxpZCcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGVOb2RlKHZhbGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWludmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgZXJyb3JzX2NvdW50ID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX2Vycm9yJykubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGVycm9yc19jb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmFsaWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBldmVudCAhPSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdmFsaWQ7XG5cbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgbGV0IHJlYWR5ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPSBcImxvYWRpbmdcIikgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICB9KTtcblxuICAgIHJlYWR5LnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCBmb3JtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Zvcm0nKTtcbiAgICAgICAgW10uZm9yRWFjaC5jYWxsKGZvcm1zLCAoZm9ybSkgPT4ge1xuICAgICAgICAgICAgbmV3IFZhbGlkYXRpb24oZm9ybSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9