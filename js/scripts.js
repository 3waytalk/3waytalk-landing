"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();!function(){var e=function(){function e(){_classCallCheck(this,e);var t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(this.init.bind(this))}return _createClass(e,[{key:"init",value:function(){var e=this;this.fired=!1,this.tablet=1200,this.mobile=750,this.min_height=250,this.meta=document.querySelector("meta[name='viewport']"),this.onResize();var t=document.querySelector(".header"),i=document.querySelector(".clock");document.querySelector(".slide_main");window.requestAnimFrame=window.requestAnimationFrame,$(".landing").fullpage({sectionSelector:".landing__section",navigation:!0,afterLoad:this.hideLoader.bind(this),afterRender:this.recountSlides.bind(this),afterResize:this.recountSlides.bind(this),onLeave:function(s,o,l){1==o?(t.classList.toggle("header_open",!1),e.hideNav()):(t.classList.toggle("header_open",!0),e.showNav()),6==o?i.classList.toggle("clock_visible",!0):i.classList.toggle("clock_visible",!1)}}),document.querySelector(".footer__top").addEventListener("click",this.scrollToTop.bind(this)),window.addEventListener("resize",this.onResize.bind(this));var s=document.querySelector(".landing__section.active");null!=s&&(s.classList.toggle("active_moment",!0),s.classList.toggle("active",!1),setTimeout(function(){s.classList.toggle("active_moment",!1),s.classList.toggle("active",!0)},0))}},{key:"onResize",value:function(){Math.max(document.documentElement.clientWidth,window.innerWidth||0)<500?this.meta.setAttribute("content","width=400"):this.meta.setAttribute("content","width=device-width, initial-scale=1.0")}},{key:"hideNav",value:function(){var e=this;Velocity(this.nav,"finish"),Velocity(this.nav,{opacity:0},{duration:300,complete:function(){e.nav.style.display="none"}})}},{key:"showNav",value:function(){var e=this;Velocity(this.nav,"finish"),Velocity(this.nav,{opacity:1},{duration:300,begin:function(){e.nav.style.display="block"}})}},{key:"hideLoader",value:function(){if(this.onResize(),!this.fired){this.fired=!0,this.nav=document.getElementById("fp-nav"),this.hideNav(),[].forEach.call(document.querySelectorAll(".slide__resizable, .slide__centred"),function(e){e.setAttribute("data-height",e.offsetHeight),e.setAttribute("data-width",e.offsetWidth)});var e=document.querySelector(".loader__wrapper"),t={opacity:0},i={duration:500,complete:function(){e.parentNode.removeChild(e)}};Velocity(e,t,i)}}},{key:"recountSlides",value:function(){var e=this;this.onResize();var t=document.querySelectorAll(".slide__resizable"),i=document.querySelectorAll(".slide__centred"),s=document.querySelector(".slide_service"),o=document.querySelector(".slide__illustration"),l=document.querySelector(".slide_main"),n=document.querySelector(".shema"),a=document.querySelector(".header").offsetHeight,r=document.querySelector(".footer").offsetHeight,d=(n.closest(".slide__details"),l.querySelector(".slide__phones")),c=l.querySelector(".slide__phone"),h=void 0,u=void 0,f=void 0,v=void 0,m=20,y=void 0,g=1,_=1,b=1,p=void 0,L=void 0,S=void 0,q=void 0,w=void 0,z=void 0,A=void 0,k=void 0,x=void 0,M=void 0,C=void 0,H=void 0,I=void 0;y=l.querySelector(".fp-tableCell"),h=Math.min(y.offsetHeight,parseInt(y.style.height,10)),u=y.offsetWidth,p=l.querySelector(".slide__header"),l.style.backgroundSize="auto "+h+"px",v=h-m-p.offsetHeight,v>=200&&u>750?(d.style.height=v+"px",d.style.marginLeft=.1*-v+"px",d.style.visibility="visible"):200>v?d.style.visibility="hidden":d.removeAttribute("style"),750>=u&&(c.style.height=v+"px"),y=s.querySelector(".fp-tableCell"),h=Math.min(y.offsetHeight,parseInt(y.style.height,10)),u=y.offsetWidth,p=s.querySelector(".slide__header"),x=Math.min(y.offsetHeight,parseInt(y.style.height,10))-p.offsetHeight-r-a,o.style.height=x+"px",M=700,C=570,H=1.2*u,I=C*H/M,x>I?(o.classList.toggle("slide__illustration_hidden",!1),o.style.backgroundPosition="50% 100%"):370>x?o.classList.toggle("slide__illustration_hidden",!0):(o.classList.toggle("slide__illustration_hidden",!1),o.style.backgroundPosition="50% 0"),[].forEach.call(i,function(e){L=e.closest(".slide"),y=e.closest(".fp-tableCell"),h=Math.min(y.offsetHeight,parseInt(y.style.height,10)),u=y.offsetWidth,k=parseInt(e.getAttribute("data-height"),10),u>1220?(A=1230,q=170):u>750&&1220>=u?(A=1050,q=170):(A=400,k=900,q=0),v=h-a-m+q,f=u-40,_=v/k,b=f/A,g=Math.min(_,b),w=0,z=0,A>f&&1221>u&&u>750?(w=-50,z=-(A-u)/2):750>u&&(z="-50%",w="0"),750>u&&(g=v/620,e.style[Modernizr.prefixed("transform")]="translateX(-50%) scale("+g+")")}),[].forEach.call(t,function(t){L=t.closest(".slide"),p=t.closest(".slide__details").querySelector(".slide__header"),y=t.closest(".fp-tableCell"),h=Math.min(y.offsetHeight,parseInt(y.style.height,10)),u=y.offsetWidth,k=parseInt(t.getAttribute("data-height"),10),A=parseInt(t.getAttribute("data-width"),10),_=v/k,b=f/A,g=Math.min(_,b),u>e.mobile?(v=h-a-m,f=u/2-40,_=v/k,b=f/A,g=Math.min(_,b),v<e.min_height?L.classList.add("slide_hide-resizable"):1>g?(L.classList.remove("slide_hide-resizable"),t.style[Modernizr.prefixed("transform")]="scale("+g+")",L.classList.contains("slide_right")?(S=parseInt(t.getAttribute("data-width"),10)*g,p.style.borderLeftWidth=S+"px",u>e.tablet&&(t.style.marginRight=p.offsetWidth/2-S+"px")):(S=parseInt(t.getAttribute("data-width"),10)*g,p.style.borderRightWidth=S+"px",u>e.tablet&&(t.style.marginLeft=p.offsetWidth/2-S+"px"))):(L.classList.remove("slide_hide-resizable"),t.removeAttribute("style"),p.removeAttribute("style"))):(v=h-a-p.offsetHeight-60,f=u-40,_=v/k,b=f/A,g=Math.min(_,b),A>f?t.style.marginLeft=-((A-f)/2-20)+"px":t.style.marginLeft="auto",200>v?(console.log("hidding"),L.classList.add("slide_hide-resizable")):1>g?(L.classList.remove("slide_hide-resizable"),t.style[Modernizr.prefixed("transform")]="scale("+g+")"):(L.classList.remove("slide_hide-resizable"),t.removeAttribute("style"),p.removeAttribute("style")))}),this.onResize()}},{key:"scrollToTop",value:function(e){e.preventDefault(),$.fn.fullpage.moveTo(1,0)}}]),e}();new e}();
"use strict";function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function i(i,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(e,n,o){return n&&i(e.prototype,n),o&&i(e,o),e}}();!function(){window.mobileAndTabletcheck=function(){var i=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(i=!0)}(navigator.userAgent||navigator.vendor||window.opera),i},window.isMobile={Android:function(){return/Android/i.test(navigator.userAgent)},BlackBerry:function(){return/BlackBerry/i.test(navigator.userAgent)},iOS:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},Windows:function(){return/IEMobile/i.test(navigator.userAgent)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Windows()}};var i=function(){function i(){_classCallCheck(this,i);var e=new Promise(function(i,e){return"loading"!=document.readyState?i():void document.addEventListener("DOMContentLoaded",function(){return i()})});e.then(this.init.bind(this))}return _createClass(i,[{key:"init",value:function(){window.isMobile.Android()?document.body.parentNode.classList.add("android"):window.isMobile.iOS()?document.body.parentNode.classList.add("ios"):window.mobileAndTabletcheck()?document.body.parentNode.classList.add("unknown-mobile"):document.body.parentNode.classList.add("desktop")}}]),i}();new i}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}();!function(){var e=function(){function e(){_classCallCheck(this,e);var t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(this.init.bind(this))}return _createClass(e,[{key:"init",value:function(){var e=this,t=document.querySelectorAll(".login__back"),o=document.querySelectorAll(".login__login-button, .login_success .login__submit"),i=document.querySelectorAll(".menu__interpreter, .header__interpreter");this.menu_popup_open=!1,this.login_button=document.querySelector(".menu__login"),this.register_button=document.querySelector(".menu__register"),this.step1=document.querySelector(".login_register-step-1"),this.step1_form=document.querySelector(".login_register-step-1 form.login__form"),this.step2=document.querySelector(".login_register-step-2"),this.step2_form=document.querySelector(".login_register-step-2 form.login__form"),this.mobile_popup=document.querySelector(".popup_mobile"),this.mobile_popup_close=this.mobile_popup.querySelector(".popup__close"),this.wrapper=document.querySelector(".menu__wrapper"),this.header_register_button=document.querySelector(".header__link_register"),this.header_login_button=document.querySelector(".header__link_login"),this.recovery_button=document.querySelector(".login__password-recovery"),this.lightbox=document.querySelector("body>.lightbox"),this.login_popup=document.querySelector(".login_login"),this.recovery=document.querySelector(".login_recovery"),this.password=document.querySelector(".login_password"),this.recovery_form=this.recovery.querySelector(".login__form"),this.password_form=this.password.querySelector(".login__form"),this.error_message=document.querySelector(".login_error"),this.email=document.querySelector(".login_email"),this.success=document.querySelector(".login_success"),this.current=document.querySelector(".login_open"),this.last=[],this.login_button.addEventListener("click",this.openLoginForm.bind(this)),this.recovery_button.addEventListener("click",this.openRecovery.bind(this)),this.lightbox.addEventListener("click",this.closeAll.bind(this)),this.register_button.addEventListener("click",this.openRegister.bind(this)),this.header_login_button.addEventListener("click",this.openLoginOuter.bind(this)),this.header_register_button.addEventListener("click",this.openRegisterOuter.bind(this)),this.mobile_popup_close.addEventListener("click",this.closeMobilePopup.bind(this)),this.recovery_form.addEventListener("submit",this.sendData.bind(this)),this.password_form.addEventListener("submit",this.sendData.bind(this)),this.step1_form.addEventListener("submit",this.openNext.bind(this)),this.step2_form.addEventListener("submit",this.sendData.bind(this)),window.addEventListener("resize",this.reposPopup.bind(this)),$(".login select").select2(),[].forEach.call(i,function(t){t.addEventListener("click",e.openMobilePopup.bind(e))}),[].forEach.call(t,function(t){t.addEventListener("click",e.goback.bind(e))}),[].forEach.call(o,function(t){t.addEventListener("click",e.openLoginInner.bind(e))}),this.WebRTCSupport=!document.documentElement.classList.contains("no-peerconnection"),this.WebRTCSupport||([].forEach.call(document.querySelectorAll("form.login__form input, form.login__form button, form.login__form select"),function(e){e.setAttribute("disabled","disabled")}),[].forEach.call(document.documentElement.querySelectorAll("form.login__form"),function(e){e.addEventListener("click",function(t){e.closest(".login").querySelector(".popup_browser").open()})}),[].forEach.call(document.querySelectorAll(".popup_browser"),function(t){e.showPopup(t)}))}},{key:"openNext",value:function(e){e.preventDefault(),0!=this.step1_form.validate()&&this.openForm(this.step2)}},{key:"reposPopup",value:function(e){this.menu_popup_open&&(this.mobile_popup.style[Modernizr.prefixed("transform")]="translateY("+this.mobile_popup.offsetHeight+"px)")}},{key:"closeMobilePopup",value:function(){var e=this;this.menu_popup_open&&(this.menu_popup_open=!1,Velocity(this.mobile_popup,"stop"),Velocity(this.mobile_popup,{translateY:0},250),Velocity(this.mobile_popup_button,"stop"),Velocity(this.mobile_popup_button,{opacity:1},{duration:250,begin:function(){e.mobile_popup_button.style.display="block"}}))}},{key:"openMobilePopup",value:function(){var e=this;this.menu_popup_open||(this.menu_popup_open=!0,Velocity(this.mobile_popup,"stop"),Velocity(this.mobile_popup,{translateY:this.mobile_popup.offsetHeight+"px"},250),Velocity(this.mobile_popup_button,"stop"),Velocity(this.mobile_popup_button,{opacity:0},{duration:250,complete:function(){e.mobile_popup_button.style.display="none"}}))}},{key:"showPopup",value:function(e){void 0!=e.show?e.show():setTimeout(this.showPopup.bind(this,e),50)}},{key:"openLoginOuter",value:function(e){var t=this;e.preventDefault(),$.fn.fullpage.moveTo(1,0),setTimeout(function(){t.login_button.click()},800)}},{key:"openRegisterOuter",value:function(e){var t=this;e.preventDefault(),$.fn.fullpage.moveTo(1,0),setTimeout(function(){t.register_button.click()},800)}},{key:"sendData",value:function(e){var t=this;e.preventDefault();var o=e.currentTarget;if(0!=o.validate())try{!function(){var e=4,i=200,n=void 0,r=new XMLHttpRequest,s=new Promise(function(n,s){r.open("POST",o.getAttribute("action")),r.send(new FormData(o)),r.onreadystatechange=function(){r.readyState===e&&(t.recovery_form.reset(),r.status===i?n():s({code:parseInt(r.status,10),message:r.statusText}))}});n=o.hasAttribute("data-check")?t.showCheckMessage.bind(t):t.showSuccessMessage.bind(t),s.then(n)["catch"](t.showErrorMessage.bind(t))}()}catch(i){console.log("error: ",i)}}},{key:"showCheckMessage",value:function(){this.openForm(this.email)}},{key:"showSuccessMessage",value:function(){this.openForm(this.success)}},{key:"openLoginInner",value:function(){this.openForm(this.login_popup)}},{key:"showErrorMessage",value:function(e){this.last=new Array,console.log(e.code,"Responce status code: "+e.code+". "+e.message+"."),this.openForm(this.error_message,!0)}},{key:"goback",value:function(){this.openForm()}},{key:"emailHaveSend",value:function(){this.openForm(this.email)}},{key:"openRegisterInner",value:function(){this.openForm(this.step1)}},{key:"openRegister",value:function(){var e=this;event.preventDefault(),$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1);var t={right:0},o={duration:250};Velocity(this.step1,t,o),this.current=this.step1,t={opacity:1},o={begin:function(){e.lightbox.style.display="block"},duration:250},Velocity(this.lightbox,t,o)}},{key:"openRecovery",value:function(e){e.preventDefault(),this.WebRTCSupport&&this.openForm(this.recovery)}},{key:"openForm",value:function(e,t){$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1);var o=this.current.querySelector("form");if(null!=o&&setTimeout(function(){o.clear()},250),"undefined"==typeof e&&this.last.length>0)e=this.last.pop();else{if("undefined"==typeof e&&0==this.last.length)return void this.closeAll();1!=t&&this.last.push(this.current)}o=e.querySelector("form"),null!=o&&(console.log("clearing"),setTimeout(function(){o.clear()},250));var i={right:-this.current.offsetWidth+"px"},n={duration:250};Velocity(this.current,i,n),i={right:0},n={duration:250},Velocity(e,i,n),this.current=e}},{key:"closeAll",value:function(){var e=this;$.fn.fullpage.setAllowScrolling(!0),$.fn.fullpage.setKeyboardScrolling(!0);var t={right:-this.current.offsetWidth+"px"},o={duration:250};Velocity(this.current,t,o),this.current=null,t={opacity:0},o={complete:function(){e.lightbox.style.display="none"},duration:250},Velocity(this.lightbox,t,o),this.clearAll()}},{key:"clearAll",value:function(){[].forEach.call(document.querySelectorAll("form"),function(e){e.clear()}),$(".login select").select2("destroy"),$(".login select").select2()}},{key:"openLoginForm",value:function(e){var t=this;e.preventDefault(),$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1);var o={right:0},i={duration:250};Velocity(this.login_popup,o,i),this.current=this.login_popup,o={opacity:1},i={begin:function(){t.lightbox.style.display="block"},duration:250},Velocity(this.lightbox,o,i)}}]),e}();new e}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}();!function(){var t=function(){function t(e){_classCallCheck(this,t),this.popup=e,e.querySelector(".popup__close").addEventListener("click",this.close.bind(this)),this.popup.close=this.close.bind(this),this.popup.open=this.open.bind(this),this.popup.show=this.show.bind(this),this.status=!1,this.jamping=!1}return _createClass(t,[{key:"show",value:function(){this.popup.style.display="block",this.popup.style[Modernizr.prefixed("transform")]="rotateX(0)",this.status=!0}},{key:"hide",value:function(){this.popup.style.display="none",this.popup.style[Modernizr.prefixed("transform")]="rotateX(180deg)",this.status=!1,Velocity(this.popup,"stop")}},{key:"close",value:function(){var t=this;this.jamping||this.status&&(Velocity(this.popup,"finish"),Velocity(this.popup,{rotateX:"120deg"},{duration:500,begin:function(){t.popup.style.display="block"},complete:function(){t.status=!1}}))}},{key:"open",value:function(){var t=this;if(!this.jamping){if(this.status)return void this.jump();this.jamping=!0,Velocity(this.popup,"finish"),Velocity(this.popup,{rotateX:"0deg"},{duration:500,begin:function(){t.popup.style.display="block"},complete:function(){t.status=!0}}),Velocity(this.popup,{rotateX:"20deg"},150),Velocity(this.popup,{rotateX:"0deg"},125),Velocity(this.popup,{rotateX:"10deg"},200),Velocity(this.popup,{rotateX:"0deg"},{duration:175,complete:function(){t.jamping=!1}})}}},{key:"jump",value:function(){var t=this;this.jamping=!0,Velocity(this.popup,"finish"),Velocity(this.popup,{rotateX:"35deg"},150),Velocity(this.popup,{rotateX:"0deg"},125),Velocity(this.popup,{rotateX:"20deg"},200),Velocity(this.popup,{rotateX:"0deg"},175),Velocity(this.popup,{rotateX:"15deg"},250),Velocity(this.popup,{rotateX:"0deg"},{duration:225,complete:function(){t.jamping=!1}})}}]),t}(),e=new Promise(function(t,e){return"loading"!=document.readyState?t():void document.addEventListener("DOMContentLoaded",function(){return t()})});e.then(function(){[].forEach.call(document.querySelectorAll(".popup_browser"),function(e){new t(e)})})}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();!function(){var e=function(){function e(t){_classCallCheck(this,e),this.form=t,t.setAttribute("novalidate","novalidate"),t.addEventListener("submit",this.validate.bind(this)),t.validate=this.validate.bind(this),t.clear=this.clear.bind(this),this.messages={en:{required:"Required field",email:"Wrong email format",equal:"Password fields should be equal",url:"Wrong url format"},ru:{required:"Поле обязательно для заполнения",email:"Проверьте формат email",equal:"Пароли должны совпадать",url:"Проверьте формат URL"}}}return _createClass(e,[{key:"clear",value:function(){this.form.reset();var e=$(this.form).find("select");e.length>0&&(e.select2("destroy"),e.select2()),setTimeout(function(){var e=document.querySelectorAll(".form-error"),t=document.querySelectorAll("[data-valid], [data-invalid]");[].forEach.call(e,function(e){e.parentNode.removeChild(e)}),[].forEach.call(t,function(e){e.removeAttribute("data-invalid"),e.removeAttribute("data-valid")})},100)}},{key:"addError",value:function(e,t,r){if(null==e.parentNode.querySelector('.form-error[data-type="'+r+'"]')){var a=document.createElement("P");a.appendChild(document.createTextNode(t)),a.classList.add("form-error"),a.setAttribute("data-type",r),e.parentNode.appendChild(a)}}},{key:"clearError",value:function(e,t){var r=e.parentNode.querySelector('.form-error[data-type="'+t+'"]');null!=r&&e.parentNode.removeChild(r)}},{key:"validate",value:function(e){var t=this;"undefined"==typeof e||e.currentTarget.hasAttribute("data-reload")||e.preventDefault();var r=!0,a=this.form.querySelectorAll("[data-equal]"),l=this.form.querySelectorAll("[required]"),o=this.form.querySelectorAll('input[type="url"]'),i=this.form.querySelectorAll('input[type="email"]'),n=new RegExp("^(http|https|ftp)://([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&amp;%$-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9-]+.)*[a-zA-Z0-9-]+.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(/($|[a-zA-Z0-9.,?'\\+&amp;%$#=~_-]+))*$","i"),u=new RegExp("^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$");[].forEach.call(a,function(e){var a=t.form.querySelector(e.getAttribute("data-equal"));e.value.trim()!=a.value.trim()?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].equal,"equal")):t.clearError(e,"equal")}),[].forEach.call(l,function(e){""===e.value.trim()?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].required,"required")):t.clearError(e,"required")}),[].forEach.call(o,function(e){e.value.trim().length>0&&n.test(e.value.trim())===!1?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].url,"url")):t.clearError(e,"url")}),[].forEach.call(i,function(e){e.value.trim().length>0&&u.test(e.value.trim())===!1?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].email,"email")):t.clearError(e,"email")});var d=Array.prototype.slice.call(a).concat(Array.prototype.slice.call(l),Array.prototype.slice.call(o),Array.prototype.slice.call(i));[].forEach.call(d,function(e){var t=e.parentNode.querySelector(".form-error");if(null!=t){var r=document.createAttribute("data-invalid");r.value=!0,"SELECT"==e.tagName?(e.nextSibling.setAttributeNode(r),e.nextSibling.removeAttribute("data-valid")):(e.setAttributeNode(r),e.removeAttribute("data-valid"))}else{var a=document.createAttribute("data-valid");a.value=!0,"SELECT"==e.tagName?(e.nextSibling.setAttributeNode(a),e.nextSibling.removeAttribute("data-invalid")):(e.setAttributeNode(a),e.removeAttribute("data-invalid"))}});var c=this.form.querySelectorAll(".form_error").length;return c>0&&(r=!1),r===!1&&"undefined"!=typeof e&&e.preventDefault(),r}}]),e}(),t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(function(){var t=document.querySelectorAll("form");[].forEach.call(t,function(t){new e(t)})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxhbmRpbmcvbGFuZGluZy5qcyIsImxheW91dC9sYXlvdXQuanMiLCJsb2dpbi9sb2dpbi5qcyIsInBvcHVwL3BvcHVwLmpzIiwidmFsaWRhdG9yL3ZhbGlkYXRpb24uanMiXSwibmFtZXMiOlsiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJMYW5kZ2luZyIsInRoaXMiLCJyZWFkeSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZG9jdW1lbnQiLCJyZWFkeVN0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRoZW4iLCJpbml0IiwiYmluZCIsInZhbHVlIiwiX3RoaXMiLCJmaXJlZCIsInRhYmxldCIsIm1vYmlsZSIsIm1pbl9oZWlnaHQiLCJtZXRhIiwicXVlcnlTZWxlY3RvciIsIm9uUmVzaXplIiwiaGVhZGVyIiwiY2xvY2siLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbUZyYW1lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiJCIsImZ1bGxwYWdlIiwic2VjdGlvblNlbGVjdG9yIiwibmF2aWdhdGlvbiIsImFmdGVyTG9hZCIsImhpZGVMb2FkZXIiLCJhZnRlclJlbmRlciIsInJlY291bnRTbGlkZXMiLCJhZnRlclJlc2l6ZSIsIm9uTGVhdmUiLCJpbmRleCIsIm5leHRJbmRleCIsImRpcmVjdGlvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImhpZGVOYXYiLCJzaG93TmF2Iiwic2Nyb2xsVG9Ub3AiLCJhY3RpdmUiLCJzZXRUaW1lb3V0IiwiTWF0aCIsIm1heCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudFdpZHRoIiwiaW5uZXJXaWR0aCIsInNldEF0dHJpYnV0ZSIsIl90aGlzMiIsIlZlbG9jaXR5IiwibmF2Iiwib3BhY2l0eSIsImR1cmF0aW9uIiwiY29tcGxldGUiLCJzdHlsZSIsImRpc3BsYXkiLCJfdGhpczMiLCJiZWdpbiIsImdldEVsZW1lbnRCeUlkIiwiZm9yRWFjaCIsImNhbGwiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVzaXphYmxlIiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0V2lkdGgiLCJsb2FkZXIiLCJvcHRpb25zIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiX3RoaXM0IiwicmVzaXphYmxlcyIsImNlbnRyZWRzIiwic2VydmljZV9zbGlkZSIsInNlcnZpY2VfaWxsdXN0cmF0aW9uIiwibWFpbiIsInNoZW1hIiwiaGVhZGVyX2hlaWdodCIsImZvb3Rlcl9oZWlnaHQiLCJwaG9uZXMiLCJjbG9zZXN0IiwicGhvbmUiLCJ2aWV3cG9ydF9oZWlnaHQiLCJ1bmRlZmluZWQiLCJ2aWV3cG9ydF93aWR0aCIsImF2YWlsYWJhbGVfd2lkdGgiLCJhdmFpbGFiYWxlX2hlaWdodCIsImRlbHRhIiwiY2VsbCIsInNjYWxlIiwic2NhbGVfeCIsInNjYWxlX3kiLCJzbGlkZSIsImJvcmRlcl93aWR0aCIsImRlbHRhX3kiLCJ0cl95IiwidHJfeCIsImVsZW1lbnRfd2lkdGgiLCJlbGVtZW50X2hlaWdodCIsImlsbHVzdHJhdGlvbl9oZWlnaHQiLCJ3X3dpZHRoIiwid19oZWlnaHQiLCJpX3dpZHRoIiwiaV9oZWlnaHQiLCJtaW4iLCJwYXJzZUludCIsImhlaWdodCIsImJhY2tncm91bmRTaXplIiwibWFyZ2luTGVmdCIsInZpc2liaWxpdHkiLCJyZW1vdmVBdHRyaWJ1dGUiLCJiYWNrZ3JvdW5kUG9zaXRpb24iLCJjZW50cmVkIiwiZ2V0QXR0cmlidXRlIiwiTW9kZXJuaXpyIiwicHJlZml4ZWQiLCJhZGQiLCJyZW1vdmUiLCJjb250YWlucyIsImJvcmRlckxlZnRXaWR0aCIsIm1hcmdpblJpZ2h0IiwiYm9yZGVyUmlnaHRXaWR0aCIsImNvbnNvbGUiLCJsb2ciLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiZm4iLCJtb3ZlVG8iLCJtb2JpbGVBbmRUYWJsZXRjaGVjayIsImNoZWNrIiwiYSIsInRlc3QiLCJzdWJzdHIiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ2ZW5kb3IiLCJvcGVyYSIsImlzTW9iaWxlIiwiQW5kcm9pZCIsIkJsYWNrQmVycnkiLCJpT1MiLCJXaW5kb3dzIiwiYW55IiwiTGF5b3V0IiwiYm9keSIsIk1lbnUiLCJiYWNrX2J1dHRvbnMiLCJsb2dpbl9idXR0b25zIiwibW9iaWxlX3BvcHVwX2J1dHRvbnMiLCJtZW51X3BvcHVwX29wZW4iLCJsb2dpbl9idXR0b24iLCJyZWdpc3Rlcl9idXR0b24iLCJzdGVwMSIsInN0ZXAxX2Zvcm0iLCJzdGVwMiIsInN0ZXAyX2Zvcm0iLCJtb2JpbGVfcG9wdXAiLCJtb2JpbGVfcG9wdXBfY2xvc2UiLCJ3cmFwcGVyIiwiaGVhZGVyX3JlZ2lzdGVyX2J1dHRvbiIsImhlYWRlcl9sb2dpbl9idXR0b24iLCJyZWNvdmVyeV9idXR0b24iLCJsaWdodGJveCIsImxvZ2luX3BvcHVwIiwicmVjb3ZlcnkiLCJwYXNzd29yZCIsInJlY292ZXJ5X2Zvcm0iLCJwYXNzd29yZF9mb3JtIiwiZXJyb3JfbWVzc2FnZSIsImVtYWlsIiwic3VjY2VzcyIsImN1cnJlbnQiLCJsYXN0Iiwib3BlbkxvZ2luRm9ybSIsIm9wZW5SZWNvdmVyeSIsImNsb3NlQWxsIiwib3BlblJlZ2lzdGVyIiwib3BlbkxvZ2luT3V0ZXIiLCJvcGVuUmVnaXN0ZXJPdXRlciIsImNsb3NlTW9iaWxlUG9wdXAiLCJzZW5kRGF0YSIsIm9wZW5OZXh0IiwicmVwb3NQb3B1cCIsInNlbGVjdDIiLCJidXR0b24iLCJvcGVuTW9iaWxlUG9wdXAiLCJnb2JhY2siLCJvcGVuTG9naW5Jbm5lciIsIldlYlJUQ1N1cHBvcnQiLCJlbGVtZW50IiwiZm9ybSIsIm9wZW4iLCJwb3B1cCIsInNob3dQb3B1cCIsInZhbGlkYXRlIiwib3BlbkZvcm0iLCJ0cmFuc2xhdGVZIiwibW9iaWxlX3BvcHVwX2J1dHRvbiIsInNob3ciLCJjbGljayIsIl90aGlzNSIsIl90aGlzNiIsImN1cnJlbnRUYXJnZXQiLCJET05FIiwiT0siLCJtZXNzYWdlIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJsb2FkZWQiLCJzZW5kIiwiRm9ybURhdGEiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZXNldCIsInN0YXR1cyIsImNvZGUiLCJzdGF0dXNUZXh0IiwiaGFzQXR0cmlidXRlIiwic2hvd0NoZWNrTWVzc2FnZSIsInNob3dTdWNjZXNzTWVzc2FnZSIsInNob3dFcnJvck1lc3NhZ2UiLCJlcnIiLCJyZWFzb24iLCJBcnJheSIsIl90aGlzNyIsInNldEFsbG93U2Nyb2xsaW5nIiwic2V0S2V5Ym9hcmRTY3JvbGxpbmciLCJyaWdodCIsImRvbnRfc2F2ZSIsImNsZWFyIiwicG9wIiwicHVzaCIsIl90aGlzOCIsImNsZWFyQWxsIiwiX3RoaXM5IiwiUG9wdXAiLCJjbG9zZSIsImphbXBpbmciLCJyb3RhdGVYIiwianVtcCIsIlZhbGlkYXRpb24iLCJtZXNzYWdlcyIsImVuIiwicmVxdWlyZWQiLCJlcXVhbCIsInVybCIsInJ1Iiwic2VsZWN0b3JzIiwiZmluZCIsImVycm9ycyIsImZpZWxkcyIsImVycm9yIiwiZmllbGQiLCJ0eXBlIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJ2YWxpZCIsImVxdWFsX2ZpZWxkcyIsInJlcXVpcmVkX2ZpZWxkcyIsInVybF9maWVsZHMiLCJlbWFpbF9maWVsZHMiLCJ1cmxfcmVnZXgiLCJSZWdFeHAiLCJlbWFpbF9yZWdleCIsInRyaW0iLCJhZGRFcnJvciIsImNsZWFyRXJyb3IiLCJhbGxfZmllbGRzIiwic2xpY2UiLCJjb25jYXQiLCJpbnZhbGlkIiwiY3JlYXRlQXR0cmlidXRlIiwidGFnTmFtZSIsIm5l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S0FBSyxXQUNQLEdBQUkrUSxHQUFRbFIsU0FBUzJELGlCQUFpQixXQUNuQ0YsUUFBUUMsS0FBS3dOLEVBQU8sU0FBQ3ZGLEdBQ3BCLEdBQUlpRCxHQUFXakQiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuKGZ1bmN0aW9uKCkge1xuICAgIGNsYXNzIExhbmRnaW5nIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTdGFydCBpbml0aWFsaXphdGlvbiBvbiBkb21sb2FkXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBsZXQgcmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT0gXCJsb2FkaW5nXCIpIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVhZHkudGhlbih0aGlzLmluaXQuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIEFkZGluZyBldmVudHMgYW5kIHByb3BlcnRpZXNcbiAgICAgICAgICovXG4gICAgICAgIGluaXQoKSB7XG4gICAgICAgICAgICB0aGlzLmZpcmVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnRhYmxldCA9IDEyMDA7XG4gICAgICAgICAgICB0aGlzLm1vYmlsZSA9IDc1MDtcbiAgICAgICAgICAgIHRoaXMubWluX2hlaWdodCA9IDI1MDtcbiAgICAgICAgICAgIHRoaXMubWV0YSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtZXRhW25hbWU9J3ZpZXdwb3J0J11cIik7XG5cbiAgICAgICAgICAgIHRoaXMub25SZXNpemUoKTtcblxuICAgICAgICAgICAgbGV0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKVxuICAgICAgICAgICAgICAgICwgY2xvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xvY2snKVxuICAgICAgICAgICAgICAgICwgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZV9tYWluJyk7XG5cbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbUZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiAgICAgICAgICAgICQoXCIubGFuZGluZ1wiKS5mdWxscGFnZSh7XG4gICAgICAgICAgICAgICAgc2VjdGlvblNlbGVjdG9yOiBcIi5sYW5kaW5nX19zZWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBhZnRlckxvYWQ6IHRoaXMuaGlkZUxvYWRlci5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGFmdGVyUmVuZGVyOiB0aGlzLnJlY291bnRTbGlkZXMuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBhZnRlclJlc2l6ZTogdGhpcy5yZWNvdW50U2xpZGVzLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgb25MZWF2ZTogKGluZGV4LCBuZXh0SW5kZXgsIGRpcmVjdGlvbikgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0SW5kZXggPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9vcGVuJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlTmF2KCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LnRvZ2dsZSgnaGVhZGVyX29wZW4nLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd05hdigpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRJbmRleCA9PSA2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9jay5jbGFzc0xpc3QudG9nZ2xlKCdjbG9ja192aXNpYmxlJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9jay5jbGFzc0xpc3QudG9nZ2xlKCdjbG9ja192aXNpYmxlJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvb3Rlcl9fdG9wXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnNjcm9sbFRvVG9wLmJpbmQodGhpcykpO1xuXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpKTtcblxuICAgICAgICAgICAgbGV0IGFjdGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sYW5kaW5nX19zZWN0aW9uLmFjdGl2ZScpO1xuICAgICAgICAgICAgaWYgKGFjdGl2ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZV9tb21lbnQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBhY3RpdmUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZV9tb21lbnQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICAgICAgb25SZXNpemUgKCkge1xuICAgICAgICAgICAgaWYgKE1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCwgd2luZG93LmlubmVyV2lkdGggfHwgMCkgPCA1MDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1ldGEuc2V0QXR0cmlidXRlKFwiY29udGVudFwiLCBcIndpZHRoPTQwMFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXRhLnNldEF0dHJpYnV0ZShcImNvbnRlbnRcIiwgXCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaGlkZU5hdiAoKSB7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLm5hdiwgXCJmaW5pc2hcIik7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLm5hdiwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwXG4gICAgICAgICAgICAgICAgLCBjb21wbGV0ZTogKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3dOYXYgKCkge1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5uYXYsIFwiZmluaXNoXCIpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5uYXYsIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMFxuICAgICAgICAgICAgICAgICwgYmVnaW46ICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaGlkZUxvYWRlcigpIHtcbiAgICAgICAgICAgIHRoaXMub25SZXNpemUoKTtcblxuXG5cbiAgICAgICAgICAgIGlmICh0aGlzLmZpcmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maXJlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmcC1uYXYnKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZU5hdigpO1xuXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlX19yZXNpemFibGUsIC5zbGlkZV9fY2VudHJlZCcpLCAocmVzaXphYmxlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzaXphYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS1oZWlnaHQnLCByZXNpemFibGUub2Zmc2V0SGVpZ2h0KTtcbiAgICAgICAgICAgICAgICByZXNpemFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXdpZHRoJywgcmVzaXphYmxlLm9mZnNldFdpZHRoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgbG9hZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvYWRlcl9fd3JhcHBlcicpLFxuICAgICAgICAgICAgICAgIHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobG9hZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFZlbG9jaXR5KGxvYWRlciwgcHJvcHMsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cblxuICAgICAgICByZWNvdW50U2xpZGVzKCkge1xuXG4gICAgICAgICAgICB0aGlzLm9uUmVzaXplKCk7XG5cbiAgICAgICAgICAgIGxldCByZXNpemFibGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlX19yZXNpemFibGUnKVxuICAgICAgICAgICAgICAgICwgY2VudHJlZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVfX2NlbnRyZWQnKVxuICAgICAgICAgICAgICAgICwgc2VydmljZV9zbGlkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZV9zZXJ2aWNlJylcbiAgICAgICAgICAgICAgICAsIHNlcnZpY2VfaWxsdXN0cmF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlX19pbGx1c3RyYXRpb24nKVxuICAgICAgICAgICAgICAgICwgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZV9tYWluJylcbiAgICAgICAgICAgICAgICAsIHNoZW1hID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNoZW1hJylcbiAgICAgICAgICAgICAgICAsIGhlYWRlcl9oZWlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJykub2Zmc2V0SGVpZ2h0XG4gICAgICAgICAgICAgICAgLCBmb290ZXJfaGVpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvb3RlcicpLm9mZnNldEhlaWdodFxuICAgICAgICAgICAgICAgICwgc2hlbWFfZGV0YWlscyA9IHNoZW1hLmNsb3Nlc3QoJy5zbGlkZV9fZGV0YWlscycpXG4gICAgICAgICAgICAgICAgLCBwaG9uZXMgPSBtYWluLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZV9fcGhvbmVzJylcbiAgICAgICAgICAgICAgICAsIHBob25lID0gbWFpbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGVfX3Bob25lJylcbiAgICAgICAgICAgICAgICAsIHZpZXdwb3J0X2hlaWdodFxuICAgICAgICAgICAgICAgICwgdmlld3BvcnRfd2lkdGhcbiAgICAgICAgICAgICAgICAsIGF2YWlsYWJhbGVfd2lkdGhcbiAgICAgICAgICAgICAgICAsIGF2YWlsYWJhbGVfaGVpZ2h0XG4gICAgICAgICAgICAgICAgLCBkZWx0YSA9IDIwXG4gICAgICAgICAgICAgICAgLCBjZWxsXG4gICAgICAgICAgICAgICAgLCBzY2FsZSA9IDFcbiAgICAgICAgICAgICAgICAsIHNjYWxlX3ggPSAxXG4gICAgICAgICAgICAgICAgLCBzY2FsZV95ID0gMVxuICAgICAgICAgICAgICAgICwgaGVhZGVyXG4gICAgICAgICAgICAgICAgLCBzbGlkZVxuICAgICAgICAgICAgICAgICwgYm9yZGVyX3dpZHRoXG4gICAgICAgICAgICAgICAgLCBkZWx0YV95XG4gICAgICAgICAgICAgICAgLCB0cl95XG4gICAgICAgICAgICAgICAgLCB0cl94XG4gICAgICAgICAgICAgICAgLCBlbGVtZW50X3dpZHRoXG4gICAgICAgICAgICAgICAgLCBlbGVtZW50X2hlaWdodFxuICAgICAgICAgICAgICAgICwgaWxsdXN0cmF0aW9uX2hlaWdodFxuICAgICAgICAgICAgICAgICwgd193aWR0aFxuICAgICAgICAgICAgICAgICwgd19oZWlnaHRcbiAgICAgICAgICAgICAgICAsIGlfd2lkdGhcbiAgICAgICAgICAgICAgICAsIGlfaGVpZ2h0O1xuXG4gICAgICAgICAgICBjZWxsID0gbWFpbi5xdWVyeVNlbGVjdG9yKCcuZnAtdGFibGVDZWxsJyk7XG4gICAgICAgICAgICB2aWV3cG9ydF9oZWlnaHQgPSBNYXRoLm1pbihjZWxsLm9mZnNldEhlaWdodCwgcGFyc2VJbnQoY2VsbC5zdHlsZS5oZWlnaHQsIDEwKSk7XG4gICAgICAgICAgICB2aWV3cG9ydF93aWR0aCA9IGNlbGwub2Zmc2V0V2lkdGg7XG5cbiAgICAgICAgICAgIGhlYWRlciA9IG1haW4ucXVlcnlTZWxlY3RvcignLnNsaWRlX19oZWFkZXInKTtcbiAgICAgICAgICAgIG1haW4uc3R5bGUuYmFja2dyb3VuZFNpemUgPSBcImF1dG8gXCIgKyB2aWV3cG9ydF9oZWlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICBhdmFpbGFiYWxlX2hlaWdodCA9IHZpZXdwb3J0X2hlaWdodCAtIGRlbHRhIC0gaGVhZGVyLm9mZnNldEhlaWdodDtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIChhdmFpbGFiYWxlX2hlaWdodCA+PSAyMDApXG4gICAgICAgICAgICAgICAgJiYgKHZpZXdwb3J0X3dpZHRoID4gNzUwKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcGhvbmVzLnN0eWxlLmhlaWdodCA9IGF2YWlsYWJhbGVfaGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgICAgIHBob25lcy5zdHlsZS5tYXJnaW5MZWZ0ID0gLWF2YWlsYWJhbGVfaGVpZ2h0KjAuMSArIFwicHhcIjtcbiAgICAgICAgICAgICAgICBwaG9uZXMuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhdmFpbGFiYWxlX2hlaWdodCA8IDIwMCApIHtcbiAgICAgICAgICAgICAgICBwaG9uZXMuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBob25lcy5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgaWYgKHZpZXdwb3J0X3dpZHRoIDw9IDc1MCkge1xuICAgICAgICAgICAgICAgIHBob25lLnN0eWxlLmhlaWdodCA9IGF2YWlsYWJhbGVfaGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgfVxuXG5cblxuXG4gICAgICAgICAgICAvLyBpZiAodmlld3BvcnRfd2lkdGggPCA3NTApIHtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyAgICAgaWYgKCh2aWV3cG9ydF9oZWlnaHQgPCA3OTApICYmICh2aWV3cG9ydF9oZWlnaHQgPiA0ODApKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgIHNjYWxlID0gdmlld3BvcnRfaGVpZ2h0Lzc5MDtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyAgICAgICAgIGlmIChzY2FsZSA8IDEpIHtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBwaG9uZS5zdHlsZVtNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zZm9ybScpXSA9ICdzY2FsZSgnICsgc2NhbGUgKyAnKSc7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgcGhvbmUucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgaGVhZGVyLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vICAgICB9IGVsc2UgaWYgKHZpZXdwb3J0X2hlaWdodCA8IDQ4MSl7XG4gICAgICAgICAgICAvLyAgICAgICAgIGhlYWRlci5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICAvLyAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgcGhvbmUucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgLy8gICAgICAgICBoZWFkZXIucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyAgICAgaWYgKCh2aWV3cG9ydF93aWR0aCA+IDUwMCkgJiYgKHNjYWxlIDwgMSkpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgaV93aWR0aCA9ICgoc2NhbGUqNDQwKS8zKSoyO1xuICAgICAgICAgICAgLy8gICAgICAgICBwaG9uZS5zdHlsZVtNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zZm9ybS1vcmlnaW4nKV0gPSBcIjY2LjY2NiUgNjYuNjY2JVwiO1xuICAgICAgICAgICAgLy8gICAgICAgICBwaG9uZS5zdHlsZS5yaWdodCA9ICgtKGlfd2lkdGgvMikgLSAyMCkgKyBcInB4XCI7XG4gICAgICAgICAgICAvLyAgICAgICAgIGhlYWRlci5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gaV93aWR0aCAtIDIwICsgXCJweFwiXG4gICAgICAgICAgICAvLyAgICAgfSBlbHNlIGlmICgodmlld3BvcnRfd2lkdGggPCA1MDEpICYmICh2aWV3cG9ydF93aWR0aCA+IDQyMCkgJiYgKHNjYWxlIDwgMSkpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgaV93aWR0aCA9IChzY2FsZSo0NDApLzI7XG4gICAgICAgICAgICAvLyAgICAgICAgIHBob25lLnN0eWxlW01vZGVybml6ci5wcmVmaXhlZCgndHJhbnNmb3JtLW9yaWdpbicpXSA9IFwiNTAlIDY2LjY2NiVcIjtcbiAgICAgICAgICAgIC8vICAgICAgICAgcGhvbmUuc3R5bGUucmlnaHQgPSAoLWlfd2lkdGggLSAyMCkgKyBcInB4XCI7XG4gICAgICAgICAgICAvLyAgICAgICAgIGhlYWRlci5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gaV93aWR0aCAtIDIwICsgXCJweFwiXG4gICAgICAgICAgICAvLyAgICAgfSBlbHNlIGlmIChzY2FsZSA8IDEpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgaV93aWR0aCA9IChzY2FsZSo0NDApLzM7XG4gICAgICAgICAgICAvLyAgICAgICAgIHBob25lLnN0eWxlW01vZGVybml6ci5wcmVmaXhlZCgndHJhbnNmb3JtLW9yaWdpbicpXSA9IFwiMzMuMzMzJSA2Ni42NjYlXCI7XG4gICAgICAgICAgICAvLyAgICAgICAgIHBob25lLnN0eWxlLnJpZ2h0ID0gKC0oaV93aWR0aCoyKSAtIDIwKSArIFwicHhcIjtcbiAgICAgICAgICAgIC8vICAgICAgICAgaGVhZGVyLnN0eWxlLmJvcmRlclJpZ2h0V2lkdGggPSBpX3dpZHRoIC0gMjAgKyBcInB4XCJcbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gICAgIGlmICgodmlld3BvcnRfd2lkdGggPiA1MDApICYmIChzY2FsZT49MSkpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgcGhvbmUuc3R5bGUucmlnaHQgPSBcIi0xNDVweFwiO1xuICAgICAgICAgICAgLy8gICAgICAgICBoZWFkZXIuc3R5bGUuYm9yZGVyUmlnaHRXaWR0aCA9ICBcIjI3MHB4XCI7XG4gICAgICAgICAgICAvLyAgICAgfSBlbHNlIGlmICgodmlld3BvcnRfd2lkdGggPCA1MDEpICYmICh2aWV3cG9ydF93aWR0aCA+IDQyMCkgJiYgKHNjYWxlPj0xKSkge1xuICAgICAgICAgICAgLy8gICAgICAgICBwaG9uZS5zdHlsZS5yaWdodCA9IFwiLTIyMHB4XCI7XG4gICAgICAgICAgICAvLyAgICAgICAgIGhlYWRlci5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gXCIyMDBweFwiXG4gICAgICAgICAgICAvLyAgICAgfSBlbHNlIGlmIChzY2FsZT49MSkge1xuICAgICAgICAgICAgLy8gICAgICAgICBwaG9uZS5zdHlsZS5yaWdodCA9IFwiLTI5MHB4XCI7XG4gICAgICAgICAgICAvLyAgICAgICAgIGhlYWRlci5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gXCIxMjVweFwiXG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICBjZWxsID0gc2VydmljZV9zbGlkZS5xdWVyeVNlbGVjdG9yKCcuZnAtdGFibGVDZWxsJyk7XG4gICAgICAgICAgICB2aWV3cG9ydF9oZWlnaHQgPSBNYXRoLm1pbihjZWxsLm9mZnNldEhlaWdodCwgcGFyc2VJbnQoY2VsbC5zdHlsZS5oZWlnaHQsIDEwKSk7XG4gICAgICAgICAgICB2aWV3cG9ydF93aWR0aCA9IGNlbGwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICBoZWFkZXIgPSBzZXJ2aWNlX3NsaWRlLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZV9faGVhZGVyJyk7XG4gICAgICAgICAgICBpbGx1c3RyYXRpb25faGVpZ2h0ID0gKE1hdGgubWluKGNlbGwub2Zmc2V0SGVpZ2h0LCBwYXJzZUludChjZWxsLnN0eWxlLmhlaWdodCwgMTApKSAtIGhlYWRlci5vZmZzZXRIZWlnaHQgLSBmb290ZXJfaGVpZ2h0IC0gaGVhZGVyX2hlaWdodCk7XG4gICAgICAgICAgICBzZXJ2aWNlX2lsbHVzdHJhdGlvbi5zdHlsZS5oZWlnaHQgPSBpbGx1c3RyYXRpb25faGVpZ2h0ICsgXCJweFwiO1xuXG4gICAgICAgICAgICB3X3dpZHRoID0gNzAwO1xuICAgICAgICAgICAgd19oZWlnaHQgPSA1NzA7XG4gICAgICAgICAgICBpX3dpZHRoID0gdmlld3BvcnRfd2lkdGgqMS4yO1xuICAgICAgICAgICAgaV9oZWlnaHQgPSB3X2hlaWdodCppX3dpZHRoL3dfd2lkdGg7XG5cbiAgICAgICAgICAgIGlmIChpX2hlaWdodCA8IGlsbHVzdHJhdGlvbl9oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBzZXJ2aWNlX2lsbHVzdHJhdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdzbGlkZV9faWxsdXN0cmF0aW9uX2hpZGRlbicsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXJ2aWNlX2lsbHVzdHJhdGlvbi5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBcIjUwJSAxMDAlXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlsbHVzdHJhdGlvbl9oZWlnaHQgPCAzNzApIHtcbiAgICAgICAgICAgICAgICBzZXJ2aWNlX2lsbHVzdHJhdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdzbGlkZV9faWxsdXN0cmF0aW9uX2hpZGRlbicsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXJ2aWNlX2lsbHVzdHJhdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdzbGlkZV9faWxsdXN0cmF0aW9uX2hpZGRlbicsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXJ2aWNlX2lsbHVzdHJhdGlvbi5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBcIjUwJSAwXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChjZW50cmVkcywgKGNlbnRyZWQpID0+IHtcbiAgICAgICAgICAgICAgICBzbGlkZSA9IGNlbnRyZWQuY2xvc2VzdCgnLnNsaWRlJyk7XG4gICAgICAgICAgICAgICAgY2VsbCA9IGNlbnRyZWQuY2xvc2VzdCgnLmZwLXRhYmxlQ2VsbCcpO1xuXG4gICAgICAgICAgICAgICAgdmlld3BvcnRfaGVpZ2h0ID0gTWF0aC5taW4oY2VsbC5vZmZzZXRIZWlnaHQsIHBhcnNlSW50KGNlbGwuc3R5bGUuaGVpZ2h0LCAxMCkpO1xuICAgICAgICAgICAgICAgIHZpZXdwb3J0X3dpZHRoID0gY2VsbC5vZmZzZXRXaWR0aDtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnRfaGVpZ2h0ID0gcGFyc2VJbnQoY2VudHJlZC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaGVpZ2h0JyksMTApO1xuXG4gICAgICAgICAgICAgICAgaWYgKHZpZXdwb3J0X3dpZHRoID4gMTIyMCl7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRfd2lkdGggPSAxMjMwO1xuICAgICAgICAgICAgICAgICAgICBkZWx0YV95ID0gMTcwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKHZpZXdwb3J0X3dpZHRoID4gNzUwKSAmJiAodmlld3BvcnRfd2lkdGggPD0gMTIyMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudF93aWR0aCA9IDEwNTA7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhX3kgPSAxNzA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudF93aWR0aCA9IDQwMDtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudF9oZWlnaHQgPSA5MDA7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhX3kgPSAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGF2YWlsYWJhbGVfaGVpZ2h0ID0gdmlld3BvcnRfaGVpZ2h0IC0gaGVhZGVyX2hlaWdodCAtIGRlbHRhICsgZGVsdGFfeTtcbiAgICAgICAgICAgICAgICBhdmFpbGFiYWxlX3dpZHRoID0gdmlld3BvcnRfd2lkdGggLSA0MDtcblxuICAgICAgICAgICAgICAgIHNjYWxlX3ggPSBhdmFpbGFiYWxlX2hlaWdodC9lbGVtZW50X2hlaWdodDtcbiAgICAgICAgICAgICAgICBzY2FsZV95ID0gYXZhaWxhYmFsZV93aWR0aC9lbGVtZW50X3dpZHRoO1xuICAgICAgICAgICAgICAgIHNjYWxlID0gTWF0aC5taW4oc2NhbGVfeCwgc2NhbGVfeSk7XG5cbiAgICAgICAgICAgICAgICB0cl95ID0gMDtcbiAgICAgICAgICAgICAgICB0cl94ID0gMDtcblxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgKGF2YWlsYWJhbGVfd2lkdGggPCBlbGVtZW50X3dpZHRoIClcbiAgICAgICAgICAgICAgICAgICAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgKHZpZXdwb3J0X3dpZHRoIDwgMTIyMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICYmICh2aWV3cG9ydF93aWR0aCA+IDc1MClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICB0cl95ID0gLTUwO1xuICAgICAgICAgICAgICAgICAgICB0cl94ID0gLShlbGVtZW50X3dpZHRoIC0gdmlld3BvcnRfd2lkdGgpLzI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2aWV3cG9ydF93aWR0aCA8IDc1MCkge1xuICAgICAgICAgICAgICAgICAgICB0cl94ID0gJy01MCUnO1xuICAgICAgICAgICAgICAgICAgICB0cl95ID0gJzAnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh2aWV3cG9ydF93aWR0aCA8IDc1MCkge1xuICAgICAgICAgICAgICAgICAgICBzY2FsZSA9IGF2YWlsYWJhbGVfaGVpZ2h0LzYyMDtcbiAgICAgICAgICAgICAgICAgICAgY2VudHJlZC5zdHlsZVtNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zZm9ybScpXSA9ICd0cmFuc2xhdGVYKC01MCUpIHNjYWxlKCcgKyBzY2FsZSArICcpJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBpZiggdmlld3BvcnRfaGVpZ2h0IDwgMzAwICkge1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gICAgIHNsaWRlLmNsYXNzTGlzdC5hZGQoJ3NsaWRlX2hpZGUtY2VudHJlZCcpO1xuICAgICAgICAgICAgICAgIC8vICAgICBjZW50cmVkLnN0eWxlW01vZGVybml6ci5wcmVmaXhlZCgndHJhbnNmb3JtJyldID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIC8vICAgICBbXS5mb3JFYWNoLmNhbGwoY2VudHJlZC5xdWVyeVNlbGVjdG9yQWxsKCcuc3RlcHNfX3N0ZXAnKSwgKHN0ZXApID0+IHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHN0ZXAucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgIC8vICAgICB9KTtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vIH0gZWxzZSBpZiAoIHNjYWxlIDwgMSB8fCB2aWV3cG9ydF93aWR0aCA8IDc1MCApIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgc2xpZGUuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVfaGlkZS1jZW50cmVkJyk7XG4gICAgICAgICAgICAgICAgLy8gICAgIGNlbnRyZWQuc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0nKV0gPSAndHJhbnNsYXRlWSgnICsgdHJfeSArICcpIHRyYW5zbGF0ZVgoJyArIHRyX3ggKyAnKSBzY2FsZSgnICsgc2NhbGUgKyAnKSc7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyAgICAgaWYgKHZpZXdwb3J0X3dpZHRoID4gNzUwKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBbXS5mb3JFYWNoLmNhbGwoY2VudHJlZC5xdWVyeVNlbGVjdG9yQWxsKCcuc3RlcHNfX3N0ZXAnKSwgKHN0ZXApID0+IHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBzdGVwLnN0eWxlW01vZGVybml6ci5wcmVmaXhlZCgndHJhbnNmb3JtJyldID0gJ3NjYWxlKCcgKyAoMSArICgxLXNjYWxlKSkgKyAnKSc7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIFtdLmZvckVhY2guY2FsbChjZW50cmVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGVwc19fc3RlcCcpLCAoc3RlcCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHN0ZXAucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgc2xpZGUuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVfaGlkZS1jZW50cmVkJyk7XG4gICAgICAgICAgICAgICAgLy8gICAgIGNlbnRyZWQuc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0nKV0gPSAndHJhbnNsYXRlWSgnICsgdHJfeSArICdweCkgdHJhbnNsYXRlWCgnK3RyX3grJ3B4KSc7XG4gICAgICAgICAgICAgICAgLy8gICAgIFtdLmZvckVhY2guY2FsbChjZW50cmVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGVwc19fc3RlcCcpLCAoc3RlcCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgc3RlcC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgLy8gICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwocmVzaXphYmxlcywgKHJlc2l6YWJsZSkgPT4ge1xuXG4gICAgICAgICAgICAgICAgc2xpZGUgPSByZXNpemFibGUuY2xvc2VzdCgnLnNsaWRlJyk7XG4gICAgICAgICAgICAgICAgaGVhZGVyID0gcmVzaXphYmxlLmNsb3Nlc3QoJy5zbGlkZV9fZGV0YWlscycpLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZV9faGVhZGVyJyk7XG4gICAgICAgICAgICAgICAgY2VsbCA9IHJlc2l6YWJsZS5jbG9zZXN0KCcuZnAtdGFibGVDZWxsJyk7XG5cbiAgICAgICAgICAgICAgICB2aWV3cG9ydF9oZWlnaHQgPSBNYXRoLm1pbihjZWxsLm9mZnNldEhlaWdodCwgcGFyc2VJbnQoY2VsbC5zdHlsZS5oZWlnaHQsIDEwKSk7XG4gICAgICAgICAgICAgICAgdmlld3BvcnRfd2lkdGggPSBjZWxsLm9mZnNldFdpZHRoO1xuXG4gICAgICAgICAgICAgICAgZWxlbWVudF9oZWlnaHQgPSBwYXJzZUludChyZXNpemFibGUuZ2V0QXR0cmlidXRlKCdkYXRhLWhlaWdodCcpLDEwKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50X3dpZHRoID0gcGFyc2VJbnQocmVzaXphYmxlLmdldEF0dHJpYnV0ZSgnZGF0YS13aWR0aCcpLDEwKTtcblxuICAgICAgICAgICAgICAgIHNjYWxlX3ggPSBhdmFpbGFiYWxlX2hlaWdodC9lbGVtZW50X2hlaWdodDtcbiAgICAgICAgICAgICAgICBzY2FsZV95ID0gYXZhaWxhYmFsZV93aWR0aC9lbGVtZW50X3dpZHRoO1xuICAgICAgICAgICAgICAgIHNjYWxlID0gTWF0aC5taW4oc2NhbGVfeCwgc2NhbGVfeSk7XG5cblxuICAgICAgICAgICAgICAgIGlmICh2aWV3cG9ydF93aWR0aCA+IHRoaXMubW9iaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRhYmxldCBhbmQgZGVza3RvcCByZXNvbHV0aW9uXG5cbiAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmFsZV9oZWlnaHQgPSB2aWV3cG9ydF9oZWlnaHQgLSBoZWFkZXJfaGVpZ2h0IC0gZGVsdGE7XG4gICAgICAgICAgICAgICAgICAgIGF2YWlsYWJhbGVfd2lkdGggPSB2aWV3cG9ydF93aWR0aC8yIC0gNDA7XG5cbiAgICAgICAgICAgICAgICAgICAgc2NhbGVfeCA9IGF2YWlsYWJhbGVfaGVpZ2h0L2VsZW1lbnRfaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBzY2FsZV95ID0gYXZhaWxhYmFsZV93aWR0aC9lbGVtZW50X3dpZHRoO1xuICAgICAgICAgICAgICAgICAgICBzY2FsZSA9IE1hdGgubWluKHNjYWxlX3gsIHNjYWxlX3kpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBhdmFpbGFiYWxlX2hlaWdodCA8IHRoaXMubWluX2hlaWdodCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LmFkZCgnc2xpZGVfaGlkZS1yZXNpemFibGUnKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBzY2FsZSA8IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlX2hpZGUtcmVzaXphYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGUuc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0nKV0gPSAnc2NhbGUoJyArIHNjYWxlICsgJyknO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2xpZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZV9yaWdodCcpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJfd2lkdGggPSAocGFyc2VJbnQocmVzaXphYmxlLmdldEF0dHJpYnV0ZSgnZGF0YS13aWR0aCcpLDEwKSkqc2NhbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnN0eWxlLmJvcmRlckxlZnRXaWR0aCA9IGJvcmRlcl93aWR0aCArICdweCc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmlld3BvcnRfd2lkdGggPiB0aGlzLnRhYmxldCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFibGV0IHJlc29sdXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlLnN0eWxlLm1hcmdpblJpZ2h0ID0gKGhlYWRlci5vZmZzZXRXaWR0aC8yIC0gYm9yZGVyX3dpZHRoKSArICdweCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcl93aWR0aCA9IChwYXJzZUludChyZXNpemFibGUuZ2V0QXR0cmlidXRlKCdkYXRhLXdpZHRoJyksMTApKSpzY2FsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIuc3R5bGUuYm9yZGVyUmlnaHRXaWR0aCA9IGJvcmRlcl93aWR0aCArICdweCc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmlld3BvcnRfd2lkdGggPiB0aGlzLnRhYmxldCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFibGV0IHJlc29sdXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlLnN0eWxlLm1hcmdpbkxlZnQgPSAoaGVhZGVyLm9mZnNldFdpZHRoLzIgLSBib3JkZXJfd2lkdGgpICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlX2hpZGUtcmVzaXphYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGUucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbW9iaWxlIHJlc29sdXRpb25cbiAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmFsZV9oZWlnaHQgPSB2aWV3cG9ydF9oZWlnaHQgLSBoZWFkZXJfaGVpZ2h0IC0gaGVhZGVyLm9mZnNldEhlaWdodCAtIDYwO1xuICAgICAgICAgICAgICAgICAgICBhdmFpbGFiYWxlX3dpZHRoID0gdmlld3BvcnRfd2lkdGggLSA0MDtcblxuICAgICAgICAgICAgICAgICAgICBzY2FsZV94ID0gYXZhaWxhYmFsZV9oZWlnaHQvZWxlbWVudF9oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlX3kgPSBhdmFpbGFiYWxlX3dpZHRoL2VsZW1lbnRfd2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlID0gTWF0aC5taW4oc2NhbGVfeCwgc2NhbGVfeSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGF2YWlsYWJhbGVfd2lkdGggPCBlbGVtZW50X3dpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGUuc3R5bGUubWFyZ2luTGVmdCA9IC0gKCgoZWxlbWVudF93aWR0aCAtIGF2YWlsYWJhbGVfd2lkdGgpLzIpIC0gMjApICsgXCJweFwiXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGUuc3R5bGUubWFyZ2luTGVmdCA9ICdhdXRvJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBhdmFpbGFiYWxlX2hlaWdodCA8IDIwMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoaWRkaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5jbGFzc0xpc3QuYWRkKCdzbGlkZV9oaWRlLXJlc2l6YWJsZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHNjYWxlIDwgMSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVfaGlkZS1yZXNpemFibGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZS5zdHlsZVtNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zZm9ybScpXSA9ICdzY2FsZSgnICsgc2NhbGUgKyAnKSc7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlX2hpZGUtcmVzaXphYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGUucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMub25SZXNpemUoKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgc2Nyb2xsVG9Ub3AoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLm1vdmVUbygxLCAwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZXcgTGFuZGdpbmc7XG59KSgpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4oZnVuY3Rpb24oKSB7XG4gICAgd2luZG93Lm1vYmlsZUFuZFRhYmxldGNoZWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjaGVjayA9IGZhbHNlO1xuICAgICAgICAoZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgaWYgKC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyBjZXx4ZGF8eGlpbm98YW5kcm9pZHxpcGFkfHBsYXlib29rfHNpbGsvaS50ZXN0KGEpIHx8IC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pLnRlc3QoYS5zdWJzdHIoMCwgNCkpKSBjaGVjayA9IHRydWVcbiAgICAgICAgfSkobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYSk7XG4gICAgICAgIHJldHVybiBjaGVjaztcbiAgICB9O1xuXG4gICAgd2luZG93LmlzTW9iaWxlID0ge1xuICAgICAgICBBbmRyb2lkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAvQW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICAgIH0sXG4gICAgICAgIEJsYWNrQmVycnk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIC9CbGFja0JlcnJ5L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgfSxcbiAgICAgICAgaU9TOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAvaVBob25lfGlQYWR8aVBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICAgIH0sXG4gICAgICAgIFdpbmRvd3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIC9JRU1vYmlsZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFueTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gKGlzTW9iaWxlLkFuZHJvaWQoKSB8fCBpc01vYmlsZS5CbGFja0JlcnJ5KCkgfHwgaXNNb2JpbGUuaU9TKCkgfHwgaXNNb2JpbGUuV2luZG93cygpKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjbGFzcyBMYXlvdXQge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFN0YXJ0IGluaXRpYWxpemF0aW9uIG9uIGRvbWxvYWRcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIGxldCByZWFkeSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPSBcImxvYWRpbmdcIikgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiByZXNvbHZlKCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZWFkeS50aGVuKHRoaXMuaW5pdC5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gQWRkaW5nIGV2ZW50cyBhbmQgcHJvcGVydGllc1xuICAgICAgICAgKi9cbiAgICAgICAgaW5pdCgpIHtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuaXNNb2JpbGUuQW5kcm9pZCgpKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2FuZHJvaWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAod2luZG93LmlzTW9iaWxlLmlPUygpKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2lvcycpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cubW9iaWxlQW5kVGFibGV0Y2hlY2soKSkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCd1bmtub3duLW1vYmlsZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnZGVza3RvcCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2FuZHJvaWQnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZXcgTGF5b3V0O1xufSkoKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuKGZ1bmN0aW9uICgpIHtcbiAgICBjbGFzcyBNZW51IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTdGFydCBpbml0aWFsaXphdGlvbiBvbiBkb21sb2FkXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IgKCkge1xuICAgICAgICAgICAgbGV0IHJlYWR5ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PntcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPSBcImxvYWRpbmdcIikgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKT0+IHJlc29sdmUoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlYWR5LnRoZW4odGhpcy5pbml0LmJpbmQodGhpcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBBZGRpbmcgZXZlbnRzIGFuZCBwcm9wZXJ0aWVzXG4gICAgICAgICAqL1xuICAgICAgICBpbml0ICgpIHtcbiAgICAgICAgICAgIGxldCBiYWNrX2J1dHRvbnMgPSAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxvZ2luX19iYWNrJylcbiAgICAgICAgICAgICAgICAsIGxvZ2luX2J1dHRvbnMgPSAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxvZ2luX19sb2dpbi1idXR0b24sIC5sb2dpbl9zdWNjZXNzIC5sb2dpbl9fc3VibWl0JylcbiAgICAgICAgICAgICAgICAsIG1vYmlsZV9wb3B1cF9idXR0b25zID0gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnVfX2ludGVycHJldGVyLCAuaGVhZGVyX19pbnRlcnByZXRlcicpO1xuXG4gICAgICAgICAgICB0aGlzLm1lbnVfcG9wdXBfb3BlbiA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLmxvZ2luX2J1dHRvbiA9ICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51X19sb2dpbicpO1xuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcl9idXR0b24gPSAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudV9fcmVnaXN0ZXInKTtcblxuICAgICAgICAgICAgdGhpcy5zdGVwMSA9ICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW5fcmVnaXN0ZXItc3RlcC0xJyk7XG4gICAgICAgICAgICB0aGlzLnN0ZXAxX2Zvcm0gPSAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9yZWdpc3Rlci1zdGVwLTEgZm9ybS5sb2dpbl9fZm9ybScpO1xuICAgICAgICAgICAgdGhpcy5zdGVwMiA9ICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW5fcmVnaXN0ZXItc3RlcC0yJyk7XG4gICAgICAgICAgICB0aGlzLnN0ZXAyX2Zvcm0gPSAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9yZWdpc3Rlci1zdGVwLTIgZm9ybS5sb2dpbl9fZm9ybScpO1xuXG4gICAgICAgICAgICB0aGlzLm1vYmlsZV9wb3B1cCA9ICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9tb2JpbGUnKTtcbiAgICAgICAgICAgIHRoaXMubW9iaWxlX3BvcHVwX2Nsb3NlID0gICAgICAgdGhpcy5tb2JpbGVfcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZScpO1xuXG4gICAgICAgICAgICB0aGlzLndyYXBwZXIgPSAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51X193cmFwcGVyJyk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcl9yZWdpc3Rlcl9idXR0b24gPSAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2xpbmtfcmVnaXN0ZXInKTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyX2xvZ2luX2J1dHRvbiA9ICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fbGlua19sb2dpbicpO1xuICAgICAgICAgICAgdGhpcy5yZWNvdmVyeV9idXR0b24gPSAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW5fX3Bhc3N3b3JkLXJlY292ZXJ5Jyk7XG4gICAgICAgICAgICB0aGlzLmxpZ2h0Ym94ID0gICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHk+LmxpZ2h0Ym94Jyk7XG4gICAgICAgICAgICB0aGlzLmxvZ2luX3BvcHVwID0gICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9sb2dpbicpO1xuICAgICAgICAgICAgdGhpcy5yZWNvdmVyeSA9ICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW5fcmVjb3ZlcnknKTtcbiAgICAgICAgICAgIHRoaXMucGFzc3dvcmQgPSAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX3Bhc3N3b3JkJyk7XG4gICAgICAgICAgICB0aGlzLnJlY292ZXJ5X2Zvcm0gPSAgICAgICAgICAgIHRoaXMucmVjb3ZlcnkucXVlcnlTZWxlY3RvcignLmxvZ2luX19mb3JtJyk7XG4gICAgICAgICAgICB0aGlzLnBhc3N3b3JkX2Zvcm0gPSAgICAgICAgICAgIHRoaXMucGFzc3dvcmQucXVlcnlTZWxlY3RvcignLmxvZ2luX19mb3JtJyk7XG4gICAgICAgICAgICB0aGlzLmVycm9yX21lc3NhZ2UgPSAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9lcnJvcicpO1xuICAgICAgICAgICAgdGhpcy5lbWFpbCA9ICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW5fZW1haWwnKTtcbiAgICAgICAgICAgIHRoaXMuc3VjY2VzcyA9ICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX3N1Y2Nlc3MnKTtcblxuICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX29wZW4nKTtcbiAgICAgICAgICAgIHRoaXMubGFzdCA9IFtdO1xuXG4gICAgICAgICAgICB0aGlzLmxvZ2luX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3BlbkxvZ2luRm9ybS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMucmVjb3ZlcnlfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vcGVuUmVjb3ZlcnkuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLmxpZ2h0Ym94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZUFsbC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vcGVuUmVnaXN0ZXIuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcl9sb2dpbl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5Mb2dpbk91dGVyLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJfcmVnaXN0ZXJfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vcGVuUmVnaXN0ZXJPdXRlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMubW9iaWxlX3BvcHVwX2Nsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZU1vYmlsZVBvcHVwLmJpbmQodGhpcykpO1xuXG4gICAgICAgICAgICB0aGlzLnJlY292ZXJ5X2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zZW5kRGF0YS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMucGFzc3dvcmRfZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnNlbmREYXRhLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5zdGVwMV9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMub3Blbk5leHQuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnN0ZXAyX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zZW5kRGF0YS5iaW5kKHRoaXMpKTtcblxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVwb3NQb3B1cC5iaW5kKHRoaXMpKTtcblxuICAgICAgICAgICAgJCgnLmxvZ2luIHNlbGVjdCcpLnNlbGVjdDIoKTtcblxuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKG1vYmlsZV9wb3B1cF9idXR0b25zLCAoYnV0dG9uKSA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vcGVuTW9iaWxlUG9wdXAuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGJhY2tfYnV0dG9ucywgKGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZ29iYWNrLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChsb2dpbl9idXR0b25zLCAoYnV0dG9uKSA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vcGVuTG9naW5Jbm5lci5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLldlYlJUQ1N1cHBvcnQgPSAhZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnbm8tcGVlcmNvbm5lY3Rpb24nKTtcblxuXG4gICAgICAgICAgICBpZighdGhpcy5XZWJSVENTdXBwb3J0KSB7XG5cbiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZm9ybS5sb2dpbl9fZm9ybSBpbnB1dCwgZm9ybS5sb2dpbl9fZm9ybSBidXR0b24sIGZvcm0ubG9naW5fX2Zvcm0gc2VsZWN0JyksIChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdmb3JtLmxvZ2luX19mb3JtJyksIChmb3JtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uY2xvc2VzdCgnLmxvZ2luJykucXVlcnlTZWxlY3RvcignLnBvcHVwX2Jyb3dzZXInKS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9icm93c2VyJyksIChwb3B1cCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dQb3B1cChwb3B1cCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBvcGVuTmV4dCAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGVwMV9mb3JtLnZhbGlkYXRlKCkgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9wZW5Gb3JtKHRoaXMuc3RlcDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVwb3NQb3B1cCAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmKCF0aGlzLm1lbnVfcG9wdXBfb3Blbil7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tb2JpbGVfcG9wdXAuc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0nKV0gPSBcInRyYW5zbGF0ZVkoXCIgKyB0aGlzLm1vYmlsZV9wb3B1cC5vZmZzZXRIZWlnaHQgKyBcInB4KVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xvc2VNb2JpbGVQb3B1cCAoKSB7XG4gICAgICAgICAgICBpZighdGhpcy5tZW51X3BvcHVwX29wZW4pe1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWVudV9wb3B1cF9vcGVuID0gZmFsc2U7XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubW9iaWxlX3BvcHVwLCBcInN0b3BcIik7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLm1vYmlsZV9wb3B1cCwge3RyYW5zbGF0ZVk6IDB9LCAyNTApO1xuXG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLm1vYmlsZV9wb3B1cF9idXR0b24sIFwic3RvcFwiKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubW9iaWxlX3BvcHVwX2J1dHRvbiwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgLCBiZWdpbjogKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9iaWxlX3BvcHVwX2J1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgb3Blbk1vYmlsZVBvcHVwICgpIHtcbiAgICAgICAgICAgIGlmKHRoaXMubWVudV9wb3B1cF9vcGVuKXtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1lbnVfcG9wdXBfb3BlbiA9IHRydWU7XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubW9iaWxlX3BvcHVwLCBcInN0b3BcIik7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLm1vYmlsZV9wb3B1cCwge3RyYW5zbGF0ZVk6IHRoaXMubW9iaWxlX3BvcHVwLm9mZnNldEhlaWdodCArIFwicHhcIn0sIDI1MCk7XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubW9iaWxlX3BvcHVwX2J1dHRvbiwgXCJzdG9wXCIpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5tb2JpbGVfcG9wdXBfYnV0dG9uLCB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTBcbiAgICAgICAgICAgICAgICAsIGNvbXBsZXRlOiAoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2JpbGVfcG9wdXBfYnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3dQb3B1cCAocG9wdXApIHtcbiAgICAgICAgICAgIGlmIChwb3B1cC5zaG93ICE9IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgcG9wdXAuc2hvdygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMuc2hvd1BvcHVwLmJpbmQodGhpcywgcG9wdXApLCA1MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFNjcm9sbCB0byBmaXJzdCBzbGlkZSBhbmQgb3BlbiBsb2dpbiBmb3JtXG4gICAgICAgICAqL1xuICAgICAgICBvcGVuTG9naW5PdXRlciAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLm1vdmVUbygxLCAwKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2luX2J1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgfSwgODAwKVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTY3JvbGwgdG8gZmlyc3Qgc2xpZGUgYW5kIG9wZW4gcmVnaXN0ZXIgZm9ybVxuICAgICAgICAgKi9cbiAgICAgICAgb3BlblJlZ2lzdGVyT3V0ZXIgKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5tb3ZlVG8oMSwgMCk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcl9idXR0b24uY2xpY2soKTtcbiAgICAgICAgICAgIH0sIDgwMClcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gU2VuZCByZWdpc3RyYXRpb24gZGF0YSBhbmQgc2hvdyBtZXNzYWdlXG4gICAgICAgICAqL1xuICAgICAgICBzZW5kRGF0YSAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBsZXQgZm9ybSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG5cbiAgICAgICAgICAgIGlmIChmb3JtLnZhbGlkYXRlKCkgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGV0IERPTkUgPSA0XG4gICAgICAgICAgICAgICAgLCBPSyA9IDIwMFxuICAgICAgICAgICAgICAgICwgbWVzc2FnZVxuICAgICAgICAgICAgICAgICwgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcbiAgICAgICAgICAgICAgICAsIGxvYWRlZCA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgeGhyLm9wZW4oJ1BPU1QnLCBmb3JtLmdldEF0dHJpYnV0ZSgnYWN0aW9uJykpO1xuICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZChuZXcgRm9ybURhdGEoZm9ybSkpO1xuICAgICAgICAgICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSBET05FKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNvdmVyeV9mb3JtLnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IE9LKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogcGFyc2VJbnQoeGhyLnN0YXR1cywgMTApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogeGhyLnN0YXR1c1RleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZvcm0uaGFzQXR0cmlidXRlKCdkYXRhLWNoZWNrJykpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IHRoaXMuc2hvd0NoZWNrTWVzc2FnZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSB0aGlzLnNob3dTdWNjZXNzTWVzc2FnZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxvYWRlZC50aGVuKG1lc3NhZ2UpLmNhdGNoKHRoaXMuc2hvd0Vycm9yTWVzc2FnZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICAvLyBsb2FkZWQudGhlbihtZXNzYWdlKS5jYXRjaChtZXNzYWdlKTtcblxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yOiAnLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTaG93IGNoZWNrIGVtYWlsIG1lc3NhZ2VcbiAgICAgICAgICovXG4gICAgICAgIHNob3dDaGVja01lc3NhZ2UgKCkge1xuICAgICAgICAgICAgdGhpcy5vcGVuRm9ybSh0aGlzLmVtYWlsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gU2hvdyBzdWNjZXNzIG1lc3NhZ2VcbiAgICAgICAgICovXG4gICAgICAgIHNob3dTdWNjZXNzTWVzc2FnZSAoKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5Gb3JtKHRoaXMuc3VjY2Vzcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIE9wZW4gbG9naW5cbiAgICAgICAgICovXG4gICAgICAgIG9wZW5Mb2dpbklubmVyICgpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5sb2dpbl9wb3B1cCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFNob3cgbWVzc2FnZVxuICAgICAgICAgKi9cbiAgICAgICAgc2hvd0Vycm9yTWVzc2FnZSAocmVhc29uKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3QgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbi5jb2RlLCAnUmVzcG9uY2Ugc3RhdHVzIGNvZGU6ICcgKyByZWFzb24uY29kZSArICcuICcgKyByZWFzb24ubWVzc2FnZSArICcuJyk7XG4gICAgICAgICAgICB0aGlzLm9wZW5Gb3JtKHRoaXMuZXJyb3JfbWVzc2FnZSwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIE9wZW4gbGFzdCBwYWdlXG4gICAgICAgICAqL1xuICAgICAgICBnb2JhY2sgKCkge1xuICAgICAgICAgICAgdGhpcy5vcGVuRm9ybSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTaG93IGVtYWlsIHNlbnQgd2FybmluZ1xuICAgICAgICAgKi9cbiAgICAgICAgZW1haWxIYXZlU2VuZCAoKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5Gb3JtKHRoaXMuZW1haWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBPcGVuIHJlZ2lzdGVyIGZvcm1cbiAgICAgICAgICovXG4gICAgICAgIG9wZW5SZWdpc3RlcklubmVyICgpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5zdGVwMSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIE9wZW4gcmVnaXN0ZXIgZm9ybVxuICAgICAgICAgKi9cbiAgICAgICAgb3BlblJlZ2lzdGVyICgpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICQuZm4uZnVsbHBhZ2Uuc2V0QWxsb3dTY3JvbGxpbmcoZmFsc2UpO1xuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5zZXRLZXlib2FyZFNjcm9sbGluZyhmYWxzZSk7XG5cbiAgICAgICAgICAgIGxldCBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTBcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnN0ZXAxLCBwcm9wcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLnN0ZXAxO1xuXG4gICAgICAgICAgICBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlnaHRib3guc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubGlnaHRib3gsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gT3BlbiByZWNvdmVyeSBmb3Jtc1xuICAgICAgICAgKi9cbiAgICAgICAgb3BlblJlY292ZXJ5IChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmKCF0aGlzLldlYlJUQ1N1cHBvcnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9wZW5Gb3JtKHRoaXMucmVjb3ZlcnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBPcGVuIHJlY292ZXJ5IGZvcm1zXG4gICAgICAgICAqIEBwYXJhbSBmb3JtIHtub2RlfSBGb3JtIHlvdSB3YW50IHRvIG9wZW5cbiAgICAgICAgICogQHBhcmFtIGJhY2sge25vZGV9IEZvcm0gd2hpY2ggeW91IHdhbnQgdG8gb3BlbiB3aGVuIHVzZXIgcHJlc3MgYmFjaywgYnkgZGVmYXVsdCDigJTCoGxhc3QgZm9ybSBvcGVuZWRcbiAgICAgICAgICovXG4gICAgICAgIG9wZW5Gb3JtIChwb3B1cCwgZG9udF9zYXZlKSB7XG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLnNldEFsbG93U2Nyb2xsaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICQuZm4uZnVsbHBhZ2Uuc2V0S2V5Ym9hcmRTY3JvbGxpbmcoZmFsc2UpO1xuXG4gICAgICAgICAgICBsZXQgZm9ybSA9IHRoaXMuY3VycmVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG4gICAgICAgICAgICBpZiAoZm9ybSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e2Zvcm0uY2xlYXIoKTt9LCAyNTApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHBvcHVwID09IFwidW5kZWZpbmVkXCIgJiYgdGhpcy5sYXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBwb3B1cCA9IHRoaXMubGFzdC5wb3AoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHBvcHVwID09IFwidW5kZWZpbmVkXCIgJiYgdGhpcy5sYXN0Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZUFsbCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9udF9zYXZlICE9IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3QucHVzaCh0aGlzLmN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3JtID0gcG9wdXAucXVlcnlTZWxlY3RvcignZm9ybScpO1xuICAgICAgICAgICAgaWYgKGZvcm0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGVhcmluZycpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9Pntmb3JtLmNsZWFyKCk7fSwgMjUwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICByaWdodDogLSB0aGlzLmN1cnJlbnQub2Zmc2V0V2lkdGggKyBcInB4XCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTBcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLmN1cnJlbnQsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICByaWdodDogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHBvcHVwLCBwcm9wcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSBwb3B1cDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gQ2xvc2UgYWxsIGZvcm1zXG4gICAgICAgICAqL1xuICAgICAgICBjbG9zZUFsbCAoKSB7XG5cbiAgICAgICAgICAgICQuZm4uZnVsbHBhZ2Uuc2V0QWxsb3dTY3JvbGxpbmcodHJ1ZSk7XG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLnNldEtleWJvYXJkU2Nyb2xsaW5nKHRydWUpO1xuXG4gICAgICAgICAgICBsZXQgcHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtIHRoaXMuY3VycmVudC5vZmZzZXRXaWR0aCArIFwicHhcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMuY3VycmVudCwgcHJvcHMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gbnVsbDtcblxuICAgICAgICAgICAgcHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpZ2h0Ym94LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubGlnaHRib3gsIHByb3BzLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgdGhpcy5jbGVhckFsbCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xlYXJBbGwgKCkge1xuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Zvcm0nKSwgKGZvcm0pID0+IHtcbiAgICAgICAgICAgICAgICBmb3JtLmNsZWFyKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJCgnLmxvZ2luIHNlbGVjdCcpLnNlbGVjdDIoXCJkZXN0cm95XCIpO1xuICAgICAgICAgICAgJCgnLmxvZ2luIHNlbGVjdCcpLnNlbGVjdDIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gT3BlbiBsb2dpbiBwb3B1cFxuICAgICAgICAgKi9cbiAgICAgICAgb3BlbkxvZ2luRm9ybSAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICQuZm4uZnVsbHBhZ2Uuc2V0QWxsb3dTY3JvbGxpbmcoZmFsc2UpO1xuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5zZXRLZXlib2FyZFNjcm9sbGluZyhmYWxzZSk7XG5cbiAgICAgICAgICAgIGxldCBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTBcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLmxvZ2luX3BvcHVwLCBwcm9wcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLmxvZ2luX3BvcHVwO1xuXG4gICAgICAgICAgICBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlnaHRib3guc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubGlnaHRib3gsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG5ldyBNZW51O1xufSkoKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuKGZ1bmN0aW9uICgpIHtcblxuICAgIC8qKlxuICAgICAqIEBjbGFzcyBQb3B1cFxuICAgICAqL1xuICAgIGNsYXNzIFBvcHVwIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBBZGRpbmcgZXZlbnRzIGFuZCBwcm9wZXJ0aWVzXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IgKHBvcHVwKSB7XG4gICAgICAgICAgICB0aGlzLnBvcHVwID0gcG9wdXA7XG4gICAgICAgICAgICBwb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cC5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucG9wdXAub3BlbiA9IHRoaXMub3Blbi5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cC5zaG93ID0gdGhpcy5zaG93LmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5qYW1waW5nID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBzaG93ICgpIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXAuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgIHRoaXMucG9wdXAuc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0nKV0gPSBcInJvdGF0ZVgoMClcIjtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGhpZGUgKCkge1xuICAgICAgICAgICAgdGhpcy5wb3B1cC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICB0aGlzLnBvcHVwLnN0eWxlW01vZGVybml6ci5wcmVmaXhlZCgndHJhbnNmb3JtJyldID0gXCJyb3RhdGVYKDE4MGRlZylcIjtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gZmFsc2U7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCBcInN0b3BcIik7XG4gICAgICAgIH1cblxuICAgICAgICBjbG9zZSAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5qYW1waW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXR1cykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIFwiZmluaXNoXCIpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge1xuICAgICAgICAgICAgICAgIHJvdGF0ZVg6IFwiMTIwZGVnXCJcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwXG4gICAgICAgICAgICAgICAgLCBiZWdpbjogKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9wdXAuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLCBjb21wbGV0ZTogKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBvcGVuICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmphbXBpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmp1bXAoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmphbXBpbmcgPSB0cnVlO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwgXCJmaW5pc2hcIik7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCB7XG4gICAgICAgICAgICAgICAgcm90YXRlWDogXCIwZGVnXCJcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwXG4gICAgICAgICAgICAgICAgLCBiZWdpbjogKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9wdXAuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLCBjb21wbGV0ZTogKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIHtyb3RhdGVYOiBcIjIwZGVnXCJ9LCAxNTApO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge3JvdGF0ZVg6IFwiMGRlZ1wifSwgMTI1KTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIHtyb3RhdGVYOiBcIjEwZGVnXCJ9LCAyMDApO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge3JvdGF0ZVg6IFwiMGRlZ1wifSwge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOjE3NVxuICAgICAgICAgICAgICAgICwgY29tcGxldGU6ICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmphbXBpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAganVtcCAoKSB7XG4gICAgICAgICAgICB0aGlzLmphbXBpbmcgPSB0cnVlO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwgXCJmaW5pc2hcIik7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCB7cm90YXRlWDogXCIzNWRlZ1wifSwgMTUwKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIHtyb3RhdGVYOiBcIjBkZWdcIn0sIDEyNSk7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCB7cm90YXRlWDogXCIyMGRlZ1wifSwgMjAwKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIHtyb3RhdGVYOiBcIjBkZWdcIn0sIDE3NSk7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCB7cm90YXRlWDogXCIxNWRlZ1wifSwgMjUwKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIHtyb3RhdGVYOiBcIjBkZWdcIn0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjI1XG4gICAgICAgICAgICAgICAgLCBjb21wbGV0ZTogKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuamFtcGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgIH1cblxuXG4gICAgbGV0IHJlYWR5ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PntcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT0gXCJsb2FkaW5nXCIpIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpPT4gcmVzb2x2ZSgpKTtcbiAgICB9KTtcblxuICAgIHJlYWR5LnRoZW4oKCk9PntcbiAgICAgICAgW10uZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9icm93c2VyJyksIChwb3B1cCkgPT4ge1xuICAgICAgICAgICAgbmV3IFBvcHVwKHBvcHVwKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbn0pKCk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbihmdW5jdGlvbigpIHtcblxuICAgIC8qKlxuICAgICAqIEBjbGFzc2Rlc2MgQ2xhc3MgcmVwcmVzZW50aW5nIGZvcm0gdmFsaWRhdGlvblxuICAgICAqIEBjbGFzc1xuICAgICAqL1xuXG4gICAgY2xhc3MgVmFsaWRhdGlvbiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gQWRkaW5nIGV2ZW50cyBhbmQgcHJvcGVydGllc1xuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0cnVjdG9yKGZvcm0pIHtcbiAgICAgICAgICAgIHRoaXMuZm9ybSA9IGZvcm07XG4gICAgICAgICAgICBmb3JtLnNldEF0dHJpYnV0ZShcIm5vdmFsaWRhdGVcIiwgXCJub3ZhbGlkYXRlXCIpO1xuICAgICAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnZhbGlkYXRlLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgZm9ybS52YWxpZGF0ZSA9IHRoaXMudmFsaWRhdGUuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIGZvcm0uY2xlYXIgPSB0aGlzLmNsZWFyLmJpbmQodGhpcyk7XG5cbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXMgPSB7XG4gICAgICAgICAgICAgICAgZW46IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwiUmVxdWlyZWQgZmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAsIGVtYWlsOiBcIldyb25nIGVtYWlsIGZvcm1hdFwiXG4gICAgICAgICAgICAgICAgICAgICwgZXF1YWw6IFwiUGFzc3dvcmQgZmllbGRzIHNob3VsZCBiZSBlcXVhbFwiXG4gICAgICAgICAgICAgICAgICAgICwgdXJsOiBcIldyb25nIHVybCBmb3JtYXRcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAsIHJ1OiB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBcItCf0L7Qu9C1INC+0LHRj9C30LDRgtC10LvRjNC90L4g0LTQu9GPINC30LDQv9C+0LvQvdC10L3QuNGPXCJcbiAgICAgICAgICAgICAgICAgICAgLCBlbWFpbDogXCLQn9GA0L7QstC10YDRjNGC0LUg0YTQvtGA0LzQsNGCIGVtYWlsXCJcbiAgICAgICAgICAgICAgICAgICAgLCBlcXVhbDogXCLQn9Cw0YDQvtC70Lgg0LTQvtC70LbQvdGLINGB0L7QstC/0LDQtNCw0YLRjFwiXG4gICAgICAgICAgICAgICAgICAgICwgdXJsOiBcItCf0YDQvtCy0LXRgNGM0YLQtSDRhNC+0YDQvNCw0YIgVVJMXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFJlc2V0IGZvcm0gYW5kIGNsZWFyIGVycm9yc1xuICAgICAgICAgKi9cbiAgICAgICAgY2xlYXIgKCkge1xuICAgICAgICAgICAgdGhpcy5mb3JtLnJlc2V0KCk7XG4gICAgICAgICAgICBsZXQgc2VsZWN0b3JzID0gJCh0aGlzLmZvcm0pLmZpbmQoJ3NlbGVjdCcpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdG9ycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3JzLnNlbGVjdDIoXCJkZXN0cm95XCIpO1xuICAgICAgICAgICAgICAgIHNlbGVjdG9ycy5zZWxlY3QyKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgICAgICBsZXQgZXJyb3JzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm0tZXJyb3InKSxcbiAgICAgICAgICAgICAgICAgICAgZmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtdmFsaWRdLCBbZGF0YS1pbnZhbGlkXScpO1xuXG4gICAgICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGVycm9ycywgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGZpZWxkcywgKGZpZWxkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1pbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS12YWxpZCcpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9LDEwMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFJlbW92ZSBlcnJvciBtZXNzYWdlIGFmdGVyIGVsZW1lbnRcbiAgICAgICAgICogQHBhcmFtIHtOb2RlfSBlbGVtZW50IC0gZWxlbWVudCwgYWZ0ZXIgd2hpY2ggd2Ugd2lsbCBhZGQgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSAtIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cHBlIC0gZXJyb3IgdHlwZVxuICAgICAgICAgKi9cbiAgICAgICAgYWRkRXJyb3IoZWxlbWVudCwgbWVzc2FnZSwgdHlwZSkge1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWVycm9yW2RhdGEtdHlwZT1cIicgKyB0eXBlICsgJ1wiXScpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZXJyb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdQJyk7XG4gICAgICAgICAgICBlcnJvci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShtZXNzYWdlKSk7XG4gICAgICAgICAgICBlcnJvci5jbGFzc0xpc3QuYWRkKCdmb3JtLWVycm9yJyk7XG4gICAgICAgICAgICBlcnJvci5zZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScsIHR5cGUpO1xuICAgICAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGVycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gUmVtb3ZlIGVycm9yIG1lc3NhZ2Ugb2Ygc29tZSB0eXBlIGFmdGVyIGVsZW1lbnRcbiAgICAgICAgICogQHBhcmFtIHtOb2RlfSBlbGVtZW50IC0gZWxlbWVudCwgYWZ0ZXIgd2hpY2ggZXJyb3IgbWVzc2FnZSBpc1xuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwcGUgLSBlcnJvciB0eXBlXG4gICAgICAgICAqL1xuICAgICAgICBjbGVhckVycm9yKGVsZW1lbnQsIHR5cGUpIHtcblxuICAgICAgICAgICAgbGV0IGVyciA9IGVsZW1lbnQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuZm9ybS1lcnJvcltkYXRhLXR5cGU9XCInICsgdHlwZSArICdcIl0nKTtcbiAgICAgICAgICAgIGlmIChlcnIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBWYWxpZGF0ZSBmb3JtXG4gICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IC0gc3VibWl0IGV2ZW50XG4gICAgICAgICAqIEB0b2RvIEltcGxlbWVudCBsb2dpbiB2YWxpZGF0aW9uXG4gICAgICAgICAqL1xuICAgICAgICB2YWxpZGF0ZShldmVudCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBldmVudCAhPSBcInVuZGVmaW5lZFwiICYmICFldmVudC5jdXJyZW50VGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1yZWxvYWQnKSkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCB2YWxpZCA9IHRydWUsXG4gICAgICAgICAgICAgICAgbmV4dCA9IG51bGwsXG4gICAgICAgICAgICAgICAgZXF1YWxfZmllbGRzID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWVxdWFsXScpLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkX2ZpZWxkcyA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdbcmVxdWlyZWRdJyksXG4gICAgICAgICAgICAgICAgdXJsX2ZpZWxkcyA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwidXJsXCJdJyksXG4gICAgICAgICAgICAgICAgZW1haWxfZmllbGRzID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJlbWFpbFwiXScpLFxuICAgICAgICAgICAgICAgIHVybF9yZWdleCA9IG5ldyBSZWdFeHAoXCJeKGh0dHB8aHR0cHN8ZnRwKVxcOi8vKFthLXpBLVowLTlcXC5cXC1dKyhcXDpbYS16QS1aMC05XFwuJmFtcDslXFwkXFwtXSspKkApKigoMjVbMC01XXwyWzAtNF1bMC05XXxbMC0xXXsxfVswLTldezJ9fFsxLTldezF9WzAtOV17MX18WzEtOV0pXFwuKDI1WzAtNV18MlswLTRdWzAtOV18WzAtMV17MX1bMC05XXsyfXxbMS05XXsxfVswLTldezF9fFsxLTldfDApXFwuKDI1WzAtNV18MlswLTRdWzAtOV18WzAtMV17MX1bMC05XXsyfXxbMS05XXsxfVswLTldezF9fFsxLTldfDApXFwuKDI1WzAtNV18MlswLTRdWzAtOV18WzAtMV17MX1bMC05XXsyfXxbMS05XXsxfVswLTldezF9fFswLTldKXwoW2EtekEtWjAtOVxcLV0rXFwuKSpbYS16QS1aMC05XFwtXStcXC4oY29tfGVkdXxnb3Z8aW50fG1pbHxuZXR8b3JnfGJpenxhcnBhfGluZm98bmFtZXxwcm98YWVyb3xjb29wfG11c2V1bXxbYS16QS1aXXsyfSkpKFxcOlswLTldKykqKC8oJHxbYS16QS1aMC05XFwuXFwsXFw/XFwnXFxcXFxcKyZhbXA7JVxcJCNcXD1+X1xcLV0rKSkqJFwiLCBcImlcIiksXG4gICAgICAgICAgICAgICAgZW1haWxfcmVnZXggPSBuZXcgUmVnRXhwKFwiXihbYS16QS1aMC05X1xcLlxcLV0pK1xcQCgoW2EtekEtWjAtOVxcLV0pK1xcLikrKFthLXpBLVowLTldezIsNH0pKyRcIik7XG5cbiAgICAgICAgICAgIC8qIGNoZWNrIGVxdWFsIGZpZWxkcyAqL1xuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGVxdWFsX2ZpZWxkcywgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZXF1YWwgPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcihlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtZXF1YWxcIikpO1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnZhbHVlLnRyaW0oKSAhPSBlcXVhbC52YWx1ZS50cmltKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFcnJvcihlbGVtZW50LCB0aGlzLm1lc3NhZ2VzW2RvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2xhbmcnKV0uZXF1YWwsIFwiZXF1YWxcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckVycm9yKGVsZW1lbnQsIFwiZXF1YWxcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qIGNoZWNrIHJlcXVpcmVkIGZpZWxkcyAqL1xuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKHJlcXVpcmVkX2ZpZWxkcywgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC52YWx1ZS50cmltKCkgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFcnJvcihlbGVtZW50LCB0aGlzLm1lc3NhZ2VzW2RvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2xhbmcnKV0ucmVxdWlyZWQsIFwicmVxdWlyZWRcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckVycm9yKGVsZW1lbnQsICdyZXF1aXJlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKiBjaGVjayB1cmwgZmllbGRzICovXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwodXJsX2ZpZWxkcywgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoKGVsZW1lbnQudmFsdWUudHJpbSgpLmxlbmd0aCA+IDApICYmICh1cmxfcmVnZXgudGVzdChlbGVtZW50LnZhbHVlLnRyaW0oKSkgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEVycm9yKGVsZW1lbnQsIHRoaXMubWVzc2FnZXNbZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnbGFuZycpXS51cmwsICd1cmwnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRXJyb3IoZWxlbWVudCwgJ3VybCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKiBjaGVjayBlbWFpbCBmaWVsZHMgKi9cbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChlbWFpbF9maWVsZHMsIChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKChlbGVtZW50LnZhbHVlLnRyaW0oKS5sZW5ndGggPiAwKSAmJiAoZW1haWxfcmVnZXgudGVzdChlbGVtZW50LnZhbHVlLnRyaW0oKSkgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEVycm9yKGVsZW1lbnQsIHRoaXMubWVzc2FnZXNbZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnbGFuZycpXS5lbWFpbCwgJ2VtYWlsJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckVycm9yKGVsZW1lbnQsICdlbWFpbCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgIGxldCBhbGxfZmllbGRzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZXF1YWxfZmllbGRzKS5jb25jYXQoXG4gICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwocmVxdWlyZWRfZmllbGRzKSxcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh1cmxfZmllbGRzKSxcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlbWFpbF9maWVsZHMpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoYWxsX2ZpZWxkcywgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZXJyID0gZWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWVycm9yJyk7XG4gICAgICAgICAgICAgICAgaWYgKGVyciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnZhbGlkID0gZG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKFwiZGF0YS1pbnZhbGlkXCIpO1xuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkLnZhbHVlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lID09IFwiU0VMRUNUXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQubmV4dFNpYmxpbmcuc2V0QXR0cmlidXRlTm9kZShpbnZhbGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQubmV4dFNpYmxpbmcucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZU5vZGUoaW52YWxpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS12YWxpZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgdmFsaWQgPSBkb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUoXCJkYXRhLXZhbGlkXCIpO1xuICAgICAgICAgICAgICAgICAgICB2YWxpZC52YWx1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT0gXCJTRUxFQ1RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5uZXh0U2libGluZy5zZXRBdHRyaWJ1dGVOb2RlKHZhbGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQubmV4dFNpYmxpbmcucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWludmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlTm9kZSh2YWxpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1pbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IGVycm9yc19jb3VudCA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9lcnJvcicpLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChlcnJvcnNfY291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHZhbGlkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXZlbnQgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHZhbGlkO1xuXG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGxldCByZWFkeSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT0gXCJsb2FkaW5nXCIpIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHJlc29sdmUoKSk7XG4gICAgfSk7XG5cbiAgICByZWFkeS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBsZXQgZm9ybXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdmb3JtJyk7XG4gICAgICAgIFtdLmZvckVhY2guY2FsbChmb3JtcywgKGZvcm0pID0+IHtcbiAgICAgICAgICAgIG5ldyBWYWxpZGF0aW9uKGZvcm0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==