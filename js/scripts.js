"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();console.log("landing"),function(){var e=function(){function e(){_classCallCheck(this,e);var t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(this.init.bind(this))}return _createClass(e,[{key:"init",value:function(){var e=this;this.fired=!1,this.tablet=1200,this.mobile=750,this.min_height=450;var t=document.querySelector(".header"),i=document.querySelector(".clock");$(".landing").fullpage({sectionSelector:".landing__section",navigation:!0,afterLoad:this.hideLoader.bind(this),afterRender:this.recountSlides.bind(this),afterResize:this.recountSlides.bind(this),onLeave:function(s,o,l){1==o?(t.classList.toggle("header_open",!1),e.hideNav()):(t.classList.toggle("header_open",!0),e.showNav()),6==o?i.classList.toggle("clock_visible",!0):i.classList.toggle("clock_visible",!1)}}),document.querySelector(".footer__top").addEventListener("click",this.scrollToTop.bind(this))}},{key:"hideNav",value:function(){var e=this;Velocity(this.nav,"finish"),Velocity(this.nav,{opacity:0},{duration:300,complete:function(){e.nav.style.display="none"}})}},{key:"showNav",value:function(){var e=this;Velocity(this.nav,"finish"),Velocity(this.nav,{opacity:1},{duration:300,begin:function(){e.nav.style.display="block"}})}},{key:"hideLoader",value:function(){if(!this.fired){this.fired=!0,this.nav=document.getElementById("fp-nav"),this.hideNav(),[].forEach.call(document.querySelectorAll(".slide__resizable, .slide__centred"),function(e){e.setAttribute("data-height",e.offsetHeight),e.setAttribute("data-width",e.offsetWidth),console.log("initial size: ",[e.offsetHeight,e.offsetWidth])});var e=document.querySelector(".loader__wrapper"),t={opacity:0},i={duration:500,complete:function(){e.parentNode.removeChild(e)}};Velocity(e,t,i)}}},{key:"recountSlides",value:function(){var e=this,t=document.querySelectorAll(".slide__resizable"),i=document.querySelectorAll(".slide__centred"),s=document.querySelector(".header").offsetHeight,o=void 0,l=void 0,n=void 0,a=void 0,r=20,d=void 0,c=1,h=1,f=1,u=void 0,v=void 0,g=void 0,y=void 0,m=void 0,p=void 0,b=void 0,_=void 0;[].forEach.call(i,function(e){v=e.closest(".slide"),d=e.closest(".fp-tableCell"),o=Math.min(d.offsetHeight,parseInt(d.style.height,10)),l=d.offsetWidth,_=parseInt(e.getAttribute("data-height"),10),l>1220?(b=1230,y=170):l>750?(b=1050,y=170):(b=400,_=900,y=0),a=o-s-r+y,n=l-40,h=a/_,f=n/b,c=Math.min(h,f),m=0,p=0,_>a&&(m=-(_-o-s)/2),b>n&&1221>l&&l>750&&(m=0,p=-(b-l)/2),580>o?(v.classList.add("slide_hide-centred"),e.style[Modernizr.prefixed("transform")]="none"):1>c?(v.classList.remove("slide_hide-centred"),e.style[Modernizr.prefixed("transform")]="translateX("+p+"px) translateY("+m+"px) scale("+c+")"):(v.classList.remove("slide_hide-centred"),e.style[Modernizr.prefixed("transform")]="translateX("+p+"px) translateY("+m+"px)")}),[].forEach.call(t,function(t){v=t.closest(".slide"),u=t.closest(".slide__details").querySelector(".slide__header"),d=t.closest(".fp-tableCell"),o=Math.min(d.offsetHeight,parseInt(d.style.height,10)),l=d.offsetWidth,_=parseInt(t.getAttribute("data-height"),10),b=parseInt(t.getAttribute("data-width"),10),h=a/_,f=n/b,c=Math.min(h,f),l>e.mobile?(a=o-s-r,n=l/2-40,h=a/_,f=n/b,c=Math.min(h,f),a<e.min_height?v.classList.add("slide_hide-resizable"):1>c?(v.classList.remove("slide_hide-resizable"),t.style[Modernizr.prefixed("transform")]="scale("+c+")",v.classList.contains("slide_right")?(g=(parseInt(t.getAttribute("data-width"),10)+20)*c,u.style.borderLeftWidth=g+"px",l>e.tablet&&(t.style.marginRight=20+u.offsetWidth/2-g+"px")):(g=(parseInt(t.getAttribute("data-width"),10)+20)*c,u.style.borderRightWidth=g+"px",l>e.tablet&&(t.style.marginLeft=20+u.offsetWidth/2-g+"px"))):(v.classList.remove("slide_hide-resizable"),t.removeAttribute("style"),u.removeAttribute("style"))):(a=o-s-u.offsetHeight-90-20,n=l-40,console.log("ah: ",a),console.log("aw: ",n,b),h=a/_,f=n/b,c=Math.min(h,f),b>n?t.style.marginLeft=-((b-n)/2-20)+"px":t.style.marginLeft="auto",a<e.min_height?(console.log("hidding"),v.classList.add("slide_hide-resizable")):1>c?(v.classList.remove("slide_hide-resizable"),t.style[Modernizr.prefixed("transform")]="scale("+c+")"):(v.classList.remove("slide_hide-resizable"),t.removeAttribute("style"),u.removeAttribute("style")))})}},{key:"scrollToTop",value:function(e){e.preventDefault(),$.fn.fullpage.moveTo(1,0)}}]),e}();new e}();
"use strict";function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function i(i,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}return function(e,o,n){return o&&i(e.prototype,o),n&&i(e,n),e}}();console.log("layout"),function(){window.mobileAndTabletcheck=function(){var i=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(i=!0)}(navigator.userAgent||navigator.vendor||window.opera),i},window.isMobile={Android:function(){return/Android/i.test(navigator.userAgent)},BlackBerry:function(){return/BlackBerry/i.test(navigator.userAgent)},iOS:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},Windows:function(){return/IEMobile/i.test(navigator.userAgent)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Windows()}};var i=function(){function i(){_classCallCheck(this,i);var e=new Promise(function(i,e){return"loading"!=document.readyState?i():void document.addEventListener("DOMContentLoaded",function(){return i()})});e.then(this.init.bind(this))}return _createClass(i,[{key:"init",value:function(){window.isMobile.Android()?document.body.parentNode.classList.add("android"):window.isMobile.iOS()?document.body.parentNode.classList.add("ios"):window.mobileAndTabletcheck()?document.body.parentNode.classList.add("unknown-mobile"):document.body.parentNode.classList.add("desktop")}}]),i}();new i}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}();console.log("Menu"),function(){var e=function(){function e(){_classCallCheck(this,e);var t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(this.init.bind(this))}return _createClass(e,[{key:"init",value:function(){var e=this,t=document.querySelectorAll(".login__back"),o=document.querySelectorAll(".login__login-button, .login_success .login__submit"),i=document.querySelectorAll(".menu__interpreter, .header__interpreter");this.menu_popup_open=!1,this.login_button=document.querySelector(".menu__login"),this.register_button=document.querySelector(".menu__register"),this.step1=document.querySelector(".login_register-step-1"),this.step1_form=document.querySelector(".login_register-step-1 form.login__form"),this.step2=document.querySelector(".login_register-step-2"),this.step2_form=document.querySelector(".login_register-step-2 form.login__form"),this.mobile_popup=document.querySelector(".popup_mobile"),this.mobile_popup_close=this.mobile_popup.querySelector(".popup__close"),this.wrapper=document.querySelector(".menu__wrapper"),this.header_register_button=document.querySelector(".header__link_register"),this.header_login_button=document.querySelector(".header__link_login"),this.recovery_button=document.querySelector(".login__password-recovery"),this.lightbox=document.querySelector("body>.lightbox"),this.login_popup=document.querySelector(".login_login"),this.recovery=document.querySelector(".login_recovery"),this.password=document.querySelector(".login_password"),this.recovery_form=this.recovery.querySelector(".login__form"),this.password_form=this.password.querySelector(".login__form"),this.error_message=document.querySelector(".login_error"),this.email=document.querySelector(".login_email"),this.success=document.querySelector(".login_success"),this.current=document.querySelector(".login_open"),this.last=[],this.login_button.addEventListener("click",this.openLoginForm.bind(this)),this.recovery_button.addEventListener("click",this.openRecovery.bind(this)),this.lightbox.addEventListener("click",this.closeAll.bind(this)),this.register_button.addEventListener("click",this.openRegister.bind(this)),this.header_login_button.addEventListener("click",this.openLoginOuter.bind(this)),this.header_register_button.addEventListener("click",this.openRegisterOuter.bind(this)),this.mobile_popup_close.addEventListener("click",this.closeMobilePopup.bind(this)),this.recovery_form.addEventListener("submit",this.sendData.bind(this)),this.password_form.addEventListener("submit",this.sendData.bind(this)),this.step1_form.addEventListener("submit",this.openNext.bind(this)),this.step2_form.addEventListener("submit",this.sendData.bind(this)),window.addEventListener("resize",this.reposPopup.bind(this)),$(".login select").select2(),[].forEach.call(i,function(t){t.addEventListener("click",e.openMobilePopup.bind(e))}),[].forEach.call(t,function(t){t.addEventListener("click",e.goback.bind(e))}),[].forEach.call(o,function(t){t.addEventListener("click",e.openLoginInner.bind(e))}),this.WebRTCSupport=!document.documentElement.classList.contains("no-peerconnection"),this.WebRTCSupport||([].forEach.call(document.querySelectorAll("form.login__form input, form.login__form button, form.login__form select"),function(e){e.setAttribute("disabled","disabled")}),[].forEach.call(document.documentElement.querySelectorAll("form.login__form"),function(e){e.addEventListener("click",function(t){e.closest(".login").querySelector(".popup_browser").open()})}),[].forEach.call(document.querySelectorAll(".popup_browser"),function(t){e.showPopup(t)}))}},{key:"openNext",value:function(e){e.preventDefault(),0!=this.step1_form.validate()&&this.openForm(this.step2)}},{key:"reposPopup",value:function(e){this.menu_popup_open&&(this.mobile_popup.style[Modernizr.prefixed("transform")]="translateY("+this.mobile_popup.offsetHeight+"px)")}},{key:"closeMobilePopup",value:function(){var e=this;this.menu_popup_open&&(this.menu_popup_open=!1,Velocity(this.mobile_popup,"stop"),Velocity(this.mobile_popup,{translateY:0},250),Velocity(this.mobile_popup_button,"stop"),Velocity(this.mobile_popup_button,{opacity:1},{duration:250,begin:function(){e.mobile_popup_button.style.display="block"}}))}},{key:"openMobilePopup",value:function(){var e=this;this.menu_popup_open||(this.menu_popup_open=!0,Velocity(this.mobile_popup,"stop"),Velocity(this.mobile_popup,{translateY:this.mobile_popup.offsetHeight+"px"},250),Velocity(this.mobile_popup_button,"stop"),Velocity(this.mobile_popup_button,{opacity:0},{duration:250,complete:function(){e.mobile_popup_button.style.display="none"}}))}},{key:"showPopup",value:function(e){void 0!=e.show?e.show():setTimeout(this.showPopup.bind(this,e),50)}},{key:"openLoginOuter",value:function(e){var t=this;e.preventDefault(),$.fn.fullpage.moveTo(1,0),setTimeout(function(){t.login_button.click()},800)}},{key:"openRegisterOuter",value:function(e){var t=this;e.preventDefault(),$.fn.fullpage.moveTo(1,0),setTimeout(function(){t.register_button.click()},800)}},{key:"sendData",value:function(e){var t=this;e.preventDefault();var o=e.currentTarget;if(0!=o.validate())try{!function(){var e=4,i=200,n=void 0,r=new XMLHttpRequest,s=new Promise(function(n,s){r.open("POST",o.getAttribute("action")),r.send(new FormData(o)),r.onreadystatechange=function(){r.readyState===e&&(t.recovery_form.reset(),r.status===i?n():s({code:parseInt(r.status,10),message:r.statusText}))}});n=o.hasAttribute("data-check")?t.showCheckMessage.bind(t):t.showSuccessMessage.bind(t),s.then(n)["catch"](t.showErrorMessage.bind(t))}()}catch(i){console.log("error: ",i)}}},{key:"showCheckMessage",value:function(){this.openForm(this.email)}},{key:"showSuccessMessage",value:function(){this.openForm(this.success)}},{key:"openLoginInner",value:function(){this.openForm(this.login_popup)}},{key:"showErrorMessage",value:function(e){this.last=new Array,console.log(e.code,"Responce status code: "+e.code+". "+e.message+"."),this.openForm(this.error_message,!0)}},{key:"goback",value:function(){this.openForm()}},{key:"emailHaveSend",value:function(){this.openForm(this.email)}},{key:"openRegisterInner",value:function(){this.openForm(this.step1)}},{key:"openRegister",value:function(){var e=this;event.preventDefault(),$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1);var t={right:0},o={duration:250};Velocity(this.step1,t,o),this.current=this.step1,t={opacity:1},o={begin:function(){e.lightbox.style.display="block"},duration:250},Velocity(this.lightbox,t,o)}},{key:"openRecovery",value:function(e){e.preventDefault(),this.WebRTCSupport&&this.openForm(this.recovery)}},{key:"openForm",value:function(e,t){$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1);var o=this.current.querySelector("form");if(null!=o&&setTimeout(function(){o.clear()},250),"undefined"==typeof e&&this.last.length>0)e=this.last.pop();else{if("undefined"==typeof e&&0==this.last.length)return void this.closeAll();1!=t&&this.last.push(this.current)}o=e.querySelector("form"),null!=o&&(console.log("clearing"),setTimeout(function(){o.clear()},250));var i={right:-this.current.offsetWidth+"px"},n={duration:250};Velocity(this.current,i,n),i={right:0},n={duration:250},Velocity(e,i,n),this.current=e}},{key:"closeAll",value:function(){var e=this;$.fn.fullpage.setAllowScrolling(!0),$.fn.fullpage.setKeyboardScrolling(!0);var t={right:-this.current.offsetWidth+"px"},o={duration:250};Velocity(this.current,t,o),this.current=null,t={opacity:0},o={complete:function(){e.lightbox.style.display="none"},duration:250},Velocity(this.lightbox,t,o),this.clearAll()}},{key:"clearAll",value:function(){[].forEach.call(document.querySelectorAll("form"),function(e){e.clear()}),$(".login select").select2("destroy"),$(".login select").select2()}},{key:"openLoginForm",value:function(e){var t=this;e.preventDefault(),$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1);var o={right:0},i={duration:250};Velocity(this.login_popup,o,i),this.current=this.login_popup,o={opacity:1},i={begin:function(){t.lightbox.style.display="block"},duration:250},Velocity(this.lightbox,o,i)}}]),e}();new e}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}();console.log("popup"),function(){var t=function(){function t(e){_classCallCheck(this,t),this.popup=e,e.querySelector(".popup__close").addEventListener("click",this.close.bind(this)),this.popup.close=this.close.bind(this),this.popup.open=this.open.bind(this),this.popup.show=this.show.bind(this),this.status=!1,this.jamping=!1}return _createClass(t,[{key:"show",value:function(){this.popup.style.display="block",this.popup.style[Modernizr.prefixed("transform")]="rotateX(0)",this.status=!0}},{key:"hide",value:function(){this.popup.style.display="none",this.popup.style[Modernizr.prefixed("transform")]="rotateX(180deg)",this.status=!1,Velocity(this.popup,"stop")}},{key:"close",value:function(){var t=this;this.jamping||this.status&&(Velocity(this.popup,"finish"),Velocity(this.popup,{rotateX:"120deg"},{duration:500,begin:function(){t.popup.style.display="block"},complete:function(){t.status=!1}}))}},{key:"open",value:function(){var t=this;if(!this.jamping){if(this.status)return void this.jump();this.jamping=!0,Velocity(this.popup,"finish"),Velocity(this.popup,{rotateX:"0deg"},{duration:500,begin:function(){t.popup.style.display="block"},complete:function(){t.status=!0}}),Velocity(this.popup,{rotateX:"20deg"},150),Velocity(this.popup,{rotateX:"0deg"},125),Velocity(this.popup,{rotateX:"10deg"},200),Velocity(this.popup,{rotateX:"0deg"},{duration:175,complete:function(){t.jamping=!1}})}}},{key:"jump",value:function(){var t=this;this.jamping=!0,Velocity(this.popup,"finish"),Velocity(this.popup,{rotateX:"35deg"},150),Velocity(this.popup,{rotateX:"0deg"},125),Velocity(this.popup,{rotateX:"20deg"},200),Velocity(this.popup,{rotateX:"0deg"},175),Velocity(this.popup,{rotateX:"15deg"},250),Velocity(this.popup,{rotateX:"0deg"},{duration:225,complete:function(){t.jamping=!1}})}}]),t}(),e=new Promise(function(t,e){return"loading"!=document.readyState?t():void document.addEventListener("DOMContentLoaded",function(){return t()})});e.then(function(){[].forEach.call(document.querySelectorAll(".popup_browser"),function(e){new t(e)})})}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();!function(){var e=function(){function e(t){_classCallCheck(this,e),this.form=t,t.setAttribute("novalidate","novalidate"),t.addEventListener("submit",this.validate.bind(this)),t.validate=this.validate.bind(this),t.clear=this.clear.bind(this),this.messages={en:{required:"Required field",email:"Wrong email format",equal:"Password fields should be equal",url:"Wrong url format"},ru:{required:"Поле обязательно для заполнения",email:"Проверьте формат email",equal:"Пароли должны совпадать",url:"Проверьте формат URL"}}}return _createClass(e,[{key:"clear",value:function(){this.form.reset();var e=$(this.form).find("select");e.length>0&&(e.select2("destroy"),e.select2()),setTimeout(function(){var e=document.querySelectorAll(".form-error"),t=document.querySelectorAll("[data-valid], [data-invalid]");[].forEach.call(e,function(e){e.parentNode.removeChild(e)}),[].forEach.call(t,function(e){e.removeAttribute("data-invalid"),e.removeAttribute("data-valid")})},100)}},{key:"addError",value:function(e,t,r){if(null==e.parentNode.querySelector('.form-error[data-type="'+r+'"]')){var a=document.createElement("P");a.appendChild(document.createTextNode(t)),a.classList.add("form-error"),a.setAttribute("data-type",r),e.parentNode.appendChild(a)}}},{key:"clearError",value:function(e,t){var r=e.parentNode.querySelector('.form-error[data-type="'+t+'"]');null!=r&&e.parentNode.removeChild(r)}},{key:"validate",value:function(e){var t=this;"undefined"==typeof e||e.currentTarget.hasAttribute("data-reload")||e.preventDefault();var r=!0,a=this.form.querySelectorAll("[data-equal]"),l=this.form.querySelectorAll("[required]"),o=this.form.querySelectorAll('input[type="url"]'),i=this.form.querySelectorAll('input[type="email"]'),n=new RegExp("^(http|https|ftp)://([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&amp;%$-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9-]+.)*[a-zA-Z0-9-]+.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(/($|[a-zA-Z0-9.,?'\\+&amp;%$#=~_-]+))*$","i"),u=new RegExp("^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$");[].forEach.call(a,function(e){var a=t.form.querySelector(e.getAttribute("data-equal"));e.value.trim()!=a.value.trim()?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].equal,"equal")):t.clearError(e,"equal")}),[].forEach.call(l,function(e){""===e.value.trim()?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].required,"required")):t.clearError(e,"required")}),[].forEach.call(o,function(e){e.value.trim().length>0&&n.test(e.value.trim())===!1?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].url,"url")):t.clearError(e,"url")}),[].forEach.call(i,function(e){e.value.trim().length>0&&u.test(e.value.trim())===!1?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].email,"email")):t.clearError(e,"email")});var d=Array.prototype.slice.call(a).concat(Array.prototype.slice.call(l),Array.prototype.slice.call(o),Array.prototype.slice.call(i));[].forEach.call(d,function(e){var t=e.parentNode.querySelector(".form-error");if(null!=t){var r=document.createAttribute("data-invalid");r.value=!0,"SELECT"==e.tagName?(e.nextSibling.setAttributeNode(r),e.nextSibling.removeAttribute("data-valid")):(e.setAttributeNode(r),e.removeAttribute("data-valid"))}else{var a=document.createAttribute("data-valid");a.value=!0,"SELECT"==e.tagName?(e.nextSibling.setAttributeNode(a),e.nextSibling.removeAttribute("data-invalid")):(e.setAttributeNode(a),e.removeAttribute("data-invalid"))}});var c=this.form.querySelectorAll(".form_error").length;return c>0&&(r=!1),r===!1&&"undefined"!=typeof e&&e.preventDefault(),r}}]),e}(),t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(function(){var t=document.querySelectorAll("form");[].forEach.call(t,function(t){new e(t)})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxhbmRpbmcvbGFuZGluZy5qcyIsImxheW91dC9sYXlvdXQuanMiLCJsb2dpbi9sb2dpbi5qcyIsInBvcHVwL3BvcHVwLmpzIiwidmFsaWRhdG9yL3ZhbGlkYXRpb24uanMiXSwibmFtZXMiOlsiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJjb25zb2xlIiwibG9nIiwiTGFuZGdpbmciLCJ0aGlzIiwicmVhZHkiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImRvY3VtZW50IiwicmVhZHlTdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0aGVuIiwiaW5pdCIsImJpbmQiLCJ2YWx1ZSIsIl90aGlzIiwiZmlyZWQiLCJ0YWJsZXQiLCJtb2JpbGUiLCJtaW5faGVpZ2h0IiwiaGVhZGVyIiwicXVlcnlTZWxlY3RvciIsImNsb2NrIiwiJCIsImZ1bGxwYWdlIiwic2VjdGlvblNlbGVjdG9yIiwibmF2aWdhdGlvbiIsImFmdGVyTG9hZCIsImhpZGVMb2FkZXIiLCJhZnRlclJlbmRlciIsInJlY291bnRTbGlkZXMiLCJhZnRlclJlc2l6ZSIsIm9uTGVhdmUiLCJpbmRleCIsIm5leHRJbmRleCIsImRpcmVjdGlvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImhpZGVOYXYiLCJzaG93TmF2Iiwic2Nyb2xsVG9Ub3AiLCJfdGhpczIiLCJWZWxvY2l0eSIsIm5hdiIsIm9wYWNpdHkiLCJkdXJhdGlvbiIsImNvbXBsZXRlIiwic3R5bGUiLCJkaXNwbGF5IiwiX3RoaXMzIiwiYmVnaW4iLCJnZXRFbGVtZW50QnlJZCIsImZvckVhY2giLCJjYWxsIiwicXVlcnlTZWxlY3RvckFsbCIsInJlc2l6YWJsZSIsInNldEF0dHJpYnV0ZSIsIm9mZnNldEhlaWdodCIsIm9mZnNldFdpZHRoIiwibG9hZGVyIiwib3B0aW9ucyIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsIl90aGlzNCIsInJlc2l6YWJsZXMiLCJjZW50cmVkcyIsImhlYWRlcl9oZWlnaHQiLCJ2aWV3cG9ydF9oZWlnaHQiLCJ1bmRlZmluZWQiLCJ2aWV3cG9ydF93aWR0aCIsImF2YWlsYWJhbGVfd2lkdGgiLCJhdmFpbGFiYWxlX2hlaWdodCIsImRlbHRhIiwiY2VsbCIsInNjYWxlIiwic2NhbGVfeCIsInNjYWxlX3kiLCJzbGlkZSIsImJvcmRlcl93aWR0aCIsImRlbHRhX3kiLCJ0cl95IiwidHJfeCIsImVsZW1lbnRfd2lkdGgiLCJlbGVtZW50X2hlaWdodCIsImNlbnRyZWQiLCJjbG9zZXN0IiwiTWF0aCIsIm1pbiIsInBhcnNlSW50IiwiaGVpZ2h0IiwiZ2V0QXR0cmlidXRlIiwiYWRkIiwiTW9kZXJuaXpyIiwicHJlZml4ZWQiLCJyZW1vdmUiLCJjb250YWlucyIsImJvcmRlckxlZnRXaWR0aCIsIm1hcmdpblJpZ2h0IiwiYm9yZGVyUmlnaHRXaWR0aCIsIm1hcmdpbkxlZnQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiZm4iLCJtb3ZlVG8iLCJ3aW5kb3ciLCJtb2JpbGVBbmRUYWJsZXRjaGVjayIsImNoZWNrIiwiYSIsInRlc3QiLCJzdWJzdHIiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ2ZW5kb3IiLCJvcGVyYSIsImlzTW9iaWxlIiwiQW5kcm9pZCIsIkJsYWNrQmVycnkiLCJpT1MiLCJXaW5kb3dzIiwiYW55IiwiTGF5b3V0IiwiYm9keSIsIk1lbnUiLCJiYWNrX2J1dHRvbnMiLCJsb2dpbl9idXR0b25zIiwibW9iaWxlX3BvcHVwX2J1dHRvbnMiLCJtZW51X3BvcHVwX29wZW4iLCJsb2dpbl9idXR0b24iLCJyZWdpc3Rlcl9idXR0b24iLCJzdGVwMSIsInN0ZXAxX2Zvcm0iLCJzdGVwMiIsInN0ZXAyX2Zvcm0iLCJtb2JpbGVfcG9wdXAiLCJtb2JpbGVfcG9wdXBfY2xvc2UiLCJ3cmFwcGVyIiwiaGVhZGVyX3JlZ2lzdGVyX2J1dHRvbiIsImhlYWRlcl9sb2dpbl9idXR0b24iLCJyZWNvdmVyeV9idXR0b24iLCJsaWdodGJveCIsImxvZ2luX3BvcHVwIiwicmVjb3ZlcnkiLCJwYXNzd29yZCIsInJlY292ZXJ5X2Zvcm0iLCJwYXNzd29yZF9mb3JtIiwiZXJyb3JfbWVzc2FnZSIsImVtYWlsIiwic3VjY2VzcyIsImN1cnJlbnQiLCJsYXN0Iiwib3BlbkxvZ2luRm9ybSIsIm9wZW5SZWNvdmVyeSIsImNsb3NlQWxsIiwib3BlblJlZ2lzdGVyIiwib3BlbkxvZ2luT3V0ZXIiLCJvcGVuUmVnaXN0ZXJPdXRlciIsImNsb3NlTW9iaWxlUG9wdXAiLCJzZW5kRGF0YSIsIm9wZW5OZXh0IiwicmVwb3NQb3B1cCIsInNlbGVjdDIiLCJidXR0b24iLCJvcGVuTW9iaWxlUG9wdXAiLCJnb2JhY2siLCJvcGVuTG9naW5Jbm5lciIsIldlYlJUQ1N1cHBvcnQiLCJkb2N1bWVudEVsZW1lbnQiLCJlbGVtZW50IiwiZm9ybSIsIm9wZW4iLCJwb3B1cCIsInNob3dQb3B1cCIsInZhbGlkYXRlIiwib3BlbkZvcm0iLCJ0cmFuc2xhdGVZIiwibW9iaWxlX3BvcHVwX2J1dHRvbiIsInNob3ciLCJzZXRUaW1lb3V0IiwiY2xpY2siLCJfdGhpczUiLCJfdGhpczYiLCJjdXJyZW50VGFyZ2V0IiwiRE9ORSIsIk9LIiwibWVzc2FnZSIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwibG9hZGVkIiwic2VuZCIsIkZvcm1EYXRhIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVzZXQiLCJzdGF0dXMiLCJjb2RlIiwic3RhdHVzVGV4dCIsImhhc0F0dHJpYnV0ZSIsInNob3dDaGVja01lc3NhZ2UiLCJzaG93U3VjY2Vzc01lc3NhZ2UiLCJzaG93RXJyb3JNZXNzYWdlIiwiZXJyIiwicmVhc29uIiwiQXJyYXkiLCJfdGhpczciLCJzZXRBbGxvd1Njcm9sbGluZyIsInNldEtleWJvYXJkU2Nyb2xsaW5nIiwicmlnaHQiLCJkb250X3NhdmUiLCJjbGVhciIsInBvcCIsInB1c2giLCJfdGhpczgiLCJjbGVhckFsbCIsIl90aGlzOSIsIlBvcHVwIiwiY2xvc2UiLCJqYW1waW5nIiwicm90YXRlWCIsImp1bXAiLCJWYWxpZGF0aW9uIiwibWVzc2FnZXMiLCJlbiIsInJlcXVpcmVkIiwiZXF1YWwiLCJ1cmwiLCJydSIsInNlbGVjdG9ycyIsImZpbmQiLCJlcnJvcnMiLCJmaWVsZHMiLCJlcnJvciIsImZpZWxkIiwidHlwZSIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwidmFsaWQiLCJlcXVhbF9maWVsZHMiLCJyZXF1aXJlZF9maWVsZHMiLCJ1cmxfZmllbGRzIiwiZW1haWxfZmllbGRzIiwidXJsX3JlZ2V4IiwiUmVnRXhwIiwiZW1haWxfcmVnZXgiLCJ0cmltIiwiYWRkRXJyb3IiLCJjbGVhckVycm9yIiwiYWxsX2ZpZWxkcyIsInNsaWNlIiwiY29uY2F0IiwiaW52YWxpZCIsImNyZWF0ZUF0dHJpYnV0ZSIsInRhZ05hbWUiLCJuZXh0U2libGluZyIsInNldEF0dHJpYnV0ZU5vZGUiLCJfdmFsaWQiLCJlcnJvcnNfY291bnQiLCJmb3JtcyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFJQSxTQUFTQSxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FGaEgsR0FBSUMsY0FBZSxXQUFlLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFl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QTJCLFdBQXZCQyxTQUFTQyxXQUFnQ0gsUUFDN0NFLFVBQVNFLGlCQUFpQixtQkFBb0IsV0FjMUMsTUFkZ0RKLFFBR3hERixHQUFNTyxLQUFLLFdBQ1AsR0FBSXNQLEdBQVF6UCxTQUFTOEMsaUJBQWlCLFdBQ25DRixRQUFRQyxLQUFLNE0sRUFBTyxTQUFDeEYsR0FDcEIsR0FBSWtELEdBQVdsRCIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zb2xlLmxvZygnbGFuZGluZycpO1xuKGZ1bmN0aW9uKCkge1xuICAgIGNsYXNzIExhbmRnaW5nIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTdGFydCBpbml0aWFsaXphdGlvbiBvbiBkb21sb2FkXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBsZXQgcmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT0gXCJsb2FkaW5nXCIpIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVhZHkudGhlbih0aGlzLmluaXQuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIEFkZGluZyBldmVudHMgYW5kIHByb3BlcnRpZXNcbiAgICAgICAgICovXG4gICAgICAgIGluaXQoKSB7XG4gICAgICAgICAgICB0aGlzLmZpcmVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnRhYmxldCA9IDEyMDA7XG4gICAgICAgICAgICB0aGlzLm1vYmlsZSA9IDc1MDtcbiAgICAgICAgICAgIHRoaXMubWluX2hlaWdodCA9IDQ1MDtcblxuICAgICAgICAgICAgbGV0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKVxuICAgICAgICAgICAgICAgICwgY2xvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xvY2snKTtcblxuICAgICAgICAgICAgJChcIi5sYW5kaW5nXCIpLmZ1bGxwYWdlKHtcbiAgICAgICAgICAgICAgICBzZWN0aW9uU2VsZWN0b3I6IFwiLmxhbmRpbmdfX3NlY3Rpb25cIixcbiAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICAgIGFmdGVyTG9hZDogdGhpcy5oaWRlTG9hZGVyLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgYWZ0ZXJSZW5kZXI6IHRoaXMucmVjb3VudFNsaWRlcy5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIGFmdGVyUmVzaXplOiB0aGlzLnJlY291bnRTbGlkZXMuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBvbkxlYXZlOiAoaW5kZXgsIG5leHRJbmRleCwgZGlyZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0SW5kZXggPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9vcGVuJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlTmF2KCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LnRvZ2dsZSgnaGVhZGVyX29wZW4nLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd05hdigpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRJbmRleCA9PSA2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9jay5jbGFzc0xpc3QudG9nZ2xlKCdjbG9ja192aXNpYmxlJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9jay5jbGFzc0xpc3QudG9nZ2xlKCdjbG9ja192aXNpYmxlJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvb3Rlcl9fdG9wXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnNjcm9sbFRvVG9wLmJpbmQodGhpcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgaGlkZU5hdiAoKSB7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLm5hdiwgXCJmaW5pc2hcIik7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLm5hdiwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwXG4gICAgICAgICAgICAgICAgLCBjb21wbGV0ZTogKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3dOYXYgKCkge1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5uYXYsIFwiZmluaXNoXCIpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5uYXYsIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMFxuICAgICAgICAgICAgICAgICwgYmVnaW46ICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaGlkZUxvYWRlcigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpcmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maXJlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmcC1uYXYnKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZU5hdigpO1xuXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlX19yZXNpemFibGUsIC5zbGlkZV9fY2VudHJlZCcpLCAocmVzaXphYmxlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzaXphYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS1oZWlnaHQnLCByZXNpemFibGUub2Zmc2V0SGVpZ2h0KTtcbiAgICAgICAgICAgICAgICByZXNpemFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXdpZHRoJywgcmVzaXphYmxlLm9mZnNldFdpZHRoKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaW5pdGlhbCBzaXplOiAnLCBbcmVzaXphYmxlLm9mZnNldEhlaWdodCwgcmVzaXphYmxlLm9mZnNldFdpZHRoXSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IGxvYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkZXJfX3dyYXBwZXInKSxcbiAgICAgICAgICAgICAgICBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGxvYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBWZWxvY2l0eShsb2FkZXIsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgcmVjb3VudFNsaWRlcygpIHtcblxuICAgICAgICAgICAgbGV0IHJlc2l6YWJsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVfX3Jlc2l6YWJsZScpXG4gICAgICAgICAgICAgICAgLCBjZW50cmVkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZV9fY2VudHJlZCcpXG4gICAgICAgICAgICAgICAgLCBoZWFkZXJfaGVpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcicpLm9mZnNldEhlaWdodFxuICAgICAgICAgICAgICAgICwgdmlld3BvcnRfaGVpZ2h0XG4gICAgICAgICAgICAgICAgLCB2aWV3cG9ydF93aWR0aFxuICAgICAgICAgICAgICAgICwgYXZhaWxhYmFsZV93aWR0aFxuICAgICAgICAgICAgICAgICwgYXZhaWxhYmFsZV9oZWlnaHRcbiAgICAgICAgICAgICAgICAsIGRlbHRhID0gMjBcbiAgICAgICAgICAgICAgICAsIGNlbGxcbiAgICAgICAgICAgICAgICAsIHNjYWxlID0gMVxuICAgICAgICAgICAgICAgICwgc2NhbGVfeCA9IDFcbiAgICAgICAgICAgICAgICAsIHNjYWxlX3kgPSAxXG4gICAgICAgICAgICAgICAgLCBoZWFkZXJcbiAgICAgICAgICAgICAgICAsIHNsaWRlXG4gICAgICAgICAgICAgICAgLCBib3JkZXJfd2lkdGhcbiAgICAgICAgICAgICAgICAsIGRlbHRhX3lcbiAgICAgICAgICAgICAgICAsIHRyX3lcbiAgICAgICAgICAgICAgICAsIHRyX3hcbiAgICAgICAgICAgICAgICAsIGVsZW1lbnRfd2lkdGhcbiAgICAgICAgICAgICAgICAsIGVsZW1lbnRfaGVpZ2h0O1xuXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoY2VudHJlZHMsIChjZW50cmVkKSA9PiB7XG4gICAgICAgICAgICAgICAgc2xpZGUgPSBjZW50cmVkLmNsb3Nlc3QoJy5zbGlkZScpO1xuICAgICAgICAgICAgICAgIGNlbGwgPSBjZW50cmVkLmNsb3Nlc3QoJy5mcC10YWJsZUNlbGwnKTtcblxuICAgICAgICAgICAgICAgIHZpZXdwb3J0X2hlaWdodCA9IE1hdGgubWluKGNlbGwub2Zmc2V0SGVpZ2h0LCBwYXJzZUludChjZWxsLnN0eWxlLmhlaWdodCwgMTApKTtcbiAgICAgICAgICAgICAgICB2aWV3cG9ydF93aWR0aCA9IGNlbGwub2Zmc2V0V2lkdGg7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50X2hlaWdodCA9IHBhcnNlSW50KGNlbnRyZWQuZ2V0QXR0cmlidXRlKCdkYXRhLWhlaWdodCcpLDEwKTtcblxuICAgICAgICAgICAgICAgIGlmICh2aWV3cG9ydF93aWR0aCA+IDEyMjApe1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50X3dpZHRoID0gMTIzMDtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFfeSA9IDE3MDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZpZXdwb3J0X3dpZHRoID4gNzUwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRfd2lkdGggPSAxMDUwO1xuICAgICAgICAgICAgICAgICAgICBkZWx0YV95ID0gMTcwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRfd2lkdGggPSA0MDA7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRfaGVpZ2h0ID0gOTAwO1xuICAgICAgICAgICAgICAgICAgICBkZWx0YV95ID0gMDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBhdmFpbGFiYWxlX2hlaWdodCA9IHZpZXdwb3J0X2hlaWdodCAtIGhlYWRlcl9oZWlnaHQgLSBkZWx0YSArIGRlbHRhX3k7XG4gICAgICAgICAgICAgICAgYXZhaWxhYmFsZV93aWR0aCA9IHZpZXdwb3J0X3dpZHRoIC0gNDA7XG5cbiAgICAgICAgICAgICAgICBzY2FsZV94ID0gYXZhaWxhYmFsZV9oZWlnaHQvZWxlbWVudF9oZWlnaHQ7XG4gICAgICAgICAgICAgICAgc2NhbGVfeSA9IGF2YWlsYWJhbGVfd2lkdGgvZWxlbWVudF93aWR0aDtcbiAgICAgICAgICAgICAgICBzY2FsZSA9IE1hdGgubWluKHNjYWxlX3gsIHNjYWxlX3kpO1xuXG4gICAgICAgICAgICAgICAgdHJfeSA9IDA7XG4gICAgICAgICAgICAgICAgdHJfeCA9IDA7XG5cbiAgICAgICAgICAgICAgICBpZiAoKGF2YWlsYWJhbGVfaGVpZ2h0IDwgZWxlbWVudF9oZWlnaHQgKSkge1xuICAgICAgICAgICAgICAgICAgICB0cl95ID0gLShlbGVtZW50X2hlaWdodCAtIHZpZXdwb3J0X2hlaWdodCAtIGhlYWRlcl9oZWlnaHQpLzI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAoYXZhaWxhYmFsZV93aWR0aCA8IGVsZW1lbnRfd2lkdGggKVxuICAgICAgICAgICAgICAgICAgICAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAodmlld3BvcnRfd2lkdGggPCAxMjIxKVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgKHZpZXdwb3J0X3dpZHRoID4gNzUwKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyX3kgPSAwO1xuICAgICAgICAgICAgICAgICAgICB0cl94ID0gLShlbGVtZW50X3dpZHRoIC0gdmlld3BvcnRfd2lkdGgpLzI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoIHZpZXdwb3J0X2hlaWdodCA8IDU4MCApIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LmFkZCgnc2xpZGVfaGlkZS1jZW50cmVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGNlbnRyZWQuc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0nKV0gPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc2NhbGUgPCAxICkge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZV9oaWRlLWNlbnRyZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgY2VudHJlZC5zdHlsZVtNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zZm9ybScpXSA9ICd0cmFuc2xhdGVYKCcrdHJfeCsncHgpIHRyYW5zbGF0ZVkoJyt0cl95KydweCkgc2NhbGUoJyArIHNjYWxlICsgJyknO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlX2hpZGUtY2VudHJlZCcpO1xuICAgICAgICAgICAgICAgICAgICBjZW50cmVkLnN0eWxlW01vZGVybml6ci5wcmVmaXhlZCgndHJhbnNmb3JtJyldID0gJ3RyYW5zbGF0ZVgoJyt0cl94KydweCkgdHJhbnNsYXRlWSgnK3RyX3krJ3B4KSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChyZXNpemFibGVzLCAocmVzaXphYmxlKSA9PiB7XG5cbiAgICAgICAgICAgICAgICBzbGlkZSA9IHJlc2l6YWJsZS5jbG9zZXN0KCcuc2xpZGUnKTtcbiAgICAgICAgICAgICAgICBoZWFkZXIgPSByZXNpemFibGUuY2xvc2VzdCgnLnNsaWRlX19kZXRhaWxzJykucXVlcnlTZWxlY3RvcignLnNsaWRlX19oZWFkZXInKTtcbiAgICAgICAgICAgICAgICBjZWxsID0gcmVzaXphYmxlLmNsb3Nlc3QoJy5mcC10YWJsZUNlbGwnKTtcblxuICAgICAgICAgICAgICAgIHZpZXdwb3J0X2hlaWdodCA9IE1hdGgubWluKGNlbGwub2Zmc2V0SGVpZ2h0LCBwYXJzZUludChjZWxsLnN0eWxlLmhlaWdodCwgMTApKTtcbiAgICAgICAgICAgICAgICB2aWV3cG9ydF93aWR0aCA9IGNlbGwub2Zmc2V0V2lkdGg7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50X2hlaWdodCA9IHBhcnNlSW50KHJlc2l6YWJsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaGVpZ2h0JyksMTApO1xuICAgICAgICAgICAgICAgIGVsZW1lbnRfd2lkdGggPSBwYXJzZUludChyZXNpemFibGUuZ2V0QXR0cmlidXRlKCdkYXRhLXdpZHRoJyksMTApO1xuXG4gICAgICAgICAgICAgICAgc2NhbGVfeCA9IGF2YWlsYWJhbGVfaGVpZ2h0L2VsZW1lbnRfaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHNjYWxlX3kgPSBhdmFpbGFiYWxlX3dpZHRoL2VsZW1lbnRfd2lkdGg7XG4gICAgICAgICAgICAgICAgc2NhbGUgPSBNYXRoLm1pbihzY2FsZV94LCBzY2FsZV95KTtcblxuXG4gICAgICAgICAgICAgICAgaWYgKHZpZXdwb3J0X3dpZHRoID4gdGhpcy5tb2JpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGFibGV0IGFuZCBkZXNrdG9wIHJlc29sdXRpb25cblxuICAgICAgICAgICAgICAgICAgICBhdmFpbGFiYWxlX2hlaWdodCA9IHZpZXdwb3J0X2hlaWdodCAtIGhlYWRlcl9oZWlnaHQgLSBkZWx0YTtcbiAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmFsZV93aWR0aCA9IHZpZXdwb3J0X3dpZHRoLzIgLSA0MDtcblxuICAgICAgICAgICAgICAgICAgICBzY2FsZV94ID0gYXZhaWxhYmFsZV9oZWlnaHQvZWxlbWVudF9oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlX3kgPSBhdmFpbGFiYWxlX3dpZHRoL2VsZW1lbnRfd2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlID0gTWF0aC5taW4oc2NhbGVfeCwgc2NhbGVfeSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGF2YWlsYWJhbGVfaGVpZ2h0IDwgdGhpcy5taW5faGVpZ2h0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5jbGFzc0xpc3QuYWRkKCdzbGlkZV9oaWRlLXJlc2l6YWJsZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHNjYWxlIDwgMSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVfaGlkZS1yZXNpemFibGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZS5zdHlsZVtNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zZm9ybScpXSA9ICdzY2FsZSgnICsgc2NhbGUgKyAnKSc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbGlkZS5jbGFzc0xpc3QuY29udGFpbnMoJ3NsaWRlX3JpZ2h0Jykpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcl93aWR0aCA9IChwYXJzZUludChyZXNpemFibGUuZ2V0QXR0cmlidXRlKCdkYXRhLXdpZHRoJyksMTApKzIwKSpzY2FsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIuc3R5bGUuYm9yZGVyTGVmdFdpZHRoID0gYm9yZGVyX3dpZHRoICsgJ3B4JztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2aWV3cG9ydF93aWR0aCA+IHRoaXMudGFibGV0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0YWJsZXQgcmVzb2x1dGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGUuc3R5bGUubWFyZ2luUmlnaHQgPSAoMjAgKyBoZWFkZXIub2Zmc2V0V2lkdGgvMiAtIGJvcmRlcl93aWR0aCkgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJfd2lkdGggPSAocGFyc2VJbnQocmVzaXphYmxlLmdldEF0dHJpYnV0ZSgnZGF0YS13aWR0aCcpLDEwKSsyMCkqc2NhbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnN0eWxlLmJvcmRlclJpZ2h0V2lkdGggPSBib3JkZXJfd2lkdGggKyAncHgnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpZXdwb3J0X3dpZHRoID4gdGhpcy50YWJsZXQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRhYmxldCByZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZS5zdHlsZS5tYXJnaW5MZWZ0ID0gKDIwICsgaGVhZGVyLm9mZnNldFdpZHRoLzIgLSBib3JkZXJfd2lkdGgpICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlX2hpZGUtcmVzaXphYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGUucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbW9iaWxlIHJlc29sdXRpb25cbiAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmFsZV9oZWlnaHQgPSB2aWV3cG9ydF9oZWlnaHQgLSBoZWFkZXJfaGVpZ2h0IC0gaGVhZGVyLm9mZnNldEhlaWdodCAtIDkwIC0gMjA7XG4gICAgICAgICAgICAgICAgICAgIGF2YWlsYWJhbGVfd2lkdGggPSB2aWV3cG9ydF93aWR0aCAtIDQwO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhaDogJywgYXZhaWxhYmFsZV9oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYXc6ICcsIGF2YWlsYWJhbGVfd2lkdGgsIGVsZW1lbnRfd2lkdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlX3ggPSBhdmFpbGFiYWxlX2hlaWdodC9lbGVtZW50X2hlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVfeSA9IGF2YWlsYWJhbGVfd2lkdGgvZWxlbWVudF93aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgc2NhbGUgPSBNYXRoLm1pbihzY2FsZV94LCBzY2FsZV95KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYXZhaWxhYmFsZV93aWR0aCA8IGVsZW1lbnRfd2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZS5zdHlsZS5tYXJnaW5MZWZ0ID0gLSAoKChlbGVtZW50X3dpZHRoIC0gYXZhaWxhYmFsZV93aWR0aCkvMikgLSAyMCkgKyBcInB4XCJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZS5zdHlsZS5tYXJnaW5MZWZ0ID0gJ2F1dG8nO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGF2YWlsYWJhbGVfaGVpZ2h0IDwgdGhpcy5taW5faGVpZ2h0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2hpZGRpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLmNsYXNzTGlzdC5hZGQoJ3NsaWRlX2hpZGUtcmVzaXphYmxlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc2NhbGUgPCAxICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZV9oaWRlLXJlc2l6YWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlLnN0eWxlW01vZGVybml6ci5wcmVmaXhlZCgndHJhbnNmb3JtJyldID0gJ3NjYWxlKCcgKyBzY2FsZSArICcpJztcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVfaGlkZS1yZXNpemFibGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gbGV0IGNsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsb2NrJyksXG4gICAgICAgICAgICAvLyAgICAgY2xvY2tfc2xpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZnAtc2xpZGVzQ29udGFpbmVyJyksXG4gICAgICAgICAgICAvLyAgICAgdGl0bGUgPSBjbG9ja19zbGlkZS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVfX3RpdGxlJyksXG4gICAgICAgICAgICAvLyAgICAgdGV4dCA9IGNsb2NrX3NsaWRlLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZV9fdGV4dCcpLFxuICAgICAgICAgICAgLy8gICAgIGhlaWdodCA9IE1hdGgubWluKGNsb2NrX3NsaWRlLm9mZnNldEhlaWdodCAtIHRpdGxlLm9mZnNldEhlaWdodCAtIHRleHQub2Zmc2V0SGVpZ2h0ICsgOTAsIDcwMiksXG4gICAgICAgICAgICAvLyAgICAgcGVyYyA9IGhlaWdodCAvIDcwMjtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBpZiAoY2xvY2tfc2xpZGUub2Zmc2V0V2lkdGggPD0gNzUwKSB7XG4gICAgICAgICAgICAvLyAgICAgY2xvY2suc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0nKV0gPSAnc2NhbGUoJyArIHBlcmMgKyAnKSc7XG4gICAgICAgICAgICAvLyAgICAgY2xvY2suc3R5bGUubWFyZ2luID0gXCIwIDAgMCAtXCIgKyAoY2xvY2sub2Zmc2V0V2lkdGggKiBwZXJjKSAqIDAuMzMgKyBcInB4XCI7XG4gICAgICAgICAgICAvLyAgICAgLy8gY2xvY2suc3R5bGUuYmFja2dyb3VuZCA9ICdyZWQnO1xuICAgICAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgICAgIC8vICAgICBjbG9jay5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHNjcm9sbFRvVG9wKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5tb3ZlVG8oMSwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmV3IExhbmRnaW5nO1xufSkoKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuY29uc29sZS5sb2coJ2xheW91dCcpO1xuKGZ1bmN0aW9uKCkge1xuICAgIHdpbmRvdy5tb2JpbGVBbmRUYWJsZXRjaGVjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2hlY2sgPSBmYWxzZTtcbiAgICAgICAgKGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIGlmICgvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vfGFuZHJvaWR8aXBhZHxwbGF5Ym9va3xzaWxrL2kudGVzdChhKSB8fCAvMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1xcLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXxcXC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKGV8dil3fGJ1bWJ8YndcXC0obnx1KXxjNTVcXC98Y2FwaXxjY3dhfGNkbVxcLXxjZWxsfGNodG18Y2xkY3xjbWRcXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcXC1zfGRldml8ZGljYXxkbW9ifGRvKGN8cClvfGRzKDEyfFxcLWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseShcXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcXC01fGdcXC1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXFwtKG18cHx0KXxoZWlcXC18aGkocHR8dGEpfGhwKCBpfGlwKXxoc1xcLWN8aHQoYyhcXC18IHxffGF8Z3xwfHN8dCl8dHApfGh1KGF3fHRjKXxpXFwtKDIwfGdvfG1hKXxpMjMwfGlhYyggfFxcLXxcXC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XFwvKXxrbG9ufGtwdCB8a3djXFwtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcXC8oa3xsfHUpfDUwfDU0fFxcLVthLXddKXxsaWJ3fGx5bnh8bTFcXC13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bVxcLWNyfG1lKHJjfHJpKXxtaShvOHxvYXx0cyl8bW1lZnxtbygwMXwwMnxiaXxkZXxkb3x0KFxcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXFwtfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3xcXC0oWzEtOF18YykpfHBoaWx8cGlyZXxwbChheXx1Yyl8cG5cXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcXC1nfHFhXFwtYXxxYygwN3wxMnwyMXwzMnw2MHxcXC1bMi03XXxpXFwtKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aFxcLXxvb3xwXFwtKXxzZGtcXC98c2UoYyhcXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXFwtfHNoYXJ8c2llKFxcLXxtKXxza1xcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFxcLXx2XFwtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsXFwtfHRkZ1xcLXx0ZWwoaXxtKXx0aW1cXC18dFxcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXFwtfG0zfG01KXx0eFxcLTl8dXAoXFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFxcLXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoXFwtfCApfHdlYmN8d2hpdHx3aShnIHxuY3xudyl8d21sYnx3b251fHg3MDB8eWFzXFwtfHlvdXJ8emV0b3x6dGVcXC0vaS50ZXN0KGEuc3Vic3RyKDAsIDQpKSkgY2hlY2sgPSB0cnVlXG4gICAgICAgIH0pKG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCB3aW5kb3cub3BlcmEpO1xuICAgICAgICByZXR1cm4gY2hlY2s7XG4gICAgfTtcblxuICAgIHdpbmRvdy5pc01vYmlsZSA9IHtcbiAgICAgICAgQW5kcm9pZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gL0FuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICB9LFxuICAgICAgICBCbGFja0JlcnJ5OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAvQmxhY2tCZXJyeS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICAgIH0sXG4gICAgICAgIGlPUzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gL2lQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICB9LFxuICAgICAgICBXaW5kb3dzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAvSUVNb2JpbGUvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICB9LFxuICAgICAgICBhbnk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIChpc01vYmlsZS5BbmRyb2lkKCkgfHwgaXNNb2JpbGUuQmxhY2tCZXJyeSgpIHx8IGlzTW9iaWxlLmlPUygpIHx8IGlzTW9iaWxlLldpbmRvd3MoKSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY2xhc3MgTGF5b3V0IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTdGFydCBpbml0aWFsaXphdGlvbiBvbiBkb21sb2FkXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBsZXQgcmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT0gXCJsb2FkaW5nXCIpIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVhZHkudGhlbih0aGlzLmluaXQuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIEFkZGluZyBldmVudHMgYW5kIHByb3BlcnRpZXNcbiAgICAgICAgICovXG4gICAgICAgIGluaXQoKSB7XG4gICAgICAgICAgICBpZiAod2luZG93LmlzTW9iaWxlLkFuZHJvaWQoKSkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdhbmRyb2lkJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5pc01vYmlsZS5pT1MoKSkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdpb3MnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAod2luZG93Lm1vYmlsZUFuZFRhYmxldGNoZWNrKCkpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgndW5rbm93bi1tb2JpbGUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2Rlc2t0b3AnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdhbmRyb2lkJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmV3IExheW91dDtcbn0pKCk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbmNvbnNvbGUubG9nKCdNZW51Jyk7XG4oZnVuY3Rpb24gKCkge1xuICAgIGNsYXNzIE1lbnUge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFN0YXJ0IGluaXRpYWxpemF0aW9uIG9uIGRvbWxvYWRcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgICAgICAgICBsZXQgcmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+e1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9IFwibG9hZGluZ1wiKSByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVhZHkudGhlbih0aGlzLmluaXQuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIEFkZGluZyBldmVudHMgYW5kIHByb3BlcnRpZXNcbiAgICAgICAgICovXG4gICAgICAgIGluaXQgKCkge1xuICAgICAgICAgICAgbGV0IGJhY2tfYnV0dG9ucyA9ICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubG9naW5fX2JhY2snKVxuICAgICAgICAgICAgICAgICwgbG9naW5fYnV0dG9ucyA9ICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubG9naW5fX2xvZ2luLWJ1dHRvbiwgLmxvZ2luX3N1Y2Nlc3MgLmxvZ2luX19zdWJtaXQnKVxuICAgICAgICAgICAgICAgICwgbW9iaWxlX3BvcHVwX2J1dHRvbnMgPSAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudV9faW50ZXJwcmV0ZXIsIC5oZWFkZXJfX2ludGVycHJldGVyJyk7XG5cbiAgICAgICAgICAgIHRoaXMubWVudV9wb3B1cF9vcGVuID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMubG9naW5fYnV0dG9uID0gICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnVfX2xvZ2luJyk7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyX2J1dHRvbiA9ICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51X19yZWdpc3RlcicpO1xuXG4gICAgICAgICAgICB0aGlzLnN0ZXAxID0gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9yZWdpc3Rlci1zdGVwLTEnKTtcbiAgICAgICAgICAgIHRoaXMuc3RlcDFfZm9ybSA9ICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX3JlZ2lzdGVyLXN0ZXAtMSBmb3JtLmxvZ2luX19mb3JtJyk7XG4gICAgICAgICAgICB0aGlzLnN0ZXAyID0gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9yZWdpc3Rlci1zdGVwLTInKTtcbiAgICAgICAgICAgIHRoaXMuc3RlcDJfZm9ybSA9ICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX3JlZ2lzdGVyLXN0ZXAtMiBmb3JtLmxvZ2luX19mb3JtJyk7XG5cbiAgICAgICAgICAgIHRoaXMubW9iaWxlX3BvcHVwID0gICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX21vYmlsZScpO1xuICAgICAgICAgICAgdGhpcy5tb2JpbGVfcG9wdXBfY2xvc2UgPSAgICAgICB0aGlzLm1vYmlsZV9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJyk7XG5cbiAgICAgICAgICAgIHRoaXMud3JhcHBlciA9ICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnVfX3dyYXBwZXInKTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyX3JlZ2lzdGVyX2J1dHRvbiA9ICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fbGlua19yZWdpc3RlcicpO1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJfbG9naW5fYnV0dG9uID0gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19saW5rX2xvZ2luJyk7XG4gICAgICAgICAgICB0aGlzLnJlY292ZXJ5X2J1dHRvbiA9ICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9fcGFzc3dvcmQtcmVjb3ZlcnknKTtcbiAgICAgICAgICAgIHRoaXMubGlnaHRib3ggPSAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keT4ubGlnaHRib3gnKTtcbiAgICAgICAgICAgIHRoaXMubG9naW5fcG9wdXAgPSAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX2xvZ2luJyk7XG4gICAgICAgICAgICB0aGlzLnJlY292ZXJ5ID0gICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9yZWNvdmVyeScpO1xuICAgICAgICAgICAgdGhpcy5wYXNzd29yZCA9ICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW5fcGFzc3dvcmQnKTtcbiAgICAgICAgICAgIHRoaXMucmVjb3ZlcnlfZm9ybSA9ICAgICAgICAgICAgdGhpcy5yZWNvdmVyeS5xdWVyeVNlbGVjdG9yKCcubG9naW5fX2Zvcm0nKTtcbiAgICAgICAgICAgIHRoaXMucGFzc3dvcmRfZm9ybSA9ICAgICAgICAgICAgdGhpcy5wYXNzd29yZC5xdWVyeVNlbGVjdG9yKCcubG9naW5fX2Zvcm0nKTtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JfbWVzc2FnZSA9ICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX2Vycm9yJyk7XG4gICAgICAgICAgICB0aGlzLmVtYWlsID0gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9lbWFpbCcpO1xuICAgICAgICAgICAgdGhpcy5zdWNjZXNzID0gICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW5fc3VjY2VzcycpO1xuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW5fb3BlbicpO1xuICAgICAgICAgICAgdGhpcy5sYXN0ID0gW107XG5cbiAgICAgICAgICAgIHRoaXMubG9naW5fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vcGVuTG9naW5Gb3JtLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5yZWNvdmVyeV9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5SZWNvdmVyeS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMubGlnaHRib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlQWxsLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5SZWdpc3Rlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyX2xvZ2luX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3BlbkxvZ2luT3V0ZXIuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcl9yZWdpc3Rlcl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5SZWdpc3Rlck91dGVyLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5tb2JpbGVfcG9wdXBfY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlTW9iaWxlUG9wdXAuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgICAgIHRoaXMucmVjb3ZlcnlfZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnNlbmREYXRhLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5wYXNzd29yZF9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuc2VuZERhdGEuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnN0ZXAxX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5vcGVuTmV4dC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuc3RlcDJfZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnNlbmREYXRhLmJpbmQodGhpcykpO1xuXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZXBvc1BvcHVwLmJpbmQodGhpcykpO1xuXG4gICAgICAgICAgICAkKCcubG9naW4gc2VsZWN0Jykuc2VsZWN0MigpO1xuXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwobW9iaWxlX3BvcHVwX2J1dHRvbnMsIChidXR0b24pID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5Nb2JpbGVQb3B1cC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoYmFja19idXR0b25zLCAoYnV0dG9uKSA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5nb2JhY2suYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGxvZ2luX2J1dHRvbnMsIChidXR0b24pID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5Mb2dpbklubmVyLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuV2ViUlRDU3VwcG9ydCA9ICFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCduby1wZWVyY29ubmVjdGlvbicpO1xuXG5cbiAgICAgICAgICAgIGlmKCF0aGlzLldlYlJUQ1N1cHBvcnQpIHtcblxuICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdmb3JtLmxvZ2luX19mb3JtIGlucHV0LCBmb3JtLmxvZ2luX19mb3JtIGJ1dHRvbiwgZm9ybS5sb2dpbl9fZm9ybSBzZWxlY3QnKSwgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Zvcm0ubG9naW5fX2Zvcm0nKSwgKGZvcm0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5jbG9zZXN0KCcubG9naW4nKS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfYnJvd3NlcicpLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX2Jyb3dzZXInKSwgKHBvcHVwKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1BvcHVwKHBvcHVwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9wZW5OZXh0IChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0ZXAxX2Zvcm0udmFsaWRhdGUoKSA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5zdGVwMik7XG4gICAgICAgIH1cblxuICAgICAgICByZXBvc1BvcHVwIChldmVudCkge1xuICAgICAgICAgICAgaWYoIXRoaXMubWVudV9wb3B1cF9vcGVuKXtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1vYmlsZV9wb3B1cC5zdHlsZVtNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zZm9ybScpXSA9IFwidHJhbnNsYXRlWShcIiArIHRoaXMubW9iaWxlX3BvcHVwLm9mZnNldEhlaWdodCArIFwicHgpXCI7XG4gICAgICAgIH1cblxuICAgICAgICBjbG9zZU1vYmlsZVBvcHVwICgpIHtcbiAgICAgICAgICAgIGlmKCF0aGlzLm1lbnVfcG9wdXBfb3Blbil7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tZW51X3BvcHVwX29wZW4gPSBmYWxzZTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5tb2JpbGVfcG9wdXAsIFwic3RvcFwiKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubW9iaWxlX3BvcHVwLCB7dHJhbnNsYXRlWTogMH0sIDI1MCk7XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubW9iaWxlX3BvcHVwX2J1dHRvbiwgXCJzdG9wXCIpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5tb2JpbGVfcG9wdXBfYnV0dG9uLCB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTBcbiAgICAgICAgICAgICAgICAsIGJlZ2luOiAoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2JpbGVfcG9wdXBfYnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBvcGVuTW9iaWxlUG9wdXAgKCkge1xuICAgICAgICAgICAgaWYodGhpcy5tZW51X3BvcHVwX29wZW4pe1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWVudV9wb3B1cF9vcGVuID0gdHJ1ZTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5tb2JpbGVfcG9wdXAsIFwic3RvcFwiKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubW9iaWxlX3BvcHVwLCB7dHJhbnNsYXRlWTogdGhpcy5tb2JpbGVfcG9wdXAub2Zmc2V0SGVpZ2h0ICsgXCJweFwifSwgMjUwKTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5tb2JpbGVfcG9wdXBfYnV0dG9uLCBcInN0b3BcIik7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLm1vYmlsZV9wb3B1cF9idXR0b24sIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgICwgY29tcGxldGU6ICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vYmlsZV9wb3B1cF9idXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgc2hvd1BvcHVwIChwb3B1cCkge1xuICAgICAgICAgICAgaWYgKHBvcHVwLnNob3cgIT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICBwb3B1cC5zaG93KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5zaG93UG9wdXAuYmluZCh0aGlzLCBwb3B1cCksIDUwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gU2Nyb2xsIHRvIGZpcnN0IHNsaWRlIGFuZCBvcGVuIGxvZ2luIGZvcm1cbiAgICAgICAgICovXG4gICAgICAgIG9wZW5Mb2dpbk91dGVyIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICQuZm4uZnVsbHBhZ2UubW92ZVRvKDEsIDApO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgICAgIHRoaXMubG9naW5fYnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICB9LCA4MDApXG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFNjcm9sbCB0byBmaXJzdCBzbGlkZSBhbmQgb3BlbiByZWdpc3RlciBmb3JtXG4gICAgICAgICAqL1xuICAgICAgICBvcGVuUmVnaXN0ZXJPdXRlciAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLm1vdmVUbygxLCAwKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyX2J1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgfSwgODAwKVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTZW5kIHJlZ2lzdHJhdGlvbiBkYXRhIGFuZCBzaG93IG1lc3NhZ2VcbiAgICAgICAgICovXG4gICAgICAgIHNlbmREYXRhIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGxldCBmb3JtID0gZXZlbnQuY3VycmVudFRhcmdldDtcblxuICAgICAgICAgICAgaWYgKGZvcm0udmFsaWRhdGUoKSA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBsZXQgRE9ORSA9IDRcbiAgICAgICAgICAgICAgICAsIE9LID0gMjAwXG4gICAgICAgICAgICAgICAgLCBtZXNzYWdlXG4gICAgICAgICAgICAgICAgLCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICAgICAgICAgICAgICAgICwgbG9hZGVkID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB4aHIub3BlbignUE9TVCcsIGZvcm0uZ2V0QXR0cmlidXRlKCdhY3Rpb24nKSk7XG4gICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKG5ldyBGb3JtRGF0YShmb3JtKSk7XG4gICAgICAgICAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IERPTkUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY292ZXJ5X2Zvcm0ucmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gT0spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBwYXJzZUludCh4aHIuc3RhdHVzLCAxMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB4aHIuc3RhdHVzVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZm9ybS5oYXNBdHRyaWJ1dGUoJ2RhdGEtY2hlY2snKSkge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gdGhpcy5zaG93Q2hlY2tNZXNzYWdlLmJpbmQodGhpcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IHRoaXMuc2hvd1N1Y2Nlc3NNZXNzYWdlLmJpbmQodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbG9hZGVkLnRoZW4obWVzc2FnZSkuY2F0Y2godGhpcy5zaG93RXJyb3JNZXNzYWdlLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgIC8vIGxvYWRlZC50aGVuKG1lc3NhZ2UpLmNhdGNoKG1lc3NhZ2UpO1xuXG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3I6ICcsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFNob3cgY2hlY2sgZW1haWwgbWVzc2FnZVxuICAgICAgICAgKi9cbiAgICAgICAgc2hvd0NoZWNrTWVzc2FnZSAoKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5Gb3JtKHRoaXMuZW1haWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTaG93IHN1Y2Nlc3MgbWVzc2FnZVxuICAgICAgICAgKi9cbiAgICAgICAgc2hvd1N1Y2Nlc3NNZXNzYWdlICgpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5zdWNjZXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gT3BlbiBsb2dpblxuICAgICAgICAgKi9cbiAgICAgICAgb3BlbkxvZ2luSW5uZXIgKCkge1xuICAgICAgICAgICAgdGhpcy5vcGVuRm9ybSh0aGlzLmxvZ2luX3BvcHVwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gU2hvdyBtZXNzYWdlXG4gICAgICAgICAqL1xuICAgICAgICBzaG93RXJyb3JNZXNzYWdlIChyZWFzb24pIHtcbiAgICAgICAgICAgIHRoaXMubGFzdCA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVhc29uLmNvZGUsICdSZXNwb25jZSBzdGF0dXMgY29kZTogJyArIHJlYXNvbi5jb2RlICsgJy4gJyArIHJlYXNvbi5tZXNzYWdlICsgJy4nKTtcbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5lcnJvcl9tZXNzYWdlLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gT3BlbiBsYXN0IHBhZ2VcbiAgICAgICAgICovXG4gICAgICAgIGdvYmFjayAoKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5Gb3JtKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFNob3cgZW1haWwgc2VudCB3YXJuaW5nXG4gICAgICAgICAqL1xuICAgICAgICBlbWFpbEhhdmVTZW5kICgpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5lbWFpbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIE9wZW4gcmVnaXN0ZXIgZm9ybVxuICAgICAgICAgKi9cbiAgICAgICAgb3BlblJlZ2lzdGVySW5uZXIgKCkge1xuICAgICAgICAgICAgdGhpcy5vcGVuRm9ybSh0aGlzLnN0ZXAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gT3BlbiByZWdpc3RlciBmb3JtXG4gICAgICAgICAqL1xuICAgICAgICBvcGVuUmVnaXN0ZXIgKCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5zZXRBbGxvd1Njcm9sbGluZyhmYWxzZSk7XG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLnNldEtleWJvYXJkU2Nyb2xsaW5nKGZhbHNlKTtcblxuICAgICAgICAgICAgbGV0IHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICByaWdodDogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMuc3RlcDEsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMuc3RlcDE7XG5cbiAgICAgICAgICAgIHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBiZWdpbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saWdodGJveC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5saWdodGJveCwgcHJvcHMsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBPcGVuIHJlY292ZXJ5IGZvcm1zXG4gICAgICAgICAqL1xuICAgICAgICBvcGVuUmVjb3ZlcnkgKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgaWYoIXRoaXMuV2ViUlRDU3VwcG9ydCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5yZWNvdmVyeSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIE9wZW4gcmVjb3ZlcnkgZm9ybXNcbiAgICAgICAgICogQHBhcmFtIGZvcm0ge25vZGV9IEZvcm0geW91IHdhbnQgdG8gb3BlblxuICAgICAgICAgKiBAcGFyYW0gYmFjayB7bm9kZX0gRm9ybSB3aGljaCB5b3Ugd2FudCB0byBvcGVuIHdoZW4gdXNlciBwcmVzcyBiYWNrLCBieSBkZWZhdWx0IOKAlMKgbGFzdCBmb3JtIG9wZW5lZFxuICAgICAgICAgKi9cbiAgICAgICAgb3BlbkZvcm0gKHBvcHVwLCBkb250X3NhdmUpIHtcbiAgICAgICAgICAgICQuZm4uZnVsbHBhZ2Uuc2V0QWxsb3dTY3JvbGxpbmcoZmFsc2UpO1xuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5zZXRLZXlib2FyZFNjcm9sbGluZyhmYWxzZSk7XG5cbiAgICAgICAgICAgIGxldCBmb3JtID0gdGhpcy5jdXJyZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbiAgICAgICAgICAgIGlmIChmb3JtICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57Zm9ybS5jbGVhcigpO30sIDI1MCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgcG9wdXAgPT0gXCJ1bmRlZmluZWRcIiAmJiB0aGlzLmxhc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHBvcHVwID0gdGhpcy5sYXN0LnBvcCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcG9wdXAgPT0gXCJ1bmRlZmluZWRcIiAmJiB0aGlzLmxhc3QubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlQWxsKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb250X3NhdmUgIT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdC5wdXNoKHRoaXMuY3VycmVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvcm0gPSBwb3B1cC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG4gICAgICAgICAgICBpZiAoZm9ybSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsZWFyaW5nJyk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e2Zvcm0uY2xlYXIoKTt9LCAyNTApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgcHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtIHRoaXMuY3VycmVudC5vZmZzZXRXaWR0aCArIFwicHhcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMuY3VycmVudCwgcHJvcHMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgcHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVmVsb2NpdHkocG9wdXAsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IHBvcHVwO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBDbG9zZSBhbGwgZm9ybXNcbiAgICAgICAgICovXG4gICAgICAgIGNsb3NlQWxsICgpIHtcblxuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5zZXRBbGxvd1Njcm9sbGluZyh0cnVlKTtcbiAgICAgICAgICAgICQuZm4uZnVsbHBhZ2Uuc2V0S2V5Ym9hcmRTY3JvbGxpbmcodHJ1ZSk7XG5cbiAgICAgICAgICAgIGxldCBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC0gdGhpcy5jdXJyZW50Lm9mZnNldFdpZHRoICsgXCJweFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5jdXJyZW50LCBwcm9wcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSBudWxsO1xuXG4gICAgICAgICAgICBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlnaHRib3guc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5saWdodGJveCwgcHJvcHMsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICB0aGlzLmNsZWFyQWxsKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjbGVhckFsbCAoKSB7XG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpLCAoZm9ybSkgPT4ge1xuICAgICAgICAgICAgICAgIGZvcm0uY2xlYXIoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKCcubG9naW4gc2VsZWN0Jykuc2VsZWN0MihcImRlc3Ryb3lcIik7XG4gICAgICAgICAgICAkKCcubG9naW4gc2VsZWN0Jykuc2VsZWN0MigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBPcGVuIGxvZ2luIHBvcHVwXG4gICAgICAgICAqL1xuICAgICAgICBvcGVuTG9naW5Gb3JtIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5zZXRBbGxvd1Njcm9sbGluZyhmYWxzZSk7XG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLnNldEtleWJvYXJkU2Nyb2xsaW5nKGZhbHNlKTtcblxuICAgICAgICAgICAgbGV0IHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICByaWdodDogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubG9naW5fcG9wdXAsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMubG9naW5fcG9wdXA7XG5cbiAgICAgICAgICAgIHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBiZWdpbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saWdodGJveC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5saWdodGJveCwgcHJvcHMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmV3IE1lbnU7XG59KSgpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zb2xlLmxvZygncG9wdXAnKTtcbihmdW5jdGlvbiAoKSB7XG5cbiAgICAvKipcbiAgICAgKiBAY2xhc3MgUG9wdXBcbiAgICAgKi9cbiAgICBjbGFzcyBQb3B1cCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gQWRkaW5nIGV2ZW50cyBhbmQgcHJvcGVydGllc1xuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0cnVjdG9yIChwb3B1cCkge1xuICAgICAgICAgICAgdGhpcy5wb3B1cCA9IHBvcHVwO1xuICAgICAgICAgICAgcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMucG9wdXAuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBvcHVwLm9wZW4gPSB0aGlzLm9wZW4uYmluZCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucG9wdXAuc2hvdyA9IHRoaXMuc2hvdy5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuamFtcGluZyA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgc2hvdyAoKSB7XG4gICAgICAgICAgICB0aGlzLnBvcHVwLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICB0aGlzLnBvcHVwLnN0eWxlW01vZGVybml6ci5wcmVmaXhlZCgndHJhbnNmb3JtJyldID0gXCJyb3RhdGVYKDApXCI7XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBoaWRlICgpIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXAuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgdGhpcy5wb3B1cC5zdHlsZVtNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zZm9ybScpXSA9IFwicm90YXRlWCgxODBkZWcpXCI7XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9IGZhbHNlO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwgXCJzdG9wXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xvc2UgKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuamFtcGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCBcImZpbmlzaFwiKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIHtcbiAgICAgICAgICAgICAgICByb3RhdGVYOiBcIjEyMGRlZ1wiXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMFxuICAgICAgICAgICAgICAgICwgYmVnaW46ICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICwgY29tcGxldGU6ICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgb3BlbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5qYW1waW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5qdW1wKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5qYW1waW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIFwiZmluaXNoXCIpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge1xuICAgICAgICAgICAgICAgIHJvdGF0ZVg6IFwiMGRlZ1wiXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMFxuICAgICAgICAgICAgICAgICwgYmVnaW46ICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICwgY29tcGxldGU6ICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCB7cm90YXRlWDogXCIyMGRlZ1wifSwgMTUwKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIHtyb3RhdGVYOiBcIjBkZWdcIn0sIDEyNSk7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCB7cm90YXRlWDogXCIxMGRlZ1wifSwgMjAwKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIHtyb3RhdGVYOiBcIjBkZWdcIn0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjoxNzVcbiAgICAgICAgICAgICAgICAsIGNvbXBsZXRlOiAoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5qYW1waW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGp1bXAgKCkge1xuICAgICAgICAgICAgdGhpcy5qYW1waW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIFwiZmluaXNoXCIpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge3JvdGF0ZVg6IFwiMzVkZWdcIn0sIDE1MCk7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCB7cm90YXRlWDogXCIwZGVnXCJ9LCAxMjUpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge3JvdGF0ZVg6IFwiMjBkZWdcIn0sIDIwMCk7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCB7cm90YXRlWDogXCIwZGVnXCJ9LCAxNzUpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge3JvdGF0ZVg6IFwiMTVkZWdcIn0sIDI1MCk7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCB7cm90YXRlWDogXCIwZGVnXCJ9LCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDIyNVxuICAgICAgICAgICAgICAgICwgY29tcGxldGU6ICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmphbXBpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICB9XG5cblxuICAgIGxldCByZWFkeSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT57XG4gICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9IFwibG9hZGluZ1wiKSByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKT0+IHJlc29sdmUoKSk7XG4gICAgfSk7XG5cbiAgICByZWFkeS50aGVuKCgpPT57XG4gICAgICAgIFtdLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfYnJvd3NlcicpLCAocG9wdXApID0+IHtcbiAgICAgICAgICAgIG5ldyBQb3B1cChwb3B1cCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG59KSgpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4oZnVuY3Rpb24oKSB7XG5cbiAgICAvKipcbiAgICAgKiBAY2xhc3NkZXNjIENsYXNzIHJlcHJlc2VudGluZyBmb3JtIHZhbGlkYXRpb25cbiAgICAgKiBAY2xhc3NcbiAgICAgKi9cblxuICAgIGNsYXNzIFZhbGlkYXRpb24ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIEFkZGluZyBldmVudHMgYW5kIHByb3BlcnRpZXNcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3Rvcihmb3JtKSB7XG4gICAgICAgICAgICB0aGlzLmZvcm0gPSBmb3JtO1xuICAgICAgICAgICAgZm9ybS5zZXRBdHRyaWJ1dGUoXCJub3ZhbGlkYXRlXCIsIFwibm92YWxpZGF0ZVwiKTtcbiAgICAgICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy52YWxpZGF0ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIGZvcm0udmFsaWRhdGUgPSB0aGlzLnZhbGlkYXRlLmJpbmQodGhpcyk7XG4gICAgICAgICAgICBmb3JtLmNsZWFyID0gdGhpcy5jbGVhci5iaW5kKHRoaXMpO1xuXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0ge1xuICAgICAgICAgICAgICAgIGVuOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBcIlJlcXVpcmVkIGZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgLCBlbWFpbDogXCJXcm9uZyBlbWFpbCBmb3JtYXRcIlxuICAgICAgICAgICAgICAgICAgICAsIGVxdWFsOiBcIlBhc3N3b3JkIGZpZWxkcyBzaG91bGQgYmUgZXF1YWxcIlxuICAgICAgICAgICAgICAgICAgICAsIHVybDogXCJXcm9uZyB1cmwgZm9ybWF0XCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLCBydToge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogXCLQn9C+0LvQtSDQvtCx0Y/Qt9Cw0YLQtdC70YzQvdC+INC00LvRjyDQt9Cw0L/QvtC70L3QtdC90LjRj1wiXG4gICAgICAgICAgICAgICAgICAgICwgZW1haWw6IFwi0J/RgNC+0LLQtdGA0YzRgtC1INGE0L7RgNC80LDRgiBlbWFpbFwiXG4gICAgICAgICAgICAgICAgICAgICwgZXF1YWw6IFwi0J/QsNGA0L7Qu9C4INC00L7Qu9C20L3RiyDRgdC+0LLQv9Cw0LTQsNGC0YxcIlxuICAgICAgICAgICAgICAgICAgICAsIHVybDogXCLQn9GA0L7QstC10YDRjNGC0LUg0YTQvtGA0LzQsNGCIFVSTFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBSZXNldCBmb3JtIGFuZCBjbGVhciBlcnJvcnNcbiAgICAgICAgICovXG4gICAgICAgIGNsZWFyICgpIHtcbiAgICAgICAgICAgIHRoaXMuZm9ybS5yZXNldCgpO1xuICAgICAgICAgICAgbGV0IHNlbGVjdG9ycyA9ICQodGhpcy5mb3JtKS5maW5kKCdzZWxlY3QnKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3RvcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNlbGVjdG9ycy5zZWxlY3QyKFwiZGVzdHJveVwiKTtcbiAgICAgICAgICAgICAgICBzZWxlY3RvcnMuc2VsZWN0MigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgICAgICAgbGV0IGVycm9ycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtLWVycm9yJyksXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXZhbGlkXSwgW2RhdGEtaW52YWxpZF0nKTtcblxuICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChlcnJvcnMsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChmaWVsZHMsIChmaWVsZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtaW52YWxpZCcpO1xuICAgICAgICAgICAgICAgICAgICBmaWVsZC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtdmFsaWQnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSwxMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBSZW1vdmUgZXJyb3IgbWVzc2FnZSBhZnRlciBlbGVtZW50XG4gICAgICAgICAqIEBwYXJhbSB7Tm9kZX0gZWxlbWVudCAtIGVsZW1lbnQsIGFmdGVyIHdoaWNoIHdlIHdpbGwgYWRkIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgLSBlcnJvciBtZXNzYWdlXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBwZSAtIGVycm9yIHR5cGVcbiAgICAgICAgICovXG4gICAgICAgIGFkZEVycm9yKGVsZW1lbnQsIG1lc3NhZ2UsIHR5cGUpIHtcblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuZm9ybS1lcnJvcltkYXRhLXR5cGU9XCInICsgdHlwZSArICdcIl0nKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGVycm9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnUCcpO1xuICAgICAgICAgICAgZXJyb3IuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobWVzc2FnZSkpO1xuICAgICAgICAgICAgZXJyb3IuY2xhc3NMaXN0LmFkZCgnZm9ybS1lcnJvcicpO1xuICAgICAgICAgICAgZXJyb3Iuc2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnLCB0eXBlKTtcbiAgICAgICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChlcnJvcik7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFJlbW92ZSBlcnJvciBtZXNzYWdlIG9mIHNvbWUgdHlwZSBhZnRlciBlbGVtZW50XG4gICAgICAgICAqIEBwYXJhbSB7Tm9kZX0gZWxlbWVudCAtIGVsZW1lbnQsIGFmdGVyIHdoaWNoIGVycm9yIG1lc3NhZ2UgaXNcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cHBlIC0gZXJyb3IgdHlwZVxuICAgICAgICAgKi9cbiAgICAgICAgY2xlYXJFcnJvcihlbGVtZW50LCB0eXBlKSB7XG5cbiAgICAgICAgICAgIGxldCBlcnIgPSBlbGVtZW50LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmZvcm0tZXJyb3JbZGF0YS10eXBlPVwiJyArIHR5cGUgKyAnXCJdJyk7XG4gICAgICAgICAgICBpZiAoZXJyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gVmFsaWRhdGUgZm9ybVxuICAgICAgICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAtIHN1Ym1pdCBldmVudFxuICAgICAgICAgKiBAdG9kbyBJbXBsZW1lbnQgbG9naW4gdmFsaWRhdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgdmFsaWRhdGUoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXZlbnQgIT0gXCJ1bmRlZmluZWRcIiAmJiAhZXZlbnQuY3VycmVudFRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEtcmVsb2FkJykpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgdmFsaWQgPSB0cnVlLFxuICAgICAgICAgICAgICAgIG5leHQgPSBudWxsLFxuICAgICAgICAgICAgICAgIGVxdWFsX2ZpZWxkcyA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1lcXVhbF0nKSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZF9maWVsZHMgPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgnW3JlcXVpcmVkXScpLFxuICAgICAgICAgICAgICAgIHVybF9maWVsZHMgPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInVybFwiXScpLFxuICAgICAgICAgICAgICAgIGVtYWlsX2ZpZWxkcyA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiZW1haWxcIl0nKSxcbiAgICAgICAgICAgICAgICB1cmxfcmVnZXggPSBuZXcgUmVnRXhwKFwiXihodHRwfGh0dHBzfGZ0cClcXDovLyhbYS16QS1aMC05XFwuXFwtXSsoXFw6W2EtekEtWjAtOVxcLiZhbXA7JVxcJFxcLV0rKSpAKSooKDI1WzAtNV18MlswLTRdWzAtOV18WzAtMV17MX1bMC05XXsyfXxbMS05XXsxfVswLTldezF9fFsxLTldKVxcLigyNVswLTVdfDJbMC00XVswLTldfFswLTFdezF9WzAtOV17Mn18WzEtOV17MX1bMC05XXsxfXxbMS05XXwwKVxcLigyNVswLTVdfDJbMC00XVswLTldfFswLTFdezF9WzAtOV17Mn18WzEtOV17MX1bMC05XXsxfXxbMS05XXwwKVxcLigyNVswLTVdfDJbMC00XVswLTldfFswLTFdezF9WzAtOV17Mn18WzEtOV17MX1bMC05XXsxfXxbMC05XSl8KFthLXpBLVowLTlcXC1dK1xcLikqW2EtekEtWjAtOVxcLV0rXFwuKGNvbXxlZHV8Z292fGludHxtaWx8bmV0fG9yZ3xiaXp8YXJwYXxpbmZvfG5hbWV8cHJvfGFlcm98Y29vcHxtdXNldW18W2EtekEtWl17Mn0pKShcXDpbMC05XSspKigvKCR8W2EtekEtWjAtOVxcLlxcLFxcP1xcJ1xcXFxcXCsmYW1wOyVcXCQjXFw9fl9cXC1dKykpKiRcIiwgXCJpXCIpLFxuICAgICAgICAgICAgICAgIGVtYWlsX3JlZ2V4ID0gbmV3IFJlZ0V4cChcIl4oW2EtekEtWjAtOV9cXC5cXC1dKStcXEAoKFthLXpBLVowLTlcXC1dKStcXC4pKyhbYS16QS1aMC05XXsyLDR9KSskXCIpO1xuXG4gICAgICAgICAgICAvKiBjaGVjayBlcXVhbCBmaWVsZHMgKi9cbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChlcXVhbF9maWVsZHMsIChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGVxdWFsID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWVxdWFsXCIpKTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC52YWx1ZS50cmltKCkgIT0gZXF1YWwudmFsdWUudHJpbSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRXJyb3IoZWxlbWVudCwgdGhpcy5tZXNzYWdlc1tkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdsYW5nJyldLmVxdWFsLCBcImVxdWFsXCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJFcnJvcihlbGVtZW50LCBcImVxdWFsXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKiBjaGVjayByZXF1aXJlZCBmaWVsZHMgKi9cbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChyZXF1aXJlZF9maWVsZHMsIChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudmFsdWUudHJpbSgpID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRXJyb3IoZWxlbWVudCwgdGhpcy5tZXNzYWdlc1tkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdsYW5nJyldLnJlcXVpcmVkLCBcInJlcXVpcmVkXCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJFcnJvcihlbGVtZW50LCAncmVxdWlyZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLyogY2hlY2sgdXJsIGZpZWxkcyAqL1xuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKHVybF9maWVsZHMsIChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKChlbGVtZW50LnZhbHVlLnRyaW0oKS5sZW5ndGggPiAwKSAmJiAodXJsX3JlZ2V4LnRlc3QoZWxlbWVudC52YWx1ZS50cmltKCkpID09PSBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFcnJvcihlbGVtZW50LCB0aGlzLm1lc3NhZ2VzW2RvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2xhbmcnKV0udXJsLCAndXJsJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckVycm9yKGVsZW1lbnQsICd1cmwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLyogY2hlY2sgZW1haWwgZmllbGRzICovXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZW1haWxfZmllbGRzLCAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICgoZWxlbWVudC52YWx1ZS50cmltKCkubGVuZ3RoID4gMCkgJiYgKGVtYWlsX3JlZ2V4LnRlc3QoZWxlbWVudC52YWx1ZS50cmltKCkpID09PSBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFcnJvcihlbGVtZW50LCB0aGlzLm1lc3NhZ2VzW2RvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2xhbmcnKV0uZW1haWwsICdlbWFpbCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJFcnJvcihlbGVtZW50LCAnZW1haWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICBsZXQgYWxsX2ZpZWxkcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGVxdWFsX2ZpZWxkcykuY29uY2F0KFxuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHJlcXVpcmVkX2ZpZWxkcyksXG4gICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodXJsX2ZpZWxkcyksXG4gICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZW1haWxfZmllbGRzKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGFsbF9maWVsZHMsIChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGVyciA9IGVsZW1lbnQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuZm9ybS1lcnJvcicpO1xuICAgICAgICAgICAgICAgIGlmIChlcnIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW52YWxpZCA9IGRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZShcImRhdGEtaW52YWxpZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZC52YWx1ZSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PSBcIlNFTEVDVFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lm5leHRTaWJsaW5nLnNldEF0dHJpYnV0ZU5vZGUoaW52YWxpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lm5leHRTaWJsaW5nLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS12YWxpZCcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGVOb2RlKGludmFsaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtdmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbGlkID0gZG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKFwiZGF0YS12YWxpZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQudmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lID09IFwiU0VMRUNUXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQubmV4dFNpYmxpbmcuc2V0QXR0cmlidXRlTm9kZSh2YWxpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lm5leHRTaWJsaW5nLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1pbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZU5vZGUodmFsaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtaW52YWxpZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxldCBlcnJvcnNfY291bnQgPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1fZXJyb3InKS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoZXJyb3JzX2NvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh2YWxpZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50ICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB2YWxpZDtcblxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBsZXQgcmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9IFwibG9hZGluZ1wiKSByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiByZXNvbHZlKCkpO1xuICAgIH0pO1xuXG4gICAgcmVhZHkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgbGV0IGZvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpO1xuICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZm9ybXMsIChmb3JtKSA9PiB7XG4gICAgICAgICAgICBuZXcgVmFsaWRhdGlvbihmb3JtKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=