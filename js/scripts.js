"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();!function(){var e=function(){function e(){_classCallCheck(this,e);var t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(this.init.bind(this))}return _createClass(e,[{key:"init",value:function(){var e=this;this.fired=!1,this.tablet=1200,this.mobile=750,this.min_height=250,this.meta=document.querySelector("meta[name='viewport']"),this.onResize();var t=document.querySelector(".header"),i=document.querySelector(".clock");document.querySelector(".slide_main");window.requestAnimFrame=window.requestAnimationFrame,$(".landing").fullpage({sectionSelector:".landing__section",navigation:!0,afterLoad:this.hideLoader.bind(this),afterRender:this.recountSlides.bind(this),afterResize:this.recountSlides.bind(this),onLeave:function(s,n,o){1==n?(t.classList.toggle("header_open",!1),e.hideNav()):(t.classList.toggle("header_open",!0),e.showNav()),6==n?i.classList.toggle("clock_visible",!0):i.classList.toggle("clock_visible",!1)}}),document.querySelector(".footer__top").addEventListener("click",this.scrollToTop.bind(this)),window.addEventListener("resize",this.onResize.bind(this));var s=document.querySelector(".landing__section.active");null!=s&&(s.classList.toggle("active_moment",!0),s.classList.toggle("active",!1),setTimeout(function(){s.classList.toggle("active_moment",!1),s.classList.toggle("active",!0)},0))}},{key:"onResize",value:function(){console.log(Math.max(document.documentElement.clientWidth,window.innerWidth||0)," x ",Math.max(document.documentElement.clientHeight,window.innerHeight||0)),Math.max(document.documentElement.clientHeight,window.innerHeight||0)>480&&Math.max(document.documentElement.clientWidth,window.innerWidth||0)<500?this.meta.setAttribute("content","width=400"):this.meta.setAttribute("content","width=device-width, initial-scale=1.0")}},{key:"hideNav",value:function(){var e=this;Velocity(this.nav,"finish"),Velocity(this.nav,{opacity:0},{duration:300,complete:function(){e.nav.style.display="none"}})}},{key:"showNav",value:function(){var e=this;Velocity(this.nav,"finish"),Velocity(this.nav,{opacity:1},{duration:300,begin:function(){e.nav.style.display="block"}})}},{key:"hideLoader",value:function(){if(this.onResize(),!this.fired){this.fired=!0,this.nav=document.getElementById("fp-nav"),this.hideNav(),[].forEach.call(document.querySelectorAll(".slide__resizable, .slide__centred"),function(e){e.setAttribute("data-height",e.offsetHeight),e.setAttribute("data-width",e.offsetWidth)});var e=document.querySelector(".loader__wrapper"),t={opacity:0},i={duration:500,complete:function(){e.parentNode.removeChild(e)}};Velocity(e,t,i)}}},{key:"recountSlides",value:function(){var e=this;this.onResize();var t=document.querySelectorAll(".slide__resizable"),i=document.querySelector(".slide__centred"),s=document.querySelectorAll(".steps__step"),n=document.querySelector(".slide_service"),o=document.querySelector(".slide__illustration"),l=document.querySelector(".slide_main"),a=document.querySelector(".shema"),r=document.querySelector(".header").offsetHeight,d=document.querySelector(".footer").offsetHeight,c=(a.closest(".slide__details"),l.querySelector(".slide__phones")),h=l.querySelector(".slide__phone"),u=void 0,f=void 0,m=void 0,v=void 0,y=20,g=void 0,_=1,p=1,b=1,w=void 0,L=void 0,S=void 0,q=void 0,M=void 0,x=void 0,z=void 0,A=void 0,k=void 0,H=void 0,E=void 0,C=void 0,W=void 0;g=l.querySelector(".fp-tableCell"),u=Math.min(g.offsetHeight,parseInt(g.style.height,10)),f=g.offsetWidth,w=l.querySelector(".slide__header"),l.style.backgroundSize="auto "+u+"px",v=u-y-w.offsetHeight,v>=200&&f>750?(c.style.height=Math.min(v,480)+"px",c.style.marginLeft=.1*-Math.min(v,480)+"px",c.style.visibility="visible"):200>v?c.style.visibility="hidden":c.removeAttribute("style"),750>=f&&(h.style.height=v+"px"),g=n.querySelector(".fp-tableCell"),u=Math.min(g.offsetHeight,parseInt(g.style.height,10)),f=g.offsetWidth,w=n.querySelector(".slide__header"),k=Math.min(g.offsetHeight,parseInt(g.style.height,10))-w.offsetHeight-d-r,o.style.height=k+"px",H=700,E=570,C=1.2*f,W=E*C/H,k>W?(o.classList.toggle("slide__illustration_hidden",!1),o.style.backgroundPosition="50% 100%"):370>k?o.classList.toggle("slide__illustration_hidden",!0):(o.classList.toggle("slide__illustration_hidden",!1),o.style.backgroundPosition="50% 0"),i.removeAttribute("style"),[].forEach.call(s,function(e){e.removeAttribute("style")}),Math.max(document.documentElement.clientHeight,window.innerHeight||0)>480&&(L=i.closest(".slide"),g=i.closest(".fp-tableCell"),u=Math.min(g.offsetHeight,parseInt(g.style.height,10)),f=g.offsetWidth,A=parseInt(i.getAttribute("data-height"),10),f>1220?(z=1230,q=170):f>750&&1220>=f?(z=1050,q=170):(z=400,A=900,q=0),v=u-r,m=f-40,p=v/A,b=m/z,_=Math.min(Math.min(p,b),1),M=0,x=0,750>f?(_=v/620,i.style[Modernizr.prefixed("transform")]="translateX(-50%) scale("+_+")"):(z>m&&(x=-(z-f)/2),1>_&&([].forEach.call(s,function(e){e.style[Modernizr.prefixed("transform")]="scale("+Math.min(1/_*.8,2)+")"}),x+=30),x+="px",i.style[Modernizr.prefixed("transform")]="translateX("+x+") translateY("+M+") scale("+_+")")),[].forEach.call(t,function(t){L=t.closest(".slide"),w=t.closest(".slide__details").querySelector(".slide__header"),g=t.closest(".fp-tableCell"),u=Math.min(g.offsetHeight,parseInt(g.style.height,10)),f=g.offsetWidth,A=parseInt(t.getAttribute("data-height"),10),z=parseInt(t.getAttribute("data-width"),10),p=v/A,b=m/z,_=Math.min(p,b),f>e.mobile?(v=u-r-y,m=f/2-40,p=v/A,b=m/z,_=Math.min(p,b),v<e.min_height?L.classList.add("slide_hide-resizable"):1>_?(L.classList.remove("slide_hide-resizable"),t.style[Modernizr.prefixed("transform")]="scale("+_+")",L.classList.contains("slide_right")?(S=parseInt(t.getAttribute("data-width"),10)*_,w.style.borderLeftWidth=S+"px",f>e.tablet&&(t.style.marginRight=w.offsetWidth/2-S+"px")):(S=parseInt(t.getAttribute("data-width"),10)*_,w.style.borderRightWidth=S+"px",f>e.tablet&&(t.style.marginLeft=w.offsetWidth/2-S+"px"))):(L.classList.remove("slide_hide-resizable"),t.removeAttribute("style"),w.removeAttribute("style"))):(v=u-r-w.offsetHeight-60,m=f-40,p=v/A,b=m/z,_=Math.min(p,b),z>m?t.style.marginLeft=-((z-m)/2-20)+"px":t.style.marginLeft="auto",200>v?(console.log("hidding"),L.classList.add("slide_hide-resizable")):1>_?(L.classList.remove("slide_hide-resizable"),t.style[Modernizr.prefixed("transform")]="scale("+_+")"):(L.classList.remove("slide_hide-resizable"),t.removeAttribute("style"),w.removeAttribute("style")))}),this.onResize()}},{key:"scrollToTop",value:function(e){e.preventDefault(),$.fn.fullpage.moveTo(1,0)}}]),e}();new e}();
"use strict";function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function i(i,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(e,n,o){return n&&i(e.prototype,n),o&&i(e,o),e}}();!function(){window.mobileAndTabletcheck=function(){var i=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(i=!0)}(navigator.userAgent||navigator.vendor||window.opera),i},window.isMobile={Android:function(){return/Android/i.test(navigator.userAgent)},BlackBerry:function(){return/BlackBerry/i.test(navigator.userAgent)},iOS:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},Windows:function(){return/IEMobile/i.test(navigator.userAgent)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Windows()}};var i=function(){function i(){_classCallCheck(this,i);var e=new Promise(function(i,e){return"loading"!=document.readyState?i():void document.addEventListener("DOMContentLoaded",function(){return i()})});e.then(this.init.bind(this))}return _createClass(i,[{key:"init",value:function(){window.isMobile.Android()?document.body.parentNode.classList.add("android"):window.isMobile.iOS()?document.body.parentNode.classList.add("ios"):window.mobileAndTabletcheck()?document.body.parentNode.classList.add("unknown-mobile"):document.body.parentNode.classList.add("desktop")}}]),i}();new i}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}();!function(){var e=function(){function e(){_classCallCheck(this,e);var t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(this.init.bind(this))}return _createClass(e,[{key:"init",value:function(){var e=this,t=document.querySelectorAll(".login__back"),o=document.querySelectorAll(".login__login-button, .login_success .login__submit"),i=document.querySelectorAll(".menu__interpreter, .header__interpreter");this.menu_popup_open=!1,this.login_button=document.querySelector(".menu__login"),this.register_button=document.querySelector(".menu__register"),this.step1=document.querySelector(".login_register-step-1"),this.step1_form=document.querySelector(".login_register-step-1 form.login__form"),this.step2=document.querySelector(".login_register-step-2"),this.step2_form=document.querySelector(".login_register-step-2 form.login__form"),this.mobile_popup=document.querySelector(".popup_mobile"),this.mobile_popup_close=this.mobile_popup.querySelector(".popup__close"),this.wrapper=document.querySelector(".menu__wrapper"),this.header_register_button=document.querySelector(".header__link_register"),this.header_login_button=document.querySelector(".header__link_login"),this.recovery_button=document.querySelector(".login__password-recovery"),this.lightbox=document.querySelector("body>.lightbox"),this.login_popup=document.querySelector(".login_login"),this.recovery=document.querySelector(".login_recovery"),this.password=document.querySelector(".login_password"),this.recovery_form=this.recovery.querySelector(".login__form"),this.password_form=this.password.querySelector(".login__form"),this.error_message=document.querySelector(".login_error"),this.email=document.querySelector(".login_email"),this.success=document.querySelector(".login_success"),this.current=document.querySelector(".login_open"),this.last=[],this.login_button.addEventListener("click",this.openLoginForm.bind(this)),this.recovery_button.addEventListener("click",this.openRecovery.bind(this)),this.lightbox.addEventListener("click",this.closeAll.bind(this)),this.register_button.addEventListener("click",this.openRegister.bind(this)),this.header_login_button.addEventListener("click",this.openLoginOuter.bind(this)),this.header_register_button.addEventListener("click",this.openRegisterOuter.bind(this)),this.mobile_popup_close.addEventListener("click",this.closeMobilePopup.bind(this)),this.recovery_form.addEventListener("submit",this.sendData.bind(this)),this.password_form.addEventListener("submit",this.sendData.bind(this)),this.step1_form.addEventListener("submit",this.openNext.bind(this)),this.step2_form.addEventListener("submit",this.sendData.bind(this)),window.addEventListener("resize",this.reposPopup.bind(this)),$(".login select").select2(),[].forEach.call(i,function(t){t.addEventListener("click",e.openMobilePopup.bind(e))}),[].forEach.call(t,function(t){t.addEventListener("click",e.goback.bind(e))}),[].forEach.call(o,function(t){t.addEventListener("click",e.openLoginInner.bind(e))}),this.WebRTCSupport=!document.documentElement.classList.contains("no-peerconnection"),this.WebRTCSupport||([].forEach.call(document.querySelectorAll("form.login__form input, form.login__form button, form.login__form select"),function(e){e.setAttribute("disabled","disabled")}),[].forEach.call(document.documentElement.querySelectorAll("form.login__form"),function(e){e.addEventListener("click",function(t){e.closest(".login").querySelector(".popup_browser").open()})}),[].forEach.call(document.querySelectorAll(".popup_browser"),function(t){e.showPopup(t)}))}},{key:"openNext",value:function(e){e.preventDefault(),0!=this.step1_form.validate()&&this.openForm(this.step2)}},{key:"reposPopup",value:function(e){this.menu_popup_open&&(this.mobile_popup.style[Modernizr.prefixed("transform")]="translateY("+this.mobile_popup.offsetHeight+"px)")}},{key:"closeMobilePopup",value:function(){var e=this;this.menu_popup_open&&(this.menu_popup_open=!1,Velocity(this.mobile_popup,"stop"),Velocity(this.mobile_popup,{translateY:0},250),Velocity(this.mobile_popup_button,"stop"),Velocity(this.mobile_popup_button,{opacity:1},{duration:250,begin:function(){e.mobile_popup_button.style.display="block"}}))}},{key:"openMobilePopup",value:function(){var e=this;this.menu_popup_open||(this.menu_popup_open=!0,Velocity(this.mobile_popup,"stop"),Velocity(this.mobile_popup,{translateY:this.mobile_popup.offsetHeight+"px"},250),Velocity(this.mobile_popup_button,"stop"),Velocity(this.mobile_popup_button,{opacity:0},{duration:250,complete:function(){e.mobile_popup_button.style.display="none"}}))}},{key:"showPopup",value:function(e){void 0!=e.show?e.show():setTimeout(this.showPopup.bind(this,e),50)}},{key:"openLoginOuter",value:function(e){var t=this;e.preventDefault(),$.fn.fullpage.moveTo(1,0),setTimeout(function(){t.login_button.click()},800)}},{key:"openRegisterOuter",value:function(e){var t=this;e.preventDefault(),$.fn.fullpage.moveTo(1,0),setTimeout(function(){t.register_button.click()},800)}},{key:"sendData",value:function(e){var t=this;e.preventDefault();var o=e.currentTarget;if(0!=o.validate())try{!function(){var e=4,i=200,n=void 0,r=new XMLHttpRequest,s=new Promise(function(n,s){r.open("POST",o.getAttribute("action")),r.send(new FormData(o)),r.onreadystatechange=function(){r.readyState===e&&(t.recovery_form.reset(),r.status===i?n():s({code:parseInt(r.status,10),message:r.statusText}))}});n=o.hasAttribute("data-check")?t.showCheckMessage.bind(t):t.showSuccessMessage.bind(t),s.then(n)["catch"](t.showErrorMessage.bind(t))}()}catch(i){console.log("error: ",i)}}},{key:"showCheckMessage",value:function(){this.openForm(this.email)}},{key:"showSuccessMessage",value:function(){this.openForm(this.success)}},{key:"openLoginInner",value:function(){this.openForm(this.login_popup)}},{key:"showErrorMessage",value:function(e){this.last=new Array,console.log(e.code,"Responce status code: "+e.code+". "+e.message+"."),this.openForm(this.error_message,!0)}},{key:"goback",value:function(){this.openForm()}},{key:"emailHaveSend",value:function(){this.openForm(this.email)}},{key:"openRegisterInner",value:function(){this.openForm(this.step1)}},{key:"openRegister",value:function(){var e=this;$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1);var t={right:0},o={duration:250};Velocity(this.step1,t,o),this.current=this.step1,t={opacity:1},o={begin:function(){e.lightbox.style.display="block"},duration:250},Velocity(this.lightbox,t,o)}},{key:"openRecovery",value:function(e){e.preventDefault(),this.WebRTCSupport&&this.openForm(this.recovery)}},{key:"openForm",value:function(e,t){$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1);var o=this.current.querySelector("form");if(null!=o&&setTimeout(function(){o.clear()},500),"undefined"==typeof e&&this.last.length>0)e=this.last.pop();else{if("undefined"==typeof e&&0==this.last.length)return void this.closeAll();1!=t&&this.last.push(this.current)}o=e.querySelector("form"),null!=o&&setTimeout(function(){o.clear()},500);var i={right:-this.current.offsetWidth+"px"},n={duration:250};Velocity(this.current,i,n),i={right:0},n={duration:250},Velocity(e,i,n),this.current=e}},{key:"closeAll",value:function(){var e=this;$.fn.fullpage.setAllowScrolling(!0),$.fn.fullpage.setKeyboardScrolling(!0);var t={right:-this.current.offsetWidth+"px"},o={duration:250};Velocity(this.current,t,o),this.current=null,t={opacity:0},o={complete:function(){e.lightbox.style.display="none"},duration:250},Velocity(this.lightbox,t,o),setTimeout(function(){e.clearAll()},500)}},{key:"clearAll",value:function(){[].forEach.call(document.querySelectorAll("form"),function(e){e.clear()}),$(".login select").select2("destroy"),$(".login select").select2()}},{key:"openLoginForm",value:function(e){var t=this;e.preventDefault(),$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1);var o={right:0},i={duration:250};Velocity(this.login_popup,o,i),this.current=this.login_popup,o={opacity:1},i={begin:function(){t.lightbox.style.display="block"},duration:250},Velocity(this.lightbox,o,i)}}]),e}();new e}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}();!function(){var t=function(){function t(e){_classCallCheck(this,t),this.popup=e,e.querySelector(".popup__close").addEventListener("click",this.close.bind(this)),this.popup.close=this.close.bind(this),this.popup.open=this.open.bind(this),this.popup.show=this.show.bind(this),this.status=!1,this.jamping=!1}return _createClass(t,[{key:"show",value:function(){this.popup.style.display="block",this.popup.style[Modernizr.prefixed("transform")]="rotateX(0)",this.status=!0}},{key:"hide",value:function(){this.popup.style.display="none",this.popup.style[Modernizr.prefixed("transform")]="rotateX(180deg)",this.status=!1,Velocity(this.popup,"stop")}},{key:"close",value:function(){var t=this;this.jamping||this.status&&(Velocity(this.popup,"finish"),Velocity(this.popup,{rotateX:"120deg"},{duration:500,begin:function(){t.popup.style.display="block"},complete:function(){t.status=!1}}))}},{key:"open",value:function(){var t=this;if(!this.jamping){if(this.status)return void this.jump();this.jamping=!0,Velocity(this.popup,"finish"),Velocity(this.popup,{rotateX:"0deg"},{duration:500,begin:function(){t.popup.style.display="block"},complete:function(){t.status=!0}}),Velocity(this.popup,{rotateX:"20deg"},150),Velocity(this.popup,{rotateX:"0deg"},125),Velocity(this.popup,{rotateX:"10deg"},200),Velocity(this.popup,{rotateX:"0deg"},{duration:175,complete:function(){t.jamping=!1}})}}},{key:"jump",value:function(){var t=this;this.jamping=!0,Velocity(this.popup,"finish"),Velocity(this.popup,{rotateX:"35deg"},150),Velocity(this.popup,{rotateX:"0deg"},125),Velocity(this.popup,{rotateX:"20deg"},200),Velocity(this.popup,{rotateX:"0deg"},175),Velocity(this.popup,{rotateX:"15deg"},250),Velocity(this.popup,{rotateX:"0deg"},{duration:225,complete:function(){t.jamping=!1}})}}]),t}(),e=new Promise(function(t,e){return"loading"!=document.readyState?t():void document.addEventListener("DOMContentLoaded",function(){return t()})});e.then(function(){[].forEach.call(document.querySelectorAll(".popup_browser"),function(e){new t(e)})})}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();!function(){var e=function(){function e(t){_classCallCheck(this,e),this.form=t,t.setAttribute("novalidate","novalidate"),t.addEventListener("submit",this.validate.bind(this)),t.validate=this.validate.bind(this),t.clear=this.clear.bind(this),this.messages={en:{required:"Required field",email:"Wrong email format",equal:"Password fields should be equal",url:"Wrong url format"},ru:{required:"Поле обязательно для заполнения",email:"Проверьте формат email",equal:"Пароли должны совпадать",url:"Проверьте формат URL"}}}return _createClass(e,[{key:"clear",value:function(){this.form.reset();var e=$(this.form).find("select");e.length>0&&(e.select2("destroy"),e.select2()),setTimeout(function(){var e=document.querySelectorAll(".form-error"),t=document.querySelectorAll("[data-valid], [data-invalid]");[].forEach.call(e,function(e){e.parentNode.removeChild(e)}),[].forEach.call(t,function(e){e.removeAttribute("data-invalid"),e.removeAttribute("data-valid")})},100)}},{key:"addError",value:function(e,t,r){if(null==e.parentNode.querySelector('.form-error[data-type="'+r+'"]')){var a=document.createElement("P");a.appendChild(document.createTextNode(t)),a.classList.add("form-error"),a.setAttribute("data-type",r),e.parentNode.appendChild(a)}}},{key:"clearError",value:function(e,t){var r=e.parentNode.querySelector('.form-error[data-type="'+t+'"]');null!=r&&e.parentNode.removeChild(r)}},{key:"validate",value:function(e){var t=this;"undefined"==typeof e||e.currentTarget.hasAttribute("data-reload")||e.preventDefault();var r=!0,a=this.form.querySelectorAll("[data-equal]"),l=this.form.querySelectorAll("[required]"),o=this.form.querySelectorAll('input[type="url"]'),i=this.form.querySelectorAll('input[type="email"]'),n=new RegExp("^(http|https|ftp)://([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&amp;%$-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9-]+.)*[a-zA-Z0-9-]+.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(/($|[a-zA-Z0-9.,?'\\+&amp;%$#=~_-]+))*$","i"),u=new RegExp("^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$");[].forEach.call(a,function(e){var a=t.form.querySelector(e.getAttribute("data-equal"));e.value.trim()!=a.value.trim()?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].equal,"equal")):t.clearError(e,"equal")}),[].forEach.call(l,function(e){""===e.value.trim()?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].required,"required")):t.clearError(e,"required")}),[].forEach.call(o,function(e){e.value.trim().length>0&&n.test(e.value.trim())===!1?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].url,"url")):t.clearError(e,"url")}),[].forEach.call(i,function(e){e.value.trim().length>0&&u.test(e.value.trim())===!1?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].email,"email")):t.clearError(e,"email")});var d=Array.prototype.slice.call(a).concat(Array.prototype.slice.call(l),Array.prototype.slice.call(o),Array.prototype.slice.call(i));[].forEach.call(d,function(e){var t=e.parentNode.querySelector(".form-error");if(null!=t){var r=document.createAttribute("data-invalid");r.value=!0,"SELECT"==e.tagName?(e.nextSibling.setAttributeNode(r),e.nextSibling.removeAttribute("data-valid")):(e.setAttributeNode(r),e.removeAttribute("data-valid"))}else{var a=document.createAttribute("data-valid");a.value=!0,"SELECT"==e.tagName?(e.nextSibling.setAttributeNode(a),e.nextSibling.removeAttribute("data-invalid")):(e.setAttributeNode(a),e.removeAttribute("data-invalid"))}});var c=this.form.querySelectorAll(".form_error").length;return c>0&&(r=!1),r===!1&&"undefined"!=typeof e&&e.preventDefault(),r}}]),e}(),t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(function(){var t=document.querySelectorAll("form");[].forEach.call(t,function(t){new e(t)})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxhbmRpbmcvbGFuZGluZy5qcyIsImxheW91dC9sYXlvdXQuanMiLCJsb2dpbi9sb2dpbi5qcyIsInBvcHVwL3BvcHVwLmpzIiwidmFsaWRhdG9yL3ZhbGlkYXRpb24uanMiXSwibmFtZXMiOlsiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJMYW5kZ2luZyIsInRoaXMiLCJyZWFkeSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZG9jdW1lbnQiLCJyZWFkeVN0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRoZW4iLCJpbml0IiwiYmluZCIsInZhbHVlIiwiX3RoaXMiLCJmaXJlZCIsInRhYmxldCIsIm1vYmlsZSIsIm1pbl9oZWlnaHQiLCJtZXRhIiwicXVlcnlTZWxlY3RvciIsIm9uUmVzaXplIiwiaGVhZGVyIiwiY2xvY2siLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbUZyYW1lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiJCIsImZ1bGxwYWdlIiwic2VjdGlvblNlbGVjdG9yIiwibmF2aWdhdGlvbiIsImFmdGVyTG9hZCIsImhpZGVMb2FkZXIiLCJhZnRlclJlbmRlciIsInJlY291bnRTbGlkZXMiLCJhZnRlclJlc2l6ZSIsIm9uTGVhdmUiLCJpbmRleCIsIm5leHRJbmRleCIsImRpcmVjdGlvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImhpZGVOYXYiLCJzaG93TmF2Iiwic2Nyb2xsVG9Ub3AiLCJhY3RpdmUiLCJzZXRUaW1lb3V0IiwiY29uc29sZSIsImxvZyIsIk1hdGgiLCJtYXgiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRXaWR0aCIsImlubmVyV2lkdGgiLCJjbGllbnRIZWlnaHQiLCJpbm5lckhlaWdodCIsInNldEF0dHJpYnV0ZSIsIl90aGlzMiIsIlZlbG9jaXR5IiwibmF2Iiwib3BhY2l0eSIsImR1cmF0aW9uIiwiY29tcGxldGUiLCJzdHlsZSIsImRpc3BsYXkiLCJfdGhpczMiLCJiZWdpbiIsImdldEVsZW1lbnRCeUlkIiwiZm9yRWFjaCIsImNhbGwiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVzaXphYmxlIiwib2Zmc2V0SGVpZ2h0Iiwib2Zmc2V0V2lkdGgiLCJsb2FkZXIiLCJvcHRpb25zIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiX3RoaXM0IiwicmVzaXphYmxlcyIsImNlbnRyZWQiLCJzdGVwcyIsInNlcnZpY2Vfc2xpZGUiLCJzZXJ2aWNlX2lsbHVzdHJhdGlvbiIsIm1haW4iLCJzaGVtYSIsImhlYWRlcl9oZWlnaHQiLCJmb290ZXJfaGVpZ2h0IiwicGhvbmVzIiwiY2xvc2VzdCIsInBob25lIiwidmlld3BvcnRfaGVpZ2h0IiwidW5kZWZpbmVkIiwidmlld3BvcnRfd2lkdGgiLCJhdmFpbGFiYWxlX3dpZHRoIiwiYXZhaWxhYmFsZV9oZWlnaHQiLCJkZWx0YSIsImNlbGwiLCJzY2FsZSIsInNjYWxlX3giLCJzY2FsZV95Iiwic2xpZGUiLCJib3JkZXJfd2lkdGgiLCJkZWx0YV95IiwidHJfeSIsInRyX3giLCJlbGVtZW50X3dpZHRoIiwiZWxlbWVudF9oZWlnaHQiLCJpbGx1c3RyYXRpb25faGVpZ2h0Iiwid193aWR0aCIsIndfaGVpZ2h0IiwiaV93aWR0aCIsImlfaGVpZ2h0IiwibWluIiwicGFyc2VJbnQiLCJoZWlnaHQiLCJiYWNrZ3JvdW5kU2l6ZSIsIm1hcmdpbkxlZnQiLCJ2aXNpYmlsaXR5IiwicmVtb3ZlQXR0cmlidXRlIiwiYmFja2dyb3VuZFBvc2l0aW9uIiwic3RlcCIsImdldEF0dHJpYnV0ZSIsIk1vZGVybml6ciIsInByZWZpeGVkIiwiYWRkIiwicmVtb3ZlIiwiY29udGFpbnMiLCJib3JkZXJMZWZ0V2lkdGgiLCJtYXJnaW5SaWdodCIsImJvcmRlclJpZ2h0V2lkdGgiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiZm4iLCJtb3ZlVG8iLCJtb2JpbGVBbmRUYWJsZXRjaGVjayIsImNoZWNrIiwiYSIsInRlc3QiLCJzdWJzdHIiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ2ZW5kb3IiLCJvcGVyYSIsImlzTW9iaWxlIiwiQW5kcm9pZCIsIkJsYWNrQmVycnkiLCJpT1MiLCJXaW5kb3dzIiwiYW55IiwiTGF5b3V0IiwiYm9keSIsIk1lbnUiLCJiYWNrX2J1dHRvbnMiLCJsb2dpbl9idXR0b25zIiwibW9iaWxlX3BvcHVwX2J1dHRvbnMiLCJtZW51X3BvcHVwX29wZW4iLCJsb2dpbl9idXR0b24iLCJyZWdpc3Rlcl9idXR0b24iLCJzdGVwMSIsInN0ZXAxX2Zvcm0iLCJzdGVwMiIsInN0ZXAyX2Zvcm0iLCJtb2JpbGVfcG9wdXAiLCJtb2JpbGVfcG9wdXBfY2xvc2UiLCJ3cmFwcGVyIiwiaGVhZGVyX3JlZ2lzdGVyX2J1dHRvbiIsImhlYWRlcl9sb2dpbl9idXR0b24iLCJyZWNvdmVyeV9idXR0b24iLCJsaWdodGJveCIsImxvZ2luX3BvcHVwIiwicmVjb3ZlcnkiLCJwYXNzd29yZCIsInJlY292ZXJ5X2Zvcm0iLCJwYXNzd29yZF9mb3JtIiwiZXJyb3JfbWVzc2FnZSIsImVtYWlsIiwic3VjY2VzcyIsImN1cnJlbnQiLCJsYXN0Iiwib3BlbkxvZ2luRm9ybSIsIm9wZW5SZWNvdmVyeSIsImNsb3NlQWxsIiwib3BlblJlZ2lzdGVyIiwib3BlbkxvZ2luT3V0ZXIiLCJvcGVuUmVnaXN0ZXJPdXRlciIsImNsb3NlTW9iaWxlUG9wdXAiLCJzZW5kRGF0YSIsIm9wZW5OZXh0IiwicmVwb3NQb3B1cCIsInNlbGVjdDIiLCJidXR0b24iLCJvcGVuTW9iaWxlUG9wdXAiLCJnb2JhY2siLCJvcGVuTG9naW5Jbm5lciIsIldlYlJUQ1N1cHBvcnQiLCJlbGVtZW50IiwiZm9ybSIsIm9wZW4iLCJwb3B1cCIsInNob3dQb3B1cCIsInZhbGlkYXRlIiwib3BlbkZvcm0iLCJ0cmFuc2xhdGVZIiwibW9iaWxlX3BvcHVwX2J1dHRvbiIsInNob3ciLCJjbGljayIsIl90aGlzNSIsIl90aGlzNiIsImN1cnJlbnRUYXJnZXQiLCJET05FIiwiT0siLCJtZXNzYWdlIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJsb2FkZWQiLCJzZW5kIiwiRm9ybURhdGEiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZXNldCIsInN0YXR1cyIsImNvZGUiLCJzdGF0dXNUZXh0IiwiaGFzQXR0cmlidXRlIiwic2hvd0NoZWNrTWVzc2FnZSIsInNob3dTdWNjZXNzTWVzc2FnZSIsInNob3dFcnJvck1lc3NhZ2UiLCJlcnIiLCJyZWFzb24iLCJBcnJheSIsIl90aGlzNyIsInNldEFsbG93U2Nyb2xsaW5nIiwic2V0S2V5Ym9hcmRTY3JvbGxpbmciLCJyaWdodCIsImRvbnRfc2F2ZSIsImNsZWFyIiwicG9wIiwicHVzaCIsIl90aGlzOCIsImNsZWFyQWxsIiwiX3RoaXM5IiwiUG9wdXAiLCJjbG9zZSIsImphbXBpbmciLCJyb3RhdGVYIiwianVtcCIsIlZhbGlkYXRpb24iLCJtZXNzYWdlcyIsImVuIiwicmVxdWlyZWQiLCJlcXVhbCIsInVybCIsInJ1Iiwic2VsZWN0b3JzIiwiZmluZCIsImVycm9ycyIsImZpZWxkcyIsImVycm9yIiwiZmllbGQiLCJ0eXBlIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJ2YWxpZCIsImVxdWFsX2ZpZWxkcyIsInJlcXVpcmVkX2ZpZWxkcyIsInVybF9maWVsZHMiLCJlbWFpbF9maWVsZHMiLCJ1cmxfcmVnZXgiLCJSZWdFeHAiLCJlbWFpbF9yZWdleCIsInRyaW0iLCJhZGRFcnJvciIsImNsZWFyRXJyb3IiLCJhbGxfZmllbGRzIiwic2xpY2UiLCJjb25jYXQiLCJpbnZhbGlkIiwiY3JlYXRlQXR0cmlidXRlIiwidGFnTmFtZSIsIm5leHRTaWJsaW5nIiwic2V0QXR0cmlidXRlTm9kZSIsIl92YWxpZCIsImVycm9yc19jb3VudCIsImZvcm1zIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUlBLFNBQVNBLGlCQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUZoSCxHQUFJQyxjQUFlLFdBQWUsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU1DLE9BQU9DLGVBQWVULEVBQVFJLEVBQVdNLElBQUtOLElBQWlCLE1BQU8sVUFBVVIsRUFBYWUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlaLEVBQWlCSCxFQUFZaUIsVUFBV0YsR0FBaUJDLEdBQWFiLEVBQWlCSCxFQUFhZ0IsR0FBcUJoQixPQURqaUIsV0FNSSxHQUxNa0IsR0FBUSxXQUtDLFFBTFRBLEtBWUVwQixnQkFBZ0JxQixLQVpsQkQsRUFNRSxJQUFJRSxHQUFRLEdBQUlDLFNBQVEsU0FBQ0MsRUFBU0MsR0FDOUIsTUFBMkIsV0FBdkJDLFNBQVNDLFdBQWdDSCxRQUM3Q0UsVUFBU0UsaUJBQWlCLG1CQUFvQixXQVMxQyxNQVRnREosUUFFeERGLEdBQU1PLEtBQUtSLEtBQUtTLEtBQUtDLEtBQUtWLE9Bb1k5QixNQW5YQWpCLGNBM0JFZ0IsSUE0QkVKLElBQUssT0FDTGdCLE1BYkEsV0FjSSxHQUFJQyxHQUFRWixJQWJoQkEsTUFBS2EsT0FBUSxFQUNiYixLQUFLYyxPQUFTLEtBQ2RkLEtBQUtlLE9BQVMsSUFDZGYsS0FBS2dCLFdBQWEsSUFDbEJoQixLQUFLaUIsS0FBT1osU0FBU2EsY0FBYyx5QkFFbkNsQixLQUFLbUIsVUFFTCxJ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aUJBQWlCSixHQUNyQ2pGLEVBQVFvRixZQUFZakssZ0JBQWdCLGdCQUVwQzZFLEVBQVFxRixpQkFBaUJKLEdBQ3pCakYsRUFBUTdFLGdCQUFnQixtQkFFekIsQ0FFSCxHQUFJbUssR0FBUW5SLFNBQVMrUSxnQkFBZ0IsYUFDckNJLEdBQU03USxPQUFRLEVBQ1MsVUFBbkJ1TCxFQUFRbUYsU0FDUm5GLEVBQVFvRixZQUFZQyxpQkFBaUJDLEdBQ3JDdEYsRUFBUW9GLFlBQVlqSyxnQkFBZ0Isa0JBRXBDNkUsRUFBUXFGLGlCQUFpQkMsR0FDekJ0RixFQUFRN0UsZ0JBQWdCLG1CQUtwQyxJQUFJb0ssR0FBZXpSLEtBQUttTSxLQUFLL0gsaUJBQWlCLGVBQWVoRixNQVc3RCxPQVZJcVMsR0FBZSxJQUNmcEIsR0FBUSxHQUdSQSxLQUFVLEdBQ1UsbUJBQVRwSSxJQUNQQSxFQUFNQyxpQkFJUG1JLE1BaE1UakIsS0FzTUZuUCxFQUFRLEdBQUlDLFNBQVEsU0FBQ0MsRUFBU0MsR0FDOUIsTUFBMkIsV0FBdkJDLFNBQVNDLFdBQWdDSCxRQUM3Q0UsVUFBU0UsaUJBQWlCLG1CQUFvQixXQWMxQyxNQWRnREosUUFHeERGLEdBQU1PLEtBQUssV0FDUCxHQUFJa1IsR0FBUXJSLFNBQVMrRCxpQkFBaUIsV0FDbkNGLFFBQVFDLEtBQUt1TixFQUFPLFNBQUN2RixHQUNwQixHQUFJaUQsR0FBV2pEIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbihmdW5jdGlvbigpIHtcbiAgICBjbGFzcyBMYW5kZ2luZyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gU3RhcnQgaW5pdGlhbGl6YXRpb24gb24gZG9tbG9hZFxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgbGV0IHJlYWR5ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9IFwibG9hZGluZ1wiKSByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHJlc29sdmUoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlYWR5LnRoZW4odGhpcy5pbml0LmJpbmQodGhpcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBBZGRpbmcgZXZlbnRzIGFuZCBwcm9wZXJ0aWVzXG4gICAgICAgICAqL1xuICAgICAgICBpbml0KCkge1xuICAgICAgICAgICAgdGhpcy5maXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy50YWJsZXQgPSAxMjAwO1xuICAgICAgICAgICAgdGhpcy5tb2JpbGUgPSA3NTA7XG4gICAgICAgICAgICB0aGlzLm1pbl9oZWlnaHQgPSAyNTA7XG4gICAgICAgICAgICB0aGlzLm1ldGEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWV0YVtuYW1lPSd2aWV3cG9ydCddXCIpO1xuXG4gICAgICAgICAgICB0aGlzLm9uUmVzaXplKCk7XG5cbiAgICAgICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJylcbiAgICAgICAgICAgICAgICAsIGNsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsb2NrJylcbiAgICAgICAgICAgICAgICAsIG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVfbWFpbicpO1xuXG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG4gICAgICAgICAgICAkKFwiLmxhbmRpbmdcIikuZnVsbHBhZ2Uoe1xuICAgICAgICAgICAgICAgIHNlY3Rpb25TZWxlY3RvcjogXCIubGFuZGluZ19fc2VjdGlvblwiLFxuICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IHRydWUsXG4gICAgICAgICAgICAgICAgYWZ0ZXJMb2FkOiB0aGlzLmhpZGVMb2FkZXIuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBhZnRlclJlbmRlcjogdGhpcy5yZWNvdW50U2xpZGVzLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgYWZ0ZXJSZXNpemU6IHRoaXMucmVjb3VudFNsaWRlcy5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIG9uTGVhdmU6IChpbmRleCwgbmV4dEluZGV4LCBkaXJlY3Rpb24pID0+IHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dEluZGV4ID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfb3BlbicsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZU5hdigpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9vcGVuJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dOYXYoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0SW5kZXggPT0gNikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvY2suY2xhc3NMaXN0LnRvZ2dsZSgnY2xvY2tfdmlzaWJsZScsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvY2suY2xhc3NMaXN0LnRvZ2dsZSgnY2xvY2tfdmlzaWJsZScsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb290ZXJfX3RvcFwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5zY3JvbGxUb1RvcC5iaW5kKHRoaXMpKTtcblxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25SZXNpemUuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgICAgIGxldCBhY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGFuZGluZ19fc2VjdGlvbi5hY3RpdmUnKTtcbiAgICAgICAgICAgIGlmIChhY3RpdmUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmVfbW9tZW50JywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgYWN0aXZlLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmVfbW9tZW50JywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIG9uUmVzaXplICgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKE1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCwgd2luZG93LmlubmVyV2lkdGggfHwgMCksICcgeCAnICxNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgMCkpO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIChNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgMCkgPiA0ODAgKVxuICAgICAgICAgICAgICAgICYmIChNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsIHdpbmRvdy5pbm5lcldpZHRoIHx8IDApIDwgNTAwKVxuICAgICAgICAgICAgKXtcbiAgICAgICAgICAgICAgICB0aGlzLm1ldGEuc2V0QXR0cmlidXRlKFwiY29udGVudFwiLCBcIndpZHRoPTQwMFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXRhLnNldEF0dHJpYnV0ZShcImNvbnRlbnRcIiwgXCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaGlkZU5hdiAoKSB7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLm5hdiwgXCJmaW5pc2hcIik7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLm5hdiwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwXG4gICAgICAgICAgICAgICAgLCBjb21wbGV0ZTogKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3dOYXYgKCkge1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5uYXYsIFwiZmluaXNoXCIpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5uYXYsIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMFxuICAgICAgICAgICAgICAgICwgYmVnaW46ICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaGlkZUxvYWRlcigpIHtcbiAgICAgICAgICAgIHRoaXMub25SZXNpemUoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpcmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maXJlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmcC1uYXYnKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZU5hdigpO1xuXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlX19yZXNpemFibGUsIC5zbGlkZV9fY2VudHJlZCcpLCAocmVzaXphYmxlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzaXphYmxlLnNldEF0dHJpYnV0ZSgnZGF0YS1oZWlnaHQnLCByZXNpemFibGUub2Zmc2V0SGVpZ2h0KTtcbiAgICAgICAgICAgICAgICByZXNpemFibGUuc2V0QXR0cmlidXRlKCdkYXRhLXdpZHRoJywgcmVzaXphYmxlLm9mZnNldFdpZHRoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgbG9hZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvYWRlcl9fd3JhcHBlcicpLFxuICAgICAgICAgICAgICAgIHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobG9hZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFZlbG9jaXR5KGxvYWRlciwgcHJvcHMsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cblxuICAgICAgICByZWNvdW50U2xpZGVzKCkge1xuXG4gICAgICAgICAgICB0aGlzLm9uUmVzaXplKCk7XG5cbiAgICAgICAgICAgIGxldCByZXNpemFibGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlX19yZXNpemFibGUnKVxuICAgICAgICAgICAgICAgICwgY2VudHJlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZV9fY2VudHJlZCcpXG4gICAgICAgICAgICAgICAgLCBzdGVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGVwc19fc3RlcCcpXG4gICAgICAgICAgICAgICAgLCBzZXJ2aWNlX3NsaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlX3NlcnZpY2UnKVxuICAgICAgICAgICAgICAgICwgc2VydmljZV9pbGx1c3RyYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVfX2lsbHVzdHJhdGlvbicpXG4gICAgICAgICAgICAgICAgLCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlX21haW4nKVxuICAgICAgICAgICAgICAgICwgc2hlbWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hlbWEnKVxuICAgICAgICAgICAgICAgICwgaGVhZGVyX2hlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKS5vZmZzZXRIZWlnaHRcbiAgICAgICAgICAgICAgICAsIGZvb3Rlcl9oZWlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9vdGVyJykub2Zmc2V0SGVpZ2h0XG4gICAgICAgICAgICAgICAgLCBzaGVtYV9kZXRhaWxzID0gc2hlbWEuY2xvc2VzdCgnLnNsaWRlX19kZXRhaWxzJylcbiAgICAgICAgICAgICAgICAsIHBob25lcyA9IG1haW4ucXVlcnlTZWxlY3RvcignLnNsaWRlX19waG9uZXMnKVxuICAgICAgICAgICAgICAgICwgcGhvbmUgPSBtYWluLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZV9fcGhvbmUnKVxuICAgICAgICAgICAgICAgICwgdmlld3BvcnRfaGVpZ2h0XG4gICAgICAgICAgICAgICAgLCB2aWV3cG9ydF93aWR0aFxuICAgICAgICAgICAgICAgICwgYXZhaWxhYmFsZV93aWR0aFxuICAgICAgICAgICAgICAgICwgYXZhaWxhYmFsZV9oZWlnaHRcbiAgICAgICAgICAgICAgICAsIGRlbHRhID0gMjBcbiAgICAgICAgICAgICAgICAsIGNlbGxcbiAgICAgICAgICAgICAgICAsIHNjYWxlID0gMVxuICAgICAgICAgICAgICAgICwgc2NhbGVfeCA9IDFcbiAgICAgICAgICAgICAgICAsIHNjYWxlX3kgPSAxXG4gICAgICAgICAgICAgICAgLCBoZWFkZXJcbiAgICAgICAgICAgICAgICAsIHNsaWRlXG4gICAgICAgICAgICAgICAgLCBib3JkZXJfd2lkdGhcbiAgICAgICAgICAgICAgICAsIGRlbHRhX3lcbiAgICAgICAgICAgICAgICAsIHRyX3lcbiAgICAgICAgICAgICAgICAsIHRyX3hcbiAgICAgICAgICAgICAgICAsIGVsZW1lbnRfd2lkdGhcbiAgICAgICAgICAgICAgICAsIGVsZW1lbnRfaGVpZ2h0XG4gICAgICAgICAgICAgICAgLCBpbGx1c3RyYXRpb25faGVpZ2h0XG4gICAgICAgICAgICAgICAgLCB3X3dpZHRoXG4gICAgICAgICAgICAgICAgLCB3X2hlaWdodFxuICAgICAgICAgICAgICAgICwgaV93aWR0aFxuICAgICAgICAgICAgICAgICwgaV9oZWlnaHQ7XG5cbiAgICAgICAgICAgIGNlbGwgPSBtYWluLnF1ZXJ5U2VsZWN0b3IoJy5mcC10YWJsZUNlbGwnKTtcbiAgICAgICAgICAgIHZpZXdwb3J0X2hlaWdodCA9IE1hdGgubWluKGNlbGwub2Zmc2V0SGVpZ2h0LCBwYXJzZUludChjZWxsLnN0eWxlLmhlaWdodCwgMTApKTtcbiAgICAgICAgICAgIHZpZXdwb3J0X3dpZHRoID0gY2VsbC5vZmZzZXRXaWR0aDtcblxuICAgICAgICAgICAgaGVhZGVyID0gbWFpbi5xdWVyeVNlbGVjdG9yKCcuc2xpZGVfX2hlYWRlcicpO1xuICAgICAgICAgICAgbWFpbi5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9IFwiYXV0byBcIiArIHZpZXdwb3J0X2hlaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgIGF2YWlsYWJhbGVfaGVpZ2h0ID0gdmlld3BvcnRfaGVpZ2h0IC0gZGVsdGEgLSBoZWFkZXIub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgKGF2YWlsYWJhbGVfaGVpZ2h0ID49IDIwMClcbiAgICAgICAgICAgICAgICAmJiAodmlld3BvcnRfd2lkdGggPiA3NTApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBwaG9uZXMuc3R5bGUuaGVpZ2h0ID0gTWF0aC5taW4oYXZhaWxhYmFsZV9oZWlnaHQsIDQ4MCkgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgcGhvbmVzLnN0eWxlLm1hcmdpbkxlZnQgPSAtTWF0aC5taW4oYXZhaWxhYmFsZV9oZWlnaHQsIDQ4MCkqMC4xICsgXCJweFwiO1xuICAgICAgICAgICAgICAgIHBob25lcy5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGF2YWlsYWJhbGVfaGVpZ2h0IDwgMjAwICkge1xuICAgICAgICAgICAgICAgIHBob25lcy5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGhvbmVzLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBpZiAodmlld3BvcnRfd2lkdGggPD0gNzUwKSB7XG4gICAgICAgICAgICAgICAgcGhvbmUuc3R5bGUuaGVpZ2h0ID0gYXZhaWxhYmFsZV9oZWlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNlbGwgPSBzZXJ2aWNlX3NsaWRlLnF1ZXJ5U2VsZWN0b3IoJy5mcC10YWJsZUNlbGwnKTtcbiAgICAgICAgICAgIHZpZXdwb3J0X2hlaWdodCA9IE1hdGgubWluKGNlbGwub2Zmc2V0SGVpZ2h0LCBwYXJzZUludChjZWxsLnN0eWxlLmhlaWdodCwgMTApKTtcbiAgICAgICAgICAgIHZpZXdwb3J0X3dpZHRoID0gY2VsbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIGhlYWRlciA9IHNlcnZpY2Vfc2xpZGUucXVlcnlTZWxlY3RvcignLnNsaWRlX19oZWFkZXInKTtcbiAgICAgICAgICAgIGlsbHVzdHJhdGlvbl9oZWlnaHQgPSAoTWF0aC5taW4oY2VsbC5vZmZzZXRIZWlnaHQsIHBhcnNlSW50KGNlbGwuc3R5bGUuaGVpZ2h0LCAxMCkpIC0gaGVhZGVyLm9mZnNldEhlaWdodCAtIGZvb3Rlcl9oZWlnaHQgLSBoZWFkZXJfaGVpZ2h0KTtcbiAgICAgICAgICAgIHNlcnZpY2VfaWxsdXN0cmF0aW9uLnN0eWxlLmhlaWdodCA9IGlsbHVzdHJhdGlvbl9oZWlnaHQgKyBcInB4XCI7XG5cbiAgICAgICAgICAgIHdfd2lkdGggPSA3MDA7XG4gICAgICAgICAgICB3X2hlaWdodCA9IDU3MDtcbiAgICAgICAgICAgIGlfd2lkdGggPSB2aWV3cG9ydF93aWR0aCoxLjI7XG4gICAgICAgICAgICBpX2hlaWdodCA9IHdfaGVpZ2h0Kmlfd2lkdGgvd193aWR0aDtcblxuICAgICAgICAgICAgaWYgKGlfaGVpZ2h0IDwgaWxsdXN0cmF0aW9uX2hlaWdodCkge1xuICAgICAgICAgICAgICAgIHNlcnZpY2VfaWxsdXN0cmF0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ3NsaWRlX19pbGx1c3RyYXRpb25faGlkZGVuJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNlcnZpY2VfaWxsdXN0cmF0aW9uLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9IFwiNTAlIDEwMCVcIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaWxsdXN0cmF0aW9uX2hlaWdodCA8IDM3MCkge1xuICAgICAgICAgICAgICAgIHNlcnZpY2VfaWxsdXN0cmF0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ3NsaWRlX19pbGx1c3RyYXRpb25faGlkZGVuJywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlcnZpY2VfaWxsdXN0cmF0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ3NsaWRlX19pbGx1c3RyYXRpb25faGlkZGVuJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNlcnZpY2VfaWxsdXN0cmF0aW9uLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9IFwiNTAlIDBcIjtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvLyBDZW50cmVkIHN0eWxlXG5cbiAgICAgICAgICAgIC8vINCn0LjRgdGC0LjQvCDQstGB0LUg0YHRgtC40LvQuCDQv9GA0LjQstC90LXRgdC10L3QvdGL0LVcbiAgICAgICAgICAgIGNlbnRyZWQucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKHN0ZXBzLCAoc3RlcCkgPT4ge1xuICAgICAgICAgICAgICAgIHN0ZXAucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgMCkgPiA0ODAgKSB7XG5cbiAgICAgICAgICAgICAgICBzbGlkZSA9IGNlbnRyZWQuY2xvc2VzdCgnLnNsaWRlJyk7XG4gICAgICAgICAgICAgICAgY2VsbCA9IGNlbnRyZWQuY2xvc2VzdCgnLmZwLXRhYmxlQ2VsbCcpO1xuICAgICAgICAgICAgICAgIHZpZXdwb3J0X2hlaWdodCA9IE1hdGgubWluKGNlbGwub2Zmc2V0SGVpZ2h0LCBwYXJzZUludChjZWxsLnN0eWxlLmhlaWdodCwgMTApKTtcbiAgICAgICAgICAgICAgICB2aWV3cG9ydF93aWR0aCA9IGNlbGwub2Zmc2V0V2lkdGg7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50X2hlaWdodCA9IHBhcnNlSW50KGNlbnRyZWQuZ2V0QXR0cmlidXRlKCdkYXRhLWhlaWdodCcpLDEwKTtcblxuICAgICAgICAgICAgICAgIGlmICh2aWV3cG9ydF93aWR0aCA+IDEyMjApe1xuICAgICAgICAgICAgICAgICAgICAvLyBkZXNrdG9wXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRfd2lkdGggPSAxMjMwO1xuICAgICAgICAgICAgICAgICAgICBkZWx0YV95ID0gMTcwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKHZpZXdwb3J0X3dpZHRoID4gNzUwKSAmJiAodmlld3BvcnRfd2lkdGggPD0gMTIyMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGFibGV0XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRfd2lkdGggPSAxMDUwO1xuICAgICAgICAgICAgICAgICAgICBkZWx0YV95ID0gMTcwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1vYmlsZVxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50X3dpZHRoID0gNDAwO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50X2hlaWdodCA9IDkwMDtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFfeSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYXZhaWxhYmFsZV9oZWlnaHQgPSB2aWV3cG9ydF9oZWlnaHQgLSBoZWFkZXJfaGVpZ2h0O1xuICAgICAgICAgICAgICAgIGF2YWlsYWJhbGVfd2lkdGggPSB2aWV3cG9ydF93aWR0aCAtIDQwO1xuXG4gICAgICAgICAgICAgICAgc2NhbGVfeCA9IGF2YWlsYWJhbGVfaGVpZ2h0L2VsZW1lbnRfaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHNjYWxlX3kgPSBhdmFpbGFiYWxlX3dpZHRoL2VsZW1lbnRfd2lkdGg7XG4gICAgICAgICAgICAgICAgc2NhbGUgPSBNYXRoLm1pbihNYXRoLm1pbihzY2FsZV94LCBzY2FsZV95KSwxKTtcblxuICAgICAgICAgICAgICAgIHRyX3kgPSAwO1xuICAgICAgICAgICAgICAgIHRyX3ggPSAwO1xuXG4gICAgICAgICAgICAgICAgaWYgKHZpZXdwb3J0X3dpZHRoIDwgNzUwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1vYmlsZVxuICAgICAgICAgICAgICAgICAgICBzY2FsZSA9IGF2YWlsYWJhbGVfaGVpZ2h0LzYyMDtcbiAgICAgICAgICAgICAgICAgICAgY2VudHJlZC5zdHlsZVtNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zZm9ybScpXSA9ICd0cmFuc2xhdGVYKC01MCUpIHNjYWxlKCcgKyBzY2FsZSArICcpJztcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBtb2JpbGVcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYXZhaWxhYmFsZV93aWR0aCA8IGVsZW1lbnRfd2lkdGggKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cl94ID0gLShlbGVtZW50X3dpZHRoIC0gdmlld3BvcnRfd2lkdGgpLzIgO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gdXBzY2FsZSB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIGlmIChzY2FsZTwxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoc3RlcHMsIChzdGVwKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcC5zdHlsZVtNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zZm9ybScpXSA9ICdzY2FsZSgnICsgTWF0aC5taW4oKDEvc2NhbGUpKjAuOCwgMikgKyAnKSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyX3ggKz0gMzA7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0cl94ICs9ICdweCc7XG4gICAgICAgICAgICAgICAgICAgIGNlbnRyZWQuc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0nKV0gPSAndHJhbnNsYXRlWCgnICsgdHJfeCArICcpIHRyYW5zbGF0ZVkoJyArIHRyX3kgKyAnKSBzY2FsZSgnICsgc2NhbGUgKyAnKSc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKHJlc2l6YWJsZXMsIChyZXNpemFibGUpID0+IHtcblxuICAgICAgICAgICAgICAgIHNsaWRlID0gcmVzaXphYmxlLmNsb3Nlc3QoJy5zbGlkZScpO1xuICAgICAgICAgICAgICAgIGhlYWRlciA9IHJlc2l6YWJsZS5jbG9zZXN0KCcuc2xpZGVfX2RldGFpbHMnKS5xdWVyeVNlbGVjdG9yKCcuc2xpZGVfX2hlYWRlcicpO1xuICAgICAgICAgICAgICAgIGNlbGwgPSByZXNpemFibGUuY2xvc2VzdCgnLmZwLXRhYmxlQ2VsbCcpO1xuXG4gICAgICAgICAgICAgICAgdmlld3BvcnRfaGVpZ2h0ID0gTWF0aC5taW4oY2VsbC5vZmZzZXRIZWlnaHQsIHBhcnNlSW50KGNlbGwuc3R5bGUuaGVpZ2h0LCAxMCkpO1xuICAgICAgICAgICAgICAgIHZpZXdwb3J0X3dpZHRoID0gY2VsbC5vZmZzZXRXaWR0aDtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnRfaGVpZ2h0ID0gcGFyc2VJbnQocmVzaXphYmxlLmdldEF0dHJpYnV0ZSgnZGF0YS1oZWlnaHQnKSwxMCk7XG4gICAgICAgICAgICAgICAgZWxlbWVudF93aWR0aCA9IHBhcnNlSW50KHJlc2l6YWJsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2lkdGgnKSwxMCk7XG5cbiAgICAgICAgICAgICAgICBzY2FsZV94ID0gYXZhaWxhYmFsZV9oZWlnaHQvZWxlbWVudF9oZWlnaHQ7XG4gICAgICAgICAgICAgICAgc2NhbGVfeSA9IGF2YWlsYWJhbGVfd2lkdGgvZWxlbWVudF93aWR0aDtcbiAgICAgICAgICAgICAgICBzY2FsZSA9IE1hdGgubWluKHNjYWxlX3gsIHNjYWxlX3kpO1xuXG5cbiAgICAgICAgICAgICAgICBpZiAodmlld3BvcnRfd2lkdGggPiB0aGlzLm1vYmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0YWJsZXQgYW5kIGRlc2t0b3AgcmVzb2x1dGlvblxuXG4gICAgICAgICAgICAgICAgICAgIGF2YWlsYWJhbGVfaGVpZ2h0ID0gdmlld3BvcnRfaGVpZ2h0IC0gaGVhZGVyX2hlaWdodCAtIGRlbHRhO1xuICAgICAgICAgICAgICAgICAgICBhdmFpbGFiYWxlX3dpZHRoID0gdmlld3BvcnRfd2lkdGgvMiAtIDQwO1xuXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlX3ggPSBhdmFpbGFiYWxlX2hlaWdodC9lbGVtZW50X2hlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVfeSA9IGF2YWlsYWJhbGVfd2lkdGgvZWxlbWVudF93aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgc2NhbGUgPSBNYXRoLm1pbihzY2FsZV94LCBzY2FsZV95KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggYXZhaWxhYmFsZV9oZWlnaHQgPCB0aGlzLm1pbl9oZWlnaHQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLmNsYXNzTGlzdC5hZGQoJ3NsaWRlX2hpZGUtcmVzaXphYmxlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc2NhbGUgPCAxICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZV9oaWRlLXJlc2l6YWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlLnN0eWxlW01vZGVybml6ci5wcmVmaXhlZCgndHJhbnNmb3JtJyldID0gJ3NjYWxlKCcgKyBzY2FsZSArICcpJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlLmNsYXNzTGlzdC5jb250YWlucygnc2xpZGVfcmlnaHQnKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyX3dpZHRoID0gKHBhcnNlSW50KHJlc2l6YWJsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtd2lkdGgnKSwxMCkpKnNjYWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlci5zdHlsZS5ib3JkZXJMZWZ0V2lkdGggPSBib3JkZXJfd2lkdGggKyAncHgnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpZXdwb3J0X3dpZHRoID4gdGhpcy50YWJsZXQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRhYmxldCByZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZS5zdHlsZS5tYXJnaW5SaWdodCA9IChoZWFkZXIub2Zmc2V0V2lkdGgvMiAtIGJvcmRlcl93aWR0aCkgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJfd2lkdGggPSAocGFyc2VJbnQocmVzaXphYmxlLmdldEF0dHJpYnV0ZSgnZGF0YS13aWR0aCcpLDEwKSkqc2NhbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnN0eWxlLmJvcmRlclJpZ2h0V2lkdGggPSBib3JkZXJfd2lkdGggKyAncHgnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpZXdwb3J0X3dpZHRoID4gdGhpcy50YWJsZXQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRhYmxldCByZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZS5zdHlsZS5tYXJnaW5MZWZ0ID0gKGhlYWRlci5vZmZzZXRXaWR0aC8yIC0gYm9yZGVyX3dpZHRoKSArICdweCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZV9oaWRlLXJlc2l6YWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlci5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1vYmlsZSByZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgICAgIGF2YWlsYWJhbGVfaGVpZ2h0ID0gdmlld3BvcnRfaGVpZ2h0IC0gaGVhZGVyX2hlaWdodCAtIGhlYWRlci5vZmZzZXRIZWlnaHQgLSA2MDtcbiAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmFsZV93aWR0aCA9IHZpZXdwb3J0X3dpZHRoIC0gNDA7XG5cbiAgICAgICAgICAgICAgICAgICAgc2NhbGVfeCA9IGF2YWlsYWJhbGVfaGVpZ2h0L2VsZW1lbnRfaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBzY2FsZV95ID0gYXZhaWxhYmFsZV93aWR0aC9lbGVtZW50X3dpZHRoO1xuICAgICAgICAgICAgICAgICAgICBzY2FsZSA9IE1hdGgubWluKHNjYWxlX3gsIHNjYWxlX3kpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdmFpbGFiYWxlX3dpZHRoIDwgZWxlbWVudF93aWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlLnN0eWxlLm1hcmdpbkxlZnQgPSAtICgoKGVsZW1lbnRfd2lkdGggLSBhdmFpbGFiYWxlX3dpZHRoKS8yKSAtIDIwKSArIFwicHhcIlxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlLnN0eWxlLm1hcmdpbkxlZnQgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiggYXZhaWxhYmFsZV9oZWlnaHQgPCAyMDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaGlkZGluZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LmFkZCgnc2xpZGVfaGlkZS1yZXNpemFibGUnKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBzY2FsZSA8IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlX2hpZGUtcmVzaXphYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGUuc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0nKV0gPSAnc2NhbGUoJyArIHNjYWxlICsgJyknO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZV9oaWRlLXJlc2l6YWJsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXphYmxlLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlci5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLm9uUmVzaXplKCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHNjcm9sbFRvVG9wKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5tb3ZlVG8oMSwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmV3IExhbmRnaW5nO1xufSkoKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuKGZ1bmN0aW9uKCkge1xuICAgIHdpbmRvdy5tb2JpbGVBbmRUYWJsZXRjaGVjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2hlY2sgPSBmYWxzZTtcbiAgICAgICAgKGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIGlmICgvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vfGFuZHJvaWR8aXBhZHxwbGF5Ym9va3xzaWxrL2kudGVzdChhKSB8fCAvMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1xcLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXxcXC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKGV8dil3fGJ1bWJ8YndcXC0obnx1KXxjNTVcXC98Y2FwaXxjY3dhfGNkbVxcLXxjZWxsfGNodG18Y2xkY3xjbWRcXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcXC1zfGRldml8ZGljYXxkbW9ifGRvKGN8cClvfGRzKDEyfFxcLWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseShcXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcXC01fGdcXC1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXFwtKG18cHx0KXxoZWlcXC18aGkocHR8dGEpfGhwKCBpfGlwKXxoc1xcLWN8aHQoYyhcXC18IHxffGF8Z3xwfHN8dCl8dHApfGh1KGF3fHRjKXxpXFwtKDIwfGdvfG1hKXxpMjMwfGlhYyggfFxcLXxcXC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XFwvKXxrbG9ufGtwdCB8a3djXFwtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcXC8oa3xsfHUpfDUwfDU0fFxcLVthLXddKXxsaWJ3fGx5bnh8bTFcXC13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bVxcLWNyfG1lKHJjfHJpKXxtaShvOHxvYXx0cyl8bW1lZnxtbygwMXwwMnxiaXxkZXxkb3x0KFxcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXFwtfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3xcXC0oWzEtOF18YykpfHBoaWx8cGlyZXxwbChheXx1Yyl8cG5cXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcXC1nfHFhXFwtYXxxYygwN3wxMnwyMXwzMnw2MHxcXC1bMi03XXxpXFwtKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aFxcLXxvb3xwXFwtKXxzZGtcXC98c2UoYyhcXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXFwtfHNoYXJ8c2llKFxcLXxtKXxza1xcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFxcLXx2XFwtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsXFwtfHRkZ1xcLXx0ZWwoaXxtKXx0aW1cXC18dFxcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXFwtfG0zfG01KXx0eFxcLTl8dXAoXFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFxcLXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoXFwtfCApfHdlYmN8d2hpdHx3aShnIHxuY3xudyl8d21sYnx3b251fHg3MDB8eWFzXFwtfHlvdXJ8emV0b3x6dGVcXC0vaS50ZXN0KGEuc3Vic3RyKDAsIDQpKSkgY2hlY2sgPSB0cnVlXG4gICAgICAgIH0pKG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCB3aW5kb3cub3BlcmEpO1xuICAgICAgICByZXR1cm4gY2hlY2s7XG4gICAgfTtcblxuICAgIHdpbmRvdy5pc01vYmlsZSA9IHtcbiAgICAgICAgQW5kcm9pZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gL0FuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICB9LFxuICAgICAgICBCbGFja0JlcnJ5OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAvQmxhY2tCZXJyeS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICAgIH0sXG4gICAgICAgIGlPUzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gL2lQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICB9LFxuICAgICAgICBXaW5kb3dzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAvSUVNb2JpbGUvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICB9LFxuICAgICAgICBhbnk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIChpc01vYmlsZS5BbmRyb2lkKCkgfHwgaXNNb2JpbGUuQmxhY2tCZXJyeSgpIHx8IGlzTW9iaWxlLmlPUygpIHx8IGlzTW9iaWxlLldpbmRvd3MoKSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY2xhc3MgTGF5b3V0IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTdGFydCBpbml0aWFsaXphdGlvbiBvbiBkb21sb2FkXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBsZXQgcmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT0gXCJsb2FkaW5nXCIpIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVhZHkudGhlbih0aGlzLmluaXQuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIEFkZGluZyBldmVudHMgYW5kIHByb3BlcnRpZXNcbiAgICAgICAgICovXG4gICAgICAgIGluaXQoKSB7XG4gICAgICAgICAgICBpZiAod2luZG93LmlzTW9iaWxlLkFuZHJvaWQoKSkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdhbmRyb2lkJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5pc01vYmlsZS5pT1MoKSkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdpb3MnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAod2luZG93Lm1vYmlsZUFuZFRhYmxldGNoZWNrKCkpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgndW5rbm93bi1tb2JpbGUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2Rlc2t0b3AnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdhbmRyb2lkJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmV3IExheW91dDtcbn0pKCk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbihmdW5jdGlvbiAoKSB7XG4gICAgY2xhc3MgTWVudSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gU3RhcnQgaW5pdGlhbGl6YXRpb24gb24gZG9tbG9hZFxuICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgICAgIGxldCByZWFkeSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT57XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT0gXCJsb2FkaW5nXCIpIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCk9PiByZXNvbHZlKCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZWFkeS50aGVuKHRoaXMuaW5pdC5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gQWRkaW5nIGV2ZW50cyBhbmQgcHJvcGVydGllc1xuICAgICAgICAgKi9cbiAgICAgICAgaW5pdCAoKSB7XG4gICAgICAgICAgICBsZXQgYmFja19idXR0b25zID0gICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5sb2dpbl9fYmFjaycpXG4gICAgICAgICAgICAgICAgLCBsb2dpbl9idXR0b25zID0gICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5sb2dpbl9fbG9naW4tYnV0dG9uLCAubG9naW5fc3VjY2VzcyAubG9naW5fX3N1Ym1pdCcpXG4gICAgICAgICAgICAgICAgLCBtb2JpbGVfcG9wdXBfYnV0dG9ucyA9ICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51X19pbnRlcnByZXRlciwgLmhlYWRlcl9faW50ZXJwcmV0ZXInKTtcblxuICAgICAgICAgICAgdGhpcy5tZW51X3BvcHVwX29wZW4gPSBmYWxzZTtcblxuICAgICAgICAgICAgdGhpcy5sb2dpbl9idXR0b24gPSAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudV9fbG9naW4nKTtcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJfYnV0dG9uID0gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnVfX3JlZ2lzdGVyJyk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RlcDEgPSAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX3JlZ2lzdGVyLXN0ZXAtMScpO1xuICAgICAgICAgICAgdGhpcy5zdGVwMV9mb3JtID0gICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW5fcmVnaXN0ZXItc3RlcC0xIGZvcm0ubG9naW5fX2Zvcm0nKTtcbiAgICAgICAgICAgIHRoaXMuc3RlcDIgPSAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX3JlZ2lzdGVyLXN0ZXAtMicpO1xuICAgICAgICAgICAgdGhpcy5zdGVwMl9mb3JtID0gICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW5fcmVnaXN0ZXItc3RlcC0yIGZvcm0ubG9naW5fX2Zvcm0nKTtcblxuICAgICAgICAgICAgdGhpcy5tb2JpbGVfcG9wdXAgPSAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfbW9iaWxlJyk7XG4gICAgICAgICAgICB0aGlzLm1vYmlsZV9wb3B1cF9jbG9zZSA9ICAgICAgIHRoaXMubW9iaWxlX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UnKTtcblxuICAgICAgICAgICAgdGhpcy53cmFwcGVyID0gICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudV9fd3JhcHBlcicpO1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJfcmVnaXN0ZXJfYnV0dG9uID0gICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19saW5rX3JlZ2lzdGVyJyk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcl9sb2dpbl9idXR0b24gPSAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2xpbmtfbG9naW4nKTtcbiAgICAgICAgICAgIHRoaXMucmVjb3ZlcnlfYnV0dG9uID0gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX19wYXNzd29yZC1yZWNvdmVyeScpO1xuICAgICAgICAgICAgdGhpcy5saWdodGJveCA9ICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Pi5saWdodGJveCcpO1xuICAgICAgICAgICAgdGhpcy5sb2dpbl9wb3B1cCA9ICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW5fbG9naW4nKTtcbiAgICAgICAgICAgIHRoaXMucmVjb3ZlcnkgPSAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX3JlY292ZXJ5Jyk7XG4gICAgICAgICAgICB0aGlzLnBhc3N3b3JkID0gICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9wYXNzd29yZCcpO1xuICAgICAgICAgICAgdGhpcy5yZWNvdmVyeV9mb3JtID0gICAgICAgICAgICB0aGlzLnJlY292ZXJ5LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9fZm9ybScpO1xuICAgICAgICAgICAgdGhpcy5wYXNzd29yZF9mb3JtID0gICAgICAgICAgICB0aGlzLnBhc3N3b3JkLnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9fZm9ybScpO1xuICAgICAgICAgICAgdGhpcy5lcnJvcl9tZXNzYWdlID0gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW5fZXJyb3InKTtcbiAgICAgICAgICAgIHRoaXMuZW1haWwgPSAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX2VtYWlsJyk7XG4gICAgICAgICAgICB0aGlzLnN1Y2Nlc3MgPSAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9zdWNjZXNzJyk7XG5cbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9vcGVuJyk7XG4gICAgICAgICAgICB0aGlzLmxhc3QgPSBbXTtcblxuICAgICAgICAgICAgdGhpcy5sb2dpbl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5Mb2dpbkZvcm0uYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnJlY292ZXJ5X2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3BlblJlY292ZXJ5LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5saWdodGJveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2VBbGwuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3BlblJlZ2lzdGVyLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJfbG9naW5fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vcGVuTG9naW5PdXRlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyX3JlZ2lzdGVyX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3BlblJlZ2lzdGVyT3V0ZXIuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLm1vYmlsZV9wb3B1cF9jbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2VNb2JpbGVQb3B1cC5iaW5kKHRoaXMpKTtcblxuICAgICAgICAgICAgdGhpcy5yZWNvdmVyeV9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuc2VuZERhdGEuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnBhc3N3b3JkX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zZW5kRGF0YS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuc3RlcDFfZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLm9wZW5OZXh0LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5zdGVwMl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuc2VuZERhdGEuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlcG9zUG9wdXAuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgICAgICQoJy5sb2dpbiBzZWxlY3QnKS5zZWxlY3QyKCk7XG5cbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChtb2JpbGVfcG9wdXBfYnV0dG9ucywgKGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3Blbk1vYmlsZVBvcHVwLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChiYWNrX2J1dHRvbnMsIChidXR0b24pID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmdvYmFjay5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwobG9naW5fYnV0dG9ucywgKGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3BlbkxvZ2luSW5uZXIuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5XZWJSVENTdXBwb3J0ID0gIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ25vLXBlZXJjb25uZWN0aW9uJyk7XG5cblxuICAgICAgICAgICAgaWYoIXRoaXMuV2ViUlRDU3VwcG9ydCkge1xuXG4gICAgICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Zvcm0ubG9naW5fX2Zvcm0gaW5wdXQsIGZvcm0ubG9naW5fX2Zvcm0gYnV0dG9uLCBmb3JtLmxvZ2luX19mb3JtIHNlbGVjdCcpLCAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZm9ybS5sb2dpbl9fZm9ybScpLCAoZm9ybSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtLmNsb3Nlc3QoJy5sb2dpbicpLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9icm93c2VyJykub3BlbigpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfYnJvd3NlcicpLCAocG9wdXApID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93UG9wdXAocG9wdXApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgb3Blbk5leHQgKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RlcDFfZm9ybS52YWxpZGF0ZSgpID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vcGVuRm9ybSh0aGlzLnN0ZXAyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcG9zUG9wdXAgKGV2ZW50KSB7XG4gICAgICAgICAgICBpZighdGhpcy5tZW51X3BvcHVwX29wZW4pe1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubW9iaWxlX3BvcHVwLnN0eWxlW01vZGVybml6ci5wcmVmaXhlZCgndHJhbnNmb3JtJyldID0gXCJ0cmFuc2xhdGVZKFwiICsgdGhpcy5tb2JpbGVfcG9wdXAub2Zmc2V0SGVpZ2h0ICsgXCJweClcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsb3NlTW9iaWxlUG9wdXAgKCkge1xuICAgICAgICAgICAgaWYoIXRoaXMubWVudV9wb3B1cF9vcGVuKXtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1lbnVfcG9wdXBfb3BlbiA9IGZhbHNlO1xuXG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLm1vYmlsZV9wb3B1cCwgXCJzdG9wXCIpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5tb2JpbGVfcG9wdXAsIHt0cmFuc2xhdGVZOiAwfSwgMjUwKTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5tb2JpbGVfcG9wdXBfYnV0dG9uLCBcInN0b3BcIik7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLm1vYmlsZV9wb3B1cF9idXR0b24sIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgICwgYmVnaW46ICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vYmlsZV9wb3B1cF9idXR0b24uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wZW5Nb2JpbGVQb3B1cCAoKSB7XG4gICAgICAgICAgICBpZih0aGlzLm1lbnVfcG9wdXBfb3Blbil7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tZW51X3BvcHVwX29wZW4gPSB0cnVlO1xuXG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLm1vYmlsZV9wb3B1cCwgXCJzdG9wXCIpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5tb2JpbGVfcG9wdXAsIHt0cmFuc2xhdGVZOiB0aGlzLm1vYmlsZV9wb3B1cC5vZmZzZXRIZWlnaHQgKyBcInB4XCJ9LCAyNTApO1xuXG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLm1vYmlsZV9wb3B1cF9idXR0b24sIFwic3RvcFwiKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubW9iaWxlX3BvcHVwX2J1dHRvbiwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgLCBjb21wbGV0ZTogKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9iaWxlX3BvcHVwX2J1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBzaG93UG9wdXAgKHBvcHVwKSB7XG4gICAgICAgICAgICBpZiAocG9wdXAuc2hvdyAhPSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIHBvcHVwLnNob3coKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLnNob3dQb3B1cC5iaW5kKHRoaXMsIHBvcHVwKSwgNTApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTY3JvbGwgdG8gZmlyc3Qgc2xpZGUgYW5kIG9wZW4gbG9naW4gZm9ybVxuICAgICAgICAgKi9cbiAgICAgICAgb3BlbkxvZ2luT3V0ZXIgKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5tb3ZlVG8oMSwgMCk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dpbl9idXR0b24uY2xpY2soKTtcbiAgICAgICAgICAgIH0sIDgwMClcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gU2Nyb2xsIHRvIGZpcnN0IHNsaWRlIGFuZCBvcGVuIHJlZ2lzdGVyIGZvcm1cbiAgICAgICAgICovXG4gICAgICAgIG9wZW5SZWdpc3Rlck91dGVyIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICQuZm4uZnVsbHBhZ2UubW92ZVRvKDEsIDApO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJfYnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICB9LCA4MDApXG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFNlbmQgcmVnaXN0cmF0aW9uIGRhdGEgYW5kIHNob3cgbWVzc2FnZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VuZERhdGEgKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbGV0IGZvcm0gPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuXG4gICAgICAgICAgICBpZiAoZm9ybS52YWxpZGF0ZSgpID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGxldCBET05FID0gNFxuICAgICAgICAgICAgICAgICwgT0sgPSAyMDBcbiAgICAgICAgICAgICAgICAsIG1lc3NhZ2VcbiAgICAgICAgICAgICAgICAsIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG4gICAgICAgICAgICAgICAgLCBsb2FkZWQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHhoci5vcGVuKCdQT1NUJywgZm9ybS5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpKTtcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNlbmQobmV3IEZvcm1EYXRhKGZvcm0pKTtcbiAgICAgICAgICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gRE9ORSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVjb3ZlcnlfZm9ybS5yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSBPSykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IHBhcnNlSW50KHhoci5zdGF0dXMsIDEwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHhoci5zdGF0dXNUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChmb3JtLmhhc0F0dHJpYnV0ZSgnZGF0YS1jaGVjaycpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSB0aGlzLnNob3dDaGVja01lc3NhZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gdGhpcy5zaG93U3VjY2Vzc01lc3NhZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsb2FkZWQudGhlbihtZXNzYWdlKS5jYXRjaCh0aGlzLnNob3dFcnJvck1lc3NhZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgLy8gbG9hZGVkLnRoZW4obWVzc2FnZSkuY2F0Y2gobWVzc2FnZSk7XG5cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcjogJywgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gU2hvdyBjaGVjayBlbWFpbCBtZXNzYWdlXG4gICAgICAgICAqL1xuICAgICAgICBzaG93Q2hlY2tNZXNzYWdlICgpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5lbWFpbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFNob3cgc3VjY2VzcyBtZXNzYWdlXG4gICAgICAgICAqL1xuICAgICAgICBzaG93U3VjY2Vzc01lc3NhZ2UgKCkge1xuICAgICAgICAgICAgdGhpcy5vcGVuRm9ybSh0aGlzLnN1Y2Nlc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBPcGVuIGxvZ2luXG4gICAgICAgICAqL1xuICAgICAgICBvcGVuTG9naW5Jbm5lciAoKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5Gb3JtKHRoaXMubG9naW5fcG9wdXApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTaG93IG1lc3NhZ2VcbiAgICAgICAgICovXG4gICAgICAgIHNob3dFcnJvck1lc3NhZ2UgKHJlYXNvbikge1xuICAgICAgICAgICAgdGhpcy5sYXN0ID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZWFzb24uY29kZSwgJ1Jlc3BvbmNlIHN0YXR1cyBjb2RlOiAnICsgcmVhc29uLmNvZGUgKyAnLiAnICsgcmVhc29uLm1lc3NhZ2UgKyAnLicpO1xuICAgICAgICAgICAgdGhpcy5vcGVuRm9ybSh0aGlzLmVycm9yX21lc3NhZ2UsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBPcGVuIGxhc3QgcGFnZVxuICAgICAgICAgKi9cbiAgICAgICAgZ29iYWNrICgpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gU2hvdyBlbWFpbCBzZW50IHdhcm5pbmdcbiAgICAgICAgICovXG4gICAgICAgIGVtYWlsSGF2ZVNlbmQgKCkge1xuICAgICAgICAgICAgdGhpcy5vcGVuRm9ybSh0aGlzLmVtYWlsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gT3BlbiByZWdpc3RlciBmb3JtXG4gICAgICAgICAqL1xuICAgICAgICBvcGVuUmVnaXN0ZXJJbm5lciAoKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5Gb3JtKHRoaXMuc3RlcDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBPcGVuIHJlZ2lzdGVyIGZvcm1cbiAgICAgICAgICovXG4gICAgICAgIG9wZW5SZWdpc3RlciAoKSB7XG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLnNldEFsbG93U2Nyb2xsaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICQuZm4uZnVsbHBhZ2Uuc2V0S2V5Ym9hcmRTY3JvbGxpbmcoZmFsc2UpO1xuXG4gICAgICAgICAgICBsZXQgcHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5zdGVwMSwgcHJvcHMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5zdGVwMTtcblxuICAgICAgICAgICAgcHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpZ2h0Ym94LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTBcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLmxpZ2h0Ym94LCBwcm9wcywgb3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIE9wZW4gcmVjb3ZlcnkgZm9ybXNcbiAgICAgICAgICovXG4gICAgICAgIG9wZW5SZWNvdmVyeSAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZighdGhpcy5XZWJSVENTdXBwb3J0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vcGVuRm9ybSh0aGlzLnJlY292ZXJ5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gT3BlbiByZWNvdmVyeSBmb3Jtc1xuICAgICAgICAgKiBAcGFyYW0gZm9ybSB7bm9kZX0gRm9ybSB5b3Ugd2FudCB0byBvcGVuXG4gICAgICAgICAqIEBwYXJhbSBiYWNrIHtub2RlfSBGb3JtIHdoaWNoIHlvdSB3YW50IHRvIG9wZW4gd2hlbiB1c2VyIHByZXNzIGJhY2ssIGJ5IGRlZmF1bHQg4oCUwqBsYXN0IGZvcm0gb3BlbmVkXG4gICAgICAgICAqL1xuICAgICAgICBvcGVuRm9ybSAocG9wdXAsIGRvbnRfc2F2ZSkge1xuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5zZXRBbGxvd1Njcm9sbGluZyhmYWxzZSk7XG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLnNldEtleWJvYXJkU2Nyb2xsaW5nKGZhbHNlKTtcblxuICAgICAgICAgICAgbGV0IGZvcm0gPSB0aGlzLmN1cnJlbnQucXVlcnlTZWxlY3RvcignZm9ybScpO1xuICAgICAgICAgICAgaWYgKGZvcm0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9Pntmb3JtLmNsZWFyKCk7fSwgNTAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwb3B1cCA9PSBcInVuZGVmaW5lZFwiICYmIHRoaXMubGFzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcG9wdXAgPSB0aGlzLmxhc3QucG9wKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwb3B1cCA9PSBcInVuZGVmaW5lZFwiICYmIHRoaXMubGFzdC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VBbGwoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvbnRfc2F2ZSAhPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0LnB1c2godGhpcy5jdXJyZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9ybSA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbiAgICAgICAgICAgIGlmIChmb3JtICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57Zm9ybS5jbGVhcigpO30sIDUwMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC0gdGhpcy5jdXJyZW50Lm9mZnNldFdpZHRoICsgXCJweFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5jdXJyZW50LCBwcm9wcywgb3B0aW9ucyk7XG4gICAgICAgICAgICBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTBcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBWZWxvY2l0eShwb3B1cCwgcHJvcHMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gcG9wdXA7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIENsb3NlIGFsbCBmb3Jtc1xuICAgICAgICAgKi9cbiAgICAgICAgY2xvc2VBbGwgKCkge1xuXG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLnNldEFsbG93U2Nyb2xsaW5nKHRydWUpO1xuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5zZXRLZXlib2FyZFNjcm9sbGluZyh0cnVlKTtcblxuICAgICAgICAgICAgbGV0IHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICByaWdodDogLSB0aGlzLmN1cnJlbnQub2Zmc2V0V2lkdGggKyBcInB4XCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTBcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLmN1cnJlbnQsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IG51bGw7XG5cbiAgICAgICAgICAgIHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saWdodGJveC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTBcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLmxpZ2h0Ym94LCBwcm9wcywgb3B0aW9ucyk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57dGhpcy5jbGVhckFsbCgpO30sIDUwMCk7XG4gICAgICAgIH1cblxuICAgICAgICBjbGVhckFsbCAoKSB7XG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpLCAoZm9ybSkgPT4ge1xuICAgICAgICAgICAgICAgIGZvcm0uY2xlYXIoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKCcubG9naW4gc2VsZWN0Jykuc2VsZWN0MihcImRlc3Ryb3lcIik7XG4gICAgICAgICAgICAkKCcubG9naW4gc2VsZWN0Jykuc2VsZWN0MigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBPcGVuIGxvZ2luIHBvcHVwXG4gICAgICAgICAqL1xuICAgICAgICBvcGVuTG9naW5Gb3JtIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5zZXRBbGxvd1Njcm9sbGluZyhmYWxzZSk7XG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLnNldEtleWJvYXJkU2Nyb2xsaW5nKGZhbHNlKTtcblxuICAgICAgICAgICAgbGV0IHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICByaWdodDogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubG9naW5fcG9wdXAsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMubG9naW5fcG9wdXA7XG5cbiAgICAgICAgICAgIHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBiZWdpbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saWdodGJveC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5saWdodGJveCwgcHJvcHMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmV3IE1lbnU7XG59KSgpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4oZnVuY3Rpb24gKCkge1xuXG4gICAgLyoqXG4gICAgICogQGNsYXNzIFBvcHVwXG4gICAgICovXG4gICAgY2xhc3MgUG9wdXAge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIEFkZGluZyBldmVudHMgYW5kIHByb3BlcnRpZXNcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3RvciAocG9wdXApIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXAgPSBwb3B1cDtcbiAgICAgICAgICAgIHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnBvcHVwLmNsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wb3B1cC5vcGVuID0gdGhpcy5vcGVuLmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBvcHVwLnNob3cgPSB0aGlzLnNob3cuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmphbXBpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3cgKCkge1xuICAgICAgICAgICAgdGhpcy5wb3B1cC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgdGhpcy5wb3B1cC5zdHlsZVtNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zZm9ybScpXSA9IFwicm90YXRlWCgwKVwiO1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaGlkZSAoKSB7XG4gICAgICAgICAgICB0aGlzLnBvcHVwLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIHRoaXMucG9wdXAuc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0nKV0gPSBcInJvdGF0ZVgoMTgwZGVnKVwiO1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBmYWxzZTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIFwic3RvcFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsb3NlICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmphbXBpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwgXCJmaW5pc2hcIik7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCB7XG4gICAgICAgICAgICAgICAgcm90YXRlWDogXCIxMjBkZWdcIlxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDBcbiAgICAgICAgICAgICAgICAsIGJlZ2luOiAoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1cC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAsIGNvbXBsZXRlOiAoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wZW4gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuamFtcGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cykge1xuICAgICAgICAgICAgICAgIHRoaXMuanVtcCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuamFtcGluZyA9IHRydWU7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCBcImZpbmlzaFwiKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIHtcbiAgICAgICAgICAgICAgICByb3RhdGVYOiBcIjBkZWdcIlxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDBcbiAgICAgICAgICAgICAgICAsIGJlZ2luOiAoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1cC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAsIGNvbXBsZXRlOiAoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge3JvdGF0ZVg6IFwiMjBkZWdcIn0sIDE1MCk7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCB7cm90YXRlWDogXCIwZGVnXCJ9LCAxMjUpO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge3JvdGF0ZVg6IFwiMTBkZWdcIn0sIDIwMCk7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCB7cm90YXRlWDogXCIwZGVnXCJ9LCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246MTc1XG4gICAgICAgICAgICAgICAgLCBjb21wbGV0ZTogKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuamFtcGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBqdW1wICgpIHtcbiAgICAgICAgICAgIHRoaXMuamFtcGluZyA9IHRydWU7XG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLnBvcHVwLCBcImZpbmlzaFwiKTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIHtyb3RhdGVYOiBcIjM1ZGVnXCJ9LCAxNTApO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge3JvdGF0ZVg6IFwiMGRlZ1wifSwgMTI1KTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIHtyb3RhdGVYOiBcIjIwZGVnXCJ9LCAyMDApO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge3JvdGF0ZVg6IFwiMGRlZ1wifSwgMTc1KTtcbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucG9wdXAsIHtyb3RhdGVYOiBcIjE1ZGVnXCJ9LCAyNTApO1xuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5wb3B1cCwge3JvdGF0ZVg6IFwiMGRlZ1wifSwge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMjVcbiAgICAgICAgICAgICAgICAsIGNvbXBsZXRlOiAoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5qYW1waW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG5cbiAgICBsZXQgcmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+e1xuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPSBcImxvYWRpbmdcIikgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCk9PiByZXNvbHZlKCkpO1xuICAgIH0pO1xuXG4gICAgcmVhZHkudGhlbigoKT0+e1xuICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX2Jyb3dzZXInKSwgKHBvcHVwKSA9PiB7XG4gICAgICAgICAgICBuZXcgUG9wdXAocG9wdXApO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxufSkoKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuKGZ1bmN0aW9uKCkge1xuXG4gICAgLyoqXG4gICAgICogQGNsYXNzZGVzYyBDbGFzcyByZXByZXNlbnRpbmcgZm9ybSB2YWxpZGF0aW9uXG4gICAgICogQGNsYXNzXG4gICAgICovXG5cbiAgICBjbGFzcyBWYWxpZGF0aW9uIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBBZGRpbmcgZXZlbnRzIGFuZCBwcm9wZXJ0aWVzXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IoZm9ybSkge1xuICAgICAgICAgICAgdGhpcy5mb3JtID0gZm9ybTtcbiAgICAgICAgICAgIGZvcm0uc2V0QXR0cmlidXRlKFwibm92YWxpZGF0ZVwiLCBcIm5vdmFsaWRhdGVcIik7XG4gICAgICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMudmFsaWRhdGUuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICBmb3JtLnZhbGlkYXRlID0gdGhpcy52YWxpZGF0ZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgZm9ybS5jbGVhciA9IHRoaXMuY2xlYXIuYmluZCh0aGlzKTtcblxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlcyA9IHtcbiAgICAgICAgICAgICAgICBlbjoge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogXCJSZXF1aXJlZCBmaWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICwgZW1haWw6IFwiV3JvbmcgZW1haWwgZm9ybWF0XCJcbiAgICAgICAgICAgICAgICAgICAgLCBlcXVhbDogXCJQYXNzd29yZCBmaWVsZHMgc2hvdWxkIGJlIGVxdWFsXCJcbiAgICAgICAgICAgICAgICAgICAgLCB1cmw6IFwiV3JvbmcgdXJsIGZvcm1hdFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICwgcnU6IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwi0J/QvtC70LUg0L7QsdGP0LfQsNGC0LXQu9GM0L3QviDQtNC70Y8g0LfQsNC/0L7Qu9C90LXQvdC40Y9cIlxuICAgICAgICAgICAgICAgICAgICAsIGVtYWlsOiBcItCf0YDQvtCy0LXRgNGM0YLQtSDRhNC+0YDQvNCw0YIgZW1haWxcIlxuICAgICAgICAgICAgICAgICAgICAsIGVxdWFsOiBcItCf0LDRgNC+0LvQuCDQtNC+0LvQttC90Ysg0YHQvtCy0L/QsNC00LDRgtGMXCJcbiAgICAgICAgICAgICAgICAgICAgLCB1cmw6IFwi0J/RgNC+0LLQtdGA0YzRgtC1INGE0L7RgNC80LDRgiBVUkxcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gUmVzZXQgZm9ybSBhbmQgY2xlYXIgZXJyb3JzXG4gICAgICAgICAqL1xuICAgICAgICBjbGVhciAoKSB7XG4gICAgICAgICAgICB0aGlzLmZvcm0ucmVzZXQoKTtcbiAgICAgICAgICAgIGxldCBzZWxlY3RvcnMgPSAkKHRoaXMuZm9ybSkuZmluZCgnc2VsZWN0Jyk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0b3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvcnMuc2VsZWN0MihcImRlc3Ryb3lcIik7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3JzLnNlbGVjdDIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgICAgIGxldCBlcnJvcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1lcnJvcicpLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS12YWxpZF0sIFtkYXRhLWludmFsaWRdJyk7XG5cbiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZXJyb3JzLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZmllbGRzLCAoZmllbGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWludmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXZhbGlkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0sMTAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gUmVtb3ZlIGVycm9yIG1lc3NhZ2UgYWZ0ZXIgZWxlbWVudFxuICAgICAgICAgKiBAcGFyYW0ge05vZGV9IGVsZW1lbnQgLSBlbGVtZW50LCBhZnRlciB3aGljaCB3ZSB3aWxsIGFkZCBlcnJvciBtZXNzYWdlXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIC0gZXJyb3IgbWVzc2FnZVxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwcGUgLSBlcnJvciB0eXBlXG4gICAgICAgICAqL1xuICAgICAgICBhZGRFcnJvcihlbGVtZW50LCBtZXNzYWdlLCB0eXBlKSB7XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmZvcm0tZXJyb3JbZGF0YS10eXBlPVwiJyArIHR5cGUgKyAnXCJdJykgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBlcnJvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1AnKTtcbiAgICAgICAgICAgIGVycm9yLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG1lc3NhZ2UpKTtcbiAgICAgICAgICAgIGVycm9yLmNsYXNzTGlzdC5hZGQoJ2Zvcm0tZXJyb3InKTtcbiAgICAgICAgICAgIGVycm9yLnNldEF0dHJpYnV0ZSgnZGF0YS10eXBlJywgdHlwZSk7XG4gICAgICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBSZW1vdmUgZXJyb3IgbWVzc2FnZSBvZiBzb21lIHR5cGUgYWZ0ZXIgZWxlbWVudFxuICAgICAgICAgKiBAcGFyYW0ge05vZGV9IGVsZW1lbnQgLSBlbGVtZW50LCBhZnRlciB3aGljaCBlcnJvciBtZXNzYWdlIGlzXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBwZSAtIGVycm9yIHR5cGVcbiAgICAgICAgICovXG4gICAgICAgIGNsZWFyRXJyb3IoZWxlbWVudCwgdHlwZSkge1xuXG4gICAgICAgICAgICBsZXQgZXJyID0gZWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWVycm9yW2RhdGEtdHlwZT1cIicgKyB0eXBlICsgJ1wiXScpO1xuICAgICAgICAgICAgaWYgKGVyciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFZhbGlkYXRlIGZvcm1cbiAgICAgICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgLSBzdWJtaXQgZXZlbnRcbiAgICAgICAgICogQHRvZG8gSW1wbGVtZW50IGxvZ2luIHZhbGlkYXRpb25cbiAgICAgICAgICovXG4gICAgICAgIHZhbGlkYXRlKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50ICE9IFwidW5kZWZpbmVkXCIgJiYgIWV2ZW50LmN1cnJlbnRUYXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLXJlbG9hZCcpKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHZhbGlkID0gdHJ1ZSxcbiAgICAgICAgICAgICAgICBuZXh0ID0gbnVsbCxcbiAgICAgICAgICAgICAgICBlcXVhbF9maWVsZHMgPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZXF1YWxdJyksXG4gICAgICAgICAgICAgICAgcmVxdWlyZWRfZmllbGRzID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyZXF1aXJlZF0nKSxcbiAgICAgICAgICAgICAgICB1cmxfZmllbGRzID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJ1cmxcIl0nKSxcbiAgICAgICAgICAgICAgICBlbWFpbF9maWVsZHMgPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImVtYWlsXCJdJyksXG4gICAgICAgICAgICAgICAgdXJsX3JlZ2V4ID0gbmV3IFJlZ0V4cChcIl4oaHR0cHxodHRwc3xmdHApXFw6Ly8oW2EtekEtWjAtOVxcLlxcLV0rKFxcOlthLXpBLVowLTlcXC4mYW1wOyVcXCRcXC1dKykqQCkqKCgyNVswLTVdfDJbMC00XVswLTldfFswLTFdezF9WzAtOV17Mn18WzEtOV17MX1bMC05XXsxfXxbMS05XSlcXC4oMjVbMC01XXwyWzAtNF1bMC05XXxbMC0xXXsxfVswLTldezJ9fFsxLTldezF9WzAtOV17MX18WzEtOV18MClcXC4oMjVbMC01XXwyWzAtNF1bMC05XXxbMC0xXXsxfVswLTldezJ9fFsxLTldezF9WzAtOV17MX18WzEtOV18MClcXC4oMjVbMC01XXwyWzAtNF1bMC05XXxbMC0xXXsxfVswLTldezJ9fFsxLTldezF9WzAtOV17MX18WzAtOV0pfChbYS16QS1aMC05XFwtXStcXC4pKlthLXpBLVowLTlcXC1dK1xcLihjb218ZWR1fGdvdnxpbnR8bWlsfG5ldHxvcmd8Yml6fGFycGF8aW5mb3xuYW1lfHByb3xhZXJvfGNvb3B8bXVzZXVtfFthLXpBLVpdezJ9KSkoXFw6WzAtOV0rKSooLygkfFthLXpBLVowLTlcXC5cXCxcXD9cXCdcXFxcXFwrJmFtcDslXFwkI1xcPX5fXFwtXSspKSokXCIsIFwiaVwiKSxcbiAgICAgICAgICAgICAgICBlbWFpbF9yZWdleCA9IG5ldyBSZWdFeHAoXCJeKFthLXpBLVowLTlfXFwuXFwtXSkrXFxAKChbYS16QS1aMC05XFwtXSkrXFwuKSsoW2EtekEtWjAtOV17Miw0fSkrJFwiKTtcblxuICAgICAgICAgICAgLyogY2hlY2sgZXF1YWwgZmllbGRzICovXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZXF1YWxfZmllbGRzLCAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBlcXVhbCA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1lcXVhbFwiKSk7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudmFsdWUudHJpbSgpICE9IGVxdWFsLnZhbHVlLnRyaW0oKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEVycm9yKGVsZW1lbnQsIHRoaXMubWVzc2FnZXNbZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnbGFuZycpXS5lcXVhbCwgXCJlcXVhbFwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRXJyb3IoZWxlbWVudCwgXCJlcXVhbFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLyogY2hlY2sgcmVxdWlyZWQgZmllbGRzICovXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwocmVxdWlyZWRfZmllbGRzLCAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnZhbHVlLnRyaW0oKSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEVycm9yKGVsZW1lbnQsIHRoaXMubWVzc2FnZXNbZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnbGFuZycpXS5yZXF1aXJlZCwgXCJyZXF1aXJlZFwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRXJyb3IoZWxlbWVudCwgJ3JlcXVpcmVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qIGNoZWNrIHVybCBmaWVsZHMgKi9cbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbCh1cmxfZmllbGRzLCAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICgoZWxlbWVudC52YWx1ZS50cmltKCkubGVuZ3RoID4gMCkgJiYgKHVybF9yZWdleC50ZXN0KGVsZW1lbnQudmFsdWUudHJpbSgpKSA9PT0gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRXJyb3IoZWxlbWVudCwgdGhpcy5tZXNzYWdlc1tkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdsYW5nJyldLnVybCwgJ3VybCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJFcnJvcihlbGVtZW50LCAndXJsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qIGNoZWNrIGVtYWlsIGZpZWxkcyAqL1xuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGVtYWlsX2ZpZWxkcywgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoKGVsZW1lbnQudmFsdWUudHJpbSgpLmxlbmd0aCA+IDApICYmIChlbWFpbF9yZWdleC50ZXN0KGVsZW1lbnQudmFsdWUudHJpbSgpKSA9PT0gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRXJyb3IoZWxlbWVudCwgdGhpcy5tZXNzYWdlc1tkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCdsYW5nJyldLmVtYWlsLCAnZW1haWwnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRXJyb3IoZWxlbWVudCwgJ2VtYWlsJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgbGV0IGFsbF9maWVsZHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlcXVhbF9maWVsZHMpLmNvbmNhdChcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChyZXF1aXJlZF9maWVsZHMpLFxuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHVybF9maWVsZHMpLFxuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGVtYWlsX2ZpZWxkcylcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChhbGxfZmllbGRzLCAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBlcnIgPSBlbGVtZW50LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmZvcm0tZXJyb3InKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGludmFsaWQgPSBkb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUoXCJkYXRhLWludmFsaWRcIik7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWQudmFsdWUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT0gXCJTRUxFQ1RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5uZXh0U2libGluZy5zZXRBdHRyaWJ1dGVOb2RlKGludmFsaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5uZXh0U2libGluZy5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtdmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlTm9kZShpbnZhbGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWxpZCA9IGRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZShcImRhdGEtdmFsaWRcIik7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkLnZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PSBcIlNFTEVDVFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lm5leHRTaWJsaW5nLnNldEF0dHJpYnV0ZU5vZGUodmFsaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5uZXh0U2libGluZy5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtaW52YWxpZCcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGVOb2RlKHZhbGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWludmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgZXJyb3JzX2NvdW50ID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX2Vycm9yJykubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGVycm9yc19jb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmFsaWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBldmVudCAhPSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdmFsaWQ7XG5cbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgbGV0IHJlYWR5ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPSBcImxvYWRpbmdcIikgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICB9KTtcblxuICAgIHJlYWR5LnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCBmb3JtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Zvcm0nKTtcbiAgICAgICAgW10uZm9yRWFjaC5jYWxsKGZvcm1zLCAoZm9ybSkgPT4ge1xuICAgICAgICAgICAgbmV3IFZhbGlkYXRpb24oZm9ybSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9