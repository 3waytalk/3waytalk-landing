"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();!function(){var e=function(){function e(){_classCallCheck(this,e);var t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(this.init.bind(this))}return _createClass(e,[{key:"init",value:function(){var e=document.querySelector(".header"),t=document.querySelector(".clock");$(".landing").fullpage({sectionSelector:".landing__section",navigation:!0,afterLoad:this.hideLoader.bind(this),afterRender:this.recountSlides.bind(this),afterResize:this.recountSlides.bind(this),onLeave:function(n,o,i){1==o?e.classList.toggle("header_open",!1):e.classList.toggle("header_open",!0),6==o?t.classList.toggle("clock_visible",!0):t.classList.toggle("clock_visible",!1)}}),document.querySelector(".footer__top").addEventListener("click",this.scrollToTop.bind(this))}},{key:"hideLoader",value:function(){var e=document.querySelector(".loader__wrapper"),t={opacity:0},n={duration:500,complete:function(){e.parentNode.removeChild(e)}};Velocity(e,t,n)}},{key:"recountSlides",value:function(){var e=document.querySelector(".clock"),t=document.querySelector(".fp-slidesContainer"),n=t.querySelector(".slide__title"),o=t.querySelector(".slide__text"),i=Math.min(t.offsetHeight-n.offsetHeight-o.offsetHeight+90,702),r=i/702;t.offsetWidth<=750?(e.style[Modernizr.prefixed("transform")]="scale("+r+")",e.style.margin="0 0 0 -"+e.offsetWidth*r*.33+"px"):e.removeAttribute("style")}},{key:"scrollToTop",value:function(e){e.preventDefault(),$.fn.fullpage.moveTo(1,0)}}]),e}();new e}();
"use strict";function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function i(i,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(e,n,o){return n&&i(e.prototype,n),o&&i(e,o),e}}();!function(){window.mobileAndTabletcheck=function(){var i=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(i=!0)}(navigator.userAgent||navigator.vendor||window.opera),i},window.isMobile={Android:function(){return/Android/i.test(navigator.userAgent)},BlackBerry:function(){return/BlackBerry/i.test(navigator.userAgent)},iOS:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},Windows:function(){return/IEMobile/i.test(navigator.userAgent)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Windows()}};var i=function(){function i(){_classCallCheck(this,i);var e=new Promise(function(i,e){return"loading"!=document.readyState?i():void document.addEventListener("DOMContentLoaded",function(){return i()})});e.then(this.init.bind(this))}return _createClass(i,[{key:"init",value:function(){window.isMobile.Android()?document.body.parentNode.classList.add("android"):window.isMobile.iOS()?document.body.parentNode.classList.add("ios"):window.mobileAndTabletcheck()?document.body.parentNode.classList.add("unknown-mobile"):document.body.parentNode.classList.add("desktop")}}]),i}();new i}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(){var e=function(){function e(){_classCallCheck(this,e);var t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(this.init.bind(this))}return _createClass(e,[{key:"init",value:function(){var e=this,t=document.querySelectorAll(".login__back"),i=document.querySelectorAll(".login__login-button, .login_success .login__submit");this.login_button=document.querySelector(".menu__login"),this.register_button=document.querySelector(".menu__register"),this.recovery_button=document.querySelector(".login__password-recovery"),this.register_button_inner=document.querySelector(".login__register-button"),this.lightbox=document.querySelector("body>.lightbox"),this.login_popup=document.querySelector(".login_login"),this.recovery=document.querySelector(".login_recovery"),this.register=document.querySelector(".login_register"),this.password=document.querySelector(".login_password"),this.register_back=this.register.querySelector(".login__back"),this.recovery_form=this.recovery.querySelector(".login__form"),this.register_form=this.register.querySelector(".login__form"),this.password_form=this.password.querySelector(".login__form"),this.error_message=document.querySelector(".login_error"),this.email=document.querySelector(".login_email"),this.success=document.querySelector(".login_success"),this.current=document.querySelector(".login_open"),this.last=[],this.login_button.addEventListener("click",this.openLoginForm.bind(this)),this.recovery_button.addEventListener("click",this.openRecovery.bind(this)),this.lightbox.addEventListener("click",this.closeAll.bind(this)),this.register_button.addEventListener("click",this.openRegister.bind(this)),this.register_button_inner.addEventListener("click",this.openRegisterInner.bind(this)),this.recovery_form.addEventListener("submit",this.sendData.bind(this)),this.register_form.addEventListener("submit",this.sendData.bind(this)),this.password_form.addEventListener("submit",this.sendData.bind(this)),$(".login select").select2(),[].forEach.call(t,function(t){t.addEventListener("click",e.goback.bind(e))}),console.log(i),[].forEach.call(i,function(t){t.addEventListener("click",e.openLoginInner.bind(e))})}},{key:"sendData",value:function(e){var t=this;e.preventDefault();var i=e.currentTarget;if(0!=i.validate())try{!function(){var e=4,n=200,o=void 0,r=new XMLHttpRequest,s=new Promise(function(o,s){r.open("POST",i.getAttribute("action")),r.send(new FormData(i)),r.onreadystatechange=function(){r.readyState===e&&(t.recovery_form.reset(),r.status===n?o():s({code:parseInt(r.status,10),message:r.statusText}))}});o=i.hasAttribute("data-check")?t.showCheckMessage.bind(t):t.showSuccessMessage.bind(t),s.then(o)["catch"](t.showErrorMessage.bind(t))}()}catch(n){console.log("error: ",n)}}},{key:"showCheckMessage",value:function(){this.openForm(this.email)}},{key:"showSuccessMessage",value:function(){this.openForm(this.success)}},{key:"openLoginInner",value:function(){this.openForm(this.login_popup)}},{key:"showErrorMessage",value:function(e){console.log(e.code,"Responce status code: "+e.code+". "+e.message+"."),this.openForm(this.error_message)}},{key:"goback",value:function(){this.openForm()}},{key:"emailHaveSend",value:function(){this.openForm(this.email)}},{key:"openRegisterInner",value:function(){this.register_back.style.visibility="visible",this.openForm(this.register)}},{key:"openRegister",value:function(){var e=this;event.preventDefault(),$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1),this.register_back.style.visibility="hidden";var t={right:0},i={duration:250};Velocity(this.register,t,i),this.current=this.register,t={opacity:1},i={begin:function(){e.lightbox.style.display="block"},duration:250},Velocity(this.lightbox,t,i)}},{key:"openRecovery",value:function(){this.openForm(this.recovery)}},{key:"openForm",value:function(e){$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1);var t=this.current.querySelector("form");null!=t&&setTimeout(function(){t.clear()},250),"undefined"==typeof e?e=this.last.pop():this.last.push(this.current);var i={right:-this.current.offsetWidth+"px"},n={duration:250};Velocity(this.current,i,n),i={right:0},n={duration:250},Velocity(e,i,n),this.current=e}},{key:"closeAll",value:function(){var e=this;$.fn.fullpage.setAllowScrolling(!0),$.fn.fullpage.setKeyboardScrolling(!0);var t={right:-this.current.offsetWidth+"px"},i={duration:250};Velocity(this.current,t,i),this.current=null,t={opacity:0},i={complete:function(){e.lightbox.style.display="none"},duration:250},Velocity(this.lightbox,t,i)}},{key:"openLoginForm",value:function(e){var t=this;e.preventDefault(),$.fn.fullpage.setAllowScrolling(!1),$.fn.fullpage.setKeyboardScrolling(!1);var i={right:0},n={duration:250};Velocity(this.login_popup,i,n),this.current=this.login_popup,i={opacity:1},n={begin:function(){t.lightbox.style.display="block"},duration:250},Velocity(this.lightbox,i,n)}}]),e}();new e}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();!function(){var e=function(){function e(t){_classCallCheck(this,e),this.form=t,t.setAttribute("novalidate","novalidate"),t.addEventListener("submit",this.validate.bind(this)),t.validate=this.validate.bind(this),t.clear=this.clear.bind(this),this.messages={en:{required:"Required field",email:"Wrong email format",equal:"Password fields should be equal",url:"Wrong url format"},ru:{required:"Поле обязательно для заполнения",email:"Проверьте формат email",equal:"Пароли должны совпадать",url:"Проверьте формат URL"}}}return _createClass(e,[{key:"clear",value:function(){this.form.reset(),setTimeout(function(){var e=document.querySelectorAll(".form-error"),t=document.querySelectorAll("[data-valid], [data-invalid]");[].forEach.call(e,function(e){e.parentNode.removeChild(e)}),[].forEach.call(t,function(e){e.removeAttribute("data-invalid"),e.removeAttribute("data-valid")})},100)}},{key:"addError",value:function(e,t,r){if(null==e.parentNode.querySelector('.form-error[data-type="'+r+'"]')){var a=document.createElement("P");a.appendChild(document.createTextNode(t)),a.classList.add("form-error"),a.setAttribute("data-type",r),e.parentNode.appendChild(a)}}},{key:"clearError",value:function(e,t){var r=e.parentNode.querySelector('.form-error[data-type="'+t+'"]');null!=r&&e.parentNode.removeChild(r)}},{key:"validate",value:function(e){var t=this;"undefined"==typeof e||e.currentTarget.hasAttribute("data-reload")||e.preventDefault();var r=!0,a=this.form.querySelectorAll("[data-equal]"),l=this.form.querySelectorAll("[required]"),o=this.form.querySelectorAll('input[type="url"]'),i=this.form.querySelectorAll('input[type="email"]'),n=new RegExp("^(http|https|ftp)://([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&amp;%$-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9-]+.)*[a-zA-Z0-9-]+.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(/($|[a-zA-Z0-9.,?'\\+&amp;%$#=~_-]+))*$","i"),u=new RegExp("^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$");[].forEach.call(a,function(e){var a=t.form.querySelector(e.getAttribute("data-equal"));e.value.trim()!=a.value.trim()?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].equal,"equal")):t.clearError(e,"equal")}),[].forEach.call(l,function(e){""===e.value.trim()?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].required,"required")):t.clearError(e,"required")}),[].forEach.call(o,function(e){e.value.trim().length>0&&n.test(e.value.trim())===!1?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].url,"url")):t.clearError(e,"url")}),[].forEach.call(i,function(e){e.value.trim().length>0&&u.test(e.value.trim())===!1?(r=!1,t.addError(e,t.messages[document.body.parentNode.getAttribute("lang")].email,"email")):t.clearError(e,"email")});var d=Array.prototype.slice.call(a).concat(Array.prototype.slice.call(l),Array.prototype.slice.call(o),Array.prototype.slice.call(i));[].forEach.call(d,function(e){var t=e.parentNode.querySelector(".form-error");if(null!=t){var r=document.createAttribute("data-invalid");r.value=!0,"SELECT"==e.tagName?(e.nextSibling.setAttributeNode(r),e.nextSibling.removeAttribute("data-valid")):(e.setAttributeNode(r),e.removeAttribute("data-valid"))}else{var a=document.createAttribute("data-valid");a.value=!0,"SELECT"==e.tagName?(e.nextSibling.setAttributeNode(a),e.nextSibling.removeAttribute("data-invalid")):(e.setAttributeNode(a),e.removeAttribute("data-invalid"))}});var c=this.form.querySelectorAll(".form_error").length;return c>0&&(r=!1),r===!1&&"undefined"!=typeof e&&e.preventDefault(),r}}]),e}(),t=new Promise(function(e,t){return"loading"!=document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})});t.then(function(){var t=document.querySelectorAll("form");[].forEach.call(t,function(t){new e(t)})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxhbmRpbmcvbGFuZGluZy5qcyIsImxheW91dC9sYXlvdXQuanMiLCJsb2dpbi9sb2dpbi5qcyIsInZhbGlkYXRvci92YWxpZGF0aW9uLmpzIl0sIm5hbWVzIjpbIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiTGFuZGdpbmciLCJ0aGlzIiwicmVhZHkiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImRvY3VtZW50IiwicmVhZHlTdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0aGVuIiwiaW5pdCIsImJpbmQiLCJ2YWx1ZSIsImhlYWRlciIsInF1ZXJ5U2VsZWN0b3IiLCJjbG9jayIsIiQiLCJmdWxscGFnZSIsInNlY3Rpb25TZWxlY3RvciIsIm5hdmlnYXRpb24iLCJhZnRlckxvYWQiLCJoaWRlTG9hZGVyIiwiYWZ0ZXJSZW5kZXIiLCJyZWNvdW50U2xpZGVzIiwiYWZ0ZXJSZXNpemUiLCJvbkxlYXZlIiwiaW5kZXgiLCJuZXh0SW5kZXgiLCJkaXJlY3Rpb24iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJzY3JvbGxUb1RvcCIsImxvYWRlciIsIm9wYWNpdHkiLCJvcHRpb25zIiwiZHVyYXRpb24iLCJjb21wbGV0ZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsIlZlbG9jaXR5IiwiY2xvY2tfc2xpZGUiLCJ0aXRsZSIsInRleHQiLCJoZWlnaHQiLCJNYXRoIiwibWluIiwib2Zmc2V0SGVpZ2h0IiwicGVyYyIsIm9mZnNldFdpZHRoIiwic3R5bGUiLCJNb2Rlcm5penIiLCJwcmVmaXhlZCIsIm1hcmdpbiIsInJlbW92ZUF0dHJpYnV0ZSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJmbiIsIm1vdmVUbyIsIndpbmRvdyIsIm1vYmlsZUFuZFRhYmxldGNoZWNrIiwiY2hlY2siLCJhIiwidGVzdCIsInN1YnN0ciIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInZlbmRvciIsIm9wZXJhIiwiaXNNb2JpbGUiLCJBbmRyb2lkIiwiQmxhY2tCZXJyeSIsImlPUyIsIldpbmRvd3MiLCJhbnkiLCJMYXlvdXQiLCJib2R5IiwiYWRkIiwiTWVudSIsIl90aGlzIiwiYmFja19idXR0b25zIiwicXVlcnlTZWxlY3RvckFsbCIsImxvZ2luX2J1dHRvbnMiLCJsb2dpbl9idXR0b24iLCJyZWdpc3Rlcl9idXR0b24iLCJyZWNvdmVyeV9idXR0b24iLCJyZWdpc3Rlcl9idXR0b25faW5uZXIiLCJsaWdodGJveCIsImxvZ2luX3BvcHVwIiwicmVjb3ZlcnkiLCJyZWdpc3RlciIsInBhc3N3b3JkIiwicmVnaXN0ZXJfYmFjayIsInJlY292ZXJ5X2Zvcm0iLCJyZWdpc3Rlcl9mb3JtIiwicGFzc3dvcmRfZm9ybSIsImVycm9yX21lc3NhZ2UiLCJlbWFpbCIsInN1Y2Nlc3MiLCJjdXJyZW50IiwibGFzdCIsIm9wZW5Mb2dpbkZvcm0iLCJvcGVuUmVjb3ZlcnkiLCJjbG9zZUFsbCIsIm9wZW5SZWdpc3RlciIsIm9wZW5SZWdpc3RlcklubmVyIiwic2VuZERhdGEiLCJzZWxlY3QyIiwiZm9yRWFjaCIsImNhbGwiLCJidXR0b24iLCJnb2JhY2siLCJjb25zb2xlIiwibG9nIiwib3BlbkxvZ2luSW5uZXIiLCJfdGhpczIiLCJmb3JtIiwiY3VycmVudFRhcmdldCIsInZhbGlkYXRlIiwiRE9ORSIsIk9LIiwibWVzc2FnZSIsInVuZGVmaW5lZCIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwibG9hZGVkIiwib3BlbiIsImdldEF0dHJpYnV0ZSIsInNlbmQiLCJGb3JtRGF0YSIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlc2V0Iiwic3RhdHVzIiwiY29kZSIsInBhcnNlSW50Iiwic3RhdHVzVGV4dCIsImhhc0F0dHJpYnV0ZSIsInNob3dDaGVja01lc3NhZ2UiLCJzaG93U3VjY2Vzc01lc3NhZ2UiLCJzaG93RXJyb3JNZXNzYWdlIiwiZXJyIiwib3BlbkZvcm0iLCJyZWFzb24iLCJ2aXNpYmlsaXR5IiwiX3RoaXMzIiwic2V0QWxsb3dTY3JvbGxpbmciLCJzZXRLZXlib2FyZFNjcm9sbGluZyIsInJpZ2h0IiwiYmVnaW4iLCJkaXNwbGF5IiwicG9wdXAiLCJzZXRUaW1lb3V0IiwiY2xlYXIiLCJwb3AiLCJwdXNoIiwiX3RoaXM0IiwiX3RoaXM1IiwiVmFsaWRhdGlvbiIsInNldEF0dHJpYnV0ZSIsIm1lc3NhZ2VzIiwiZW4iLCJyZXF1aXJlZCIsImVxdWFsIiwidXJsIiwicnUiLCJlcnJvcnMiLCJmaWVsZHMiLCJlcnJvciIsImZpZWxkIiwiZWxlbWVudCIsInR5cGUiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsInZhbGlkIiwiZXF1YWxfZmllbGRzIiwicmVxdWlyZWRfZmllbGRzIiwidXJsX2ZpZWxkcyIsImVtYWlsX2ZpZWxkcyIsInVybF9yZWdleCIsIlJlZ0V4cCIsImVtYWlsX3JlZ2V4IiwidHJpbSIsImFkZEVycm9yIiwiY2xlYXJFcnJvciIsImFsbF9maWVsZHMiLCJBcnJheSIsInNsaWNlIiwiY29uY2F0IiwiaW52YWxpZCIsImNyZWF0ZUF0dHJpYnV0ZSIsInRhZ05hbWUiLCJuZXh0U2libGluZyIsInNldEF0dHJpYnV0ZU5vZGUiLCJfdmFsaWQiLCJlcnJvcnNfY291bnQiLCJmb3JtcyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFJQSxTQUFTQSxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FGaEgsR0FBSUMsY0FBZSxXQUFlLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNQyxPQUFPQyxlQUFlVCxFQUFRSSxFQUFXTSxJQUFLTixJQUFpQixNQUFPLFVBQVVSLEVBQWFlLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZWixFQUFpQkgsRUFBWWlCLFVBQVdGLEdBQWlCQyxHQUFhYixFQUFpQkgsRUFBYWdCLEdBQXFCaEIsT0FBamlCLFdBS0ksR0FKTWtCLEdBQVEsV0FLRSxRQUxWQSxLQVdFcEIsZ0JBQWdCcUIsS0FYbEJELEVBTUUsSUFBSUUsR0FBUSxHQUFJQyxTQUFRLFNBQUNDLEVBQVNDLEdBQzlCLE1BQTJCLFdBQXZCQyxTQUFTQyxXQUFnQ0gsUUFDN0NFLFVBQVNFLGlCQUFpQixtQkFBb0IsV0FRMUMsTUFSK0NKLFFBRXZERixHQUFNTyxLQUFLUixLQUFLUyxLQUFLQyxLQUFLVixPQW9GOUIsTUFwRUFqQixjQTFCRWdCLElBMkJFSixJQUFLLE9BQ0xnQixNQVpDLFdBQ0QsR0FBSUMsR0FBU1AsU0FBU1EsY0FBYyxXQUM5QkMsRUFBUVQsU0FBU1EsY0FBYyxTQUNyQ0UsR0FBRSxZQUFZQyxVQUNWQyxnQkFBaUIsb0JBQ2ZDLFlBQVksRUFDWkMsVUFBV25CLEtBQUtvQixXQUFXVixLQUFLVixNQUNoQ3FCLFlBQWFyQixLQUFLc0IsY0FBY1osS0FBS1YsTUFDckN1QixZQUFhdkIsS0FBS3NCLGNBQWNaLEtBQUtWLE1BQ3JDd0IsUUFBUyxTQUFFQyxFQUFPQyxFQUFXQyxHQUNYLEdBQWJELEVBQ0NkLEVBQU9nQixVQUFVQyxPQUFPLGVBQWUsR0FFdkNqQixFQUFPZ0IsVUFBVUMsT0FBTyxlQUFlLEdBRzNCLEdBQWJILEVBQ0NaLEVBQU1jLFVBQVVDLE9BQU8saUJBQWlCLEdBRXhDZixFQUFNYyxVQUFVQyxPQUFPLGlCQUFpQixNQUlwRHhCLFNBQVNRLGNBQWMsZ0JBQWdCTixpQkFBaUIsUUFBU1AsS0FBSzhCLFlBQVlwQixLQUFLVixVQWV2RkwsSUFBSyxhQUNMZ0IsTUFaTyxXQUNQLEdBQUlvQixHQUFTMUIsU0FBU1EsY0FBYyxvQkFDOUIzQixHQUNFOEMsUUFBUyxHQUVYQyxHQUNFQyxTQUFVLElBQ1JDLFNBQVUsV0FDUkosRUFBT0ssV0FBV0MsWUFBWU4sSUFHMUNPLFVBQVNQLEVBQVE3QyxFQUFPK0MsTUFleEJ0QyxJQUFLLGdCQUNMZ0IsTUFaVSxXQUNWLEdBQUlHLEdBQVFULFNBQVNRLGNBQWMsVUFDN0IwQixFQUFjbEMsU0FBU1EsY0FBYyx1QkFDckMyQixFQUFRRCxFQUFZMUIsY0FBYyxpQkFDbEM0QixFQUFPRixFQUFZMUIsY0FBYyxnQkFDakM2QixFQUFTQyxLQUFLQyxJQUFJTCxFQUFZTSxhQUFlTCxFQUFNSyxhQUFlSixFQUFLSSxhQUFlLEdBQUksS0FDMUZDLEVBQU9KLEVBQU8sR0FFaEJILEdBQVlRLGFBQWUsS0FDM0JqQyxFQUFNa0MsTUFBTUMsVUFBVUMsU0FBUyxjQUFnQixTQUFVSixFQUFNLElBQy9EaEMsRUFBTWtDLE1BQU1HLE9BQVMsVUFBV3JDLEVBQU1pQyxZQUFZRCxFQUFNLElBQUssTUFHN0RoQyxFQUFNc0MsZ0JBQWdCLFlBZ0IxQnpELElBQUssY0FDTGdCLE1BWFEsU0FBQzBDLEdBQ1RBLEVBQU1DLGlCQUNOdkMsRUFBRXdDLEdBQUd2QyxTQUFTd0MsT0FBTyxFQUFFLE9BL0V6QnpELElBa0ZSLElBQUlBO0FDckZOLFlBSUEsU0FBU3BCLGlCQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUZoSCxHQUFJQyxjQUFlLFdBQWUsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU1DLE9BQU9DLGVBQWVULEVBQVFJLEVBQVdNLElBQUtOLElBQWlCLE1BQU8sVUFBVVIsRUFBYWUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlaLEVBQWlCSCxFQUFZaUIsVUFBV0YsR0FBaUJDLEdBQWFiLEVBQWlCSCxFQUFhZ0IsR0FBcUJoQixPQUFqaUIsV0FDSTRFLE9BQU9DLHFCQUF1QixXQUMxQixHQUFJQyxJQUFRLENBSVosT0FIQSxVQUFVQyxJQUNGLHNWQUFzVkMsS0FBS0QsSUFBTSwwa0RBQTBrREMsS0FBS0QsRUFBRUUsT0FBTyxFQUFHLE9BQUtILEdBQVEsSUFDOThESSxVQUFVQyxXQUFhRCxVQUFVRSxRQUFVUixPQUFPUyxPQUM5Q1AsR0FHWEYsT0FBT1UsVUFDSEMsUUFBUyxXQUNMLE1BQU8sV0FBV1AsS0FBS0UsVUFBVUMsWUFFckNLLFdBQVksV0FDUixNQUFPLGNBQWNSLEtBQUtFLFVBQVVDLFlBRXhDTSxJQUFLLFdBQ0QsTUFBTyxvQkFBb0JULEtBQUtFLFVBQVVDLFlBRTlDTyxRQUFTLFdBQ0wsTUFBTyxZQUFZVixLQUFLRSxVQUFVQyxZQUV0Q1EsSUFBSyxXQUNELE1BQVFMLFVBQVNDLFdBQWFELFNBQVNFLGNBQWdCRixTQUFTRyxPQUFTSCxTQUFTSSxXQVkxRixJQVJNRSxHQUFNLFdBS0ksUUFMVkEsS0FlRTlGLGdCQUFnQnFCLEtBZmxCeUUsRUFNRSxJQUFJeEUsR0FBUSxHQUFJQyxTQUFRLFNBQUNDLEVBQVNDLEdBQzlCLE1BQTJCLFdBQXZCQyxTQUFTQyxXQUFnQ0gsUUFDN0NFLFVBQVNFLGlCQUFpQixtQkFBb0IsV0FZMUMsTUFaK0NKLFFBRXZERixHQUFNTyxLQUFLUixLQUFLUyxLQUFLQyxLQUFLVixPQW9DOUIsTUFoQkFqQixjQTlCRTBGLElBK0JFOUUsSUFBSyxPQUNMZ0IsTUFoQkMsV0FDRzhDLE9BQU9VLFNBQVNDLFVBQ2hCL0QsU0FBU3FFLEtBQUt0QyxXQUFXUixVQUFVK0MsSUFBSSxXQUNoQ2xCLE9BQU9VLFNBQVNHLE1BQ3ZCakUsU0FBU3FFLEtBQUt0QyxXQUFXUixVQUFVK0MsSUFBSSxPQUNoQ2xCLE9BQU9DLHVCQUNkckQsU0FBU3FFLEtBQUt0QyxXQUFXUixVQUFVK0MsSUFBSSxrQkFFdkN0RSxTQUFTcUUsS0FBS3RDLFdBQVdSLFVBQVUrQyxJQUFJLGVBeEI3Q0YsSUE2QlIsSUFBSUE7QUMxRE4sWUFJQSxTQUFTOUYsaUJBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBRmhILEdBQUlDLGNBQWUsV0FBZSxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FBTUMsT0FBT0MsZUFBZVQsRUFBUUksRUFBV00sSUFBS04sSUFBaUIsTUFBTyxVQUFVUixFQUFhZSxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWVosRUFBaUJILEVBQVlpQixVQUFXRixHQUFpQkMsR0FBYWIsRUFBaUJILEVBQWFnQixHQUFxQmhCLE9BQWppQixXQUtJLEdBSk0rRixHQUFJLFdBS00sUUFMVkEsS0FXRWpHLGdCQUFnQnFCLEtBWGxCNEUsRUFNRSxJQUFJM0UsR0FBUSxHQUFJQyxTQUFRLFNBQUNDLEVBQVNDLEdBQzlCLE1BQTJCLFdBQXZCQyxTQUFTQyxXQUFnQ0gsUUFDN0NFLFVBQVNFLGlCQUFpQixtQkFBb0IsV0FRMUMsTUFSK0NKLFFBRXZERixHQUFNTyxLQUFLUixLQUFLUyxLQUFLQyxLQUFLVixPQXlWOUIsTUF6VUFqQixjQTFCRTZGLElBMkJFakYsSUFBSyxPQUNMZ0IsTUFaQyxXQWFHLEdBQUlrRSxHQUFRN0UsS0FaWjhFLEVBQWV6RSxTQUFTMEUsaUJBQWlCLGdCQUN2Q0MsRUFBZ0IzRSxTQUFTMEUsaUJBQWlCLHNEQUVoRC9FLE1BQUtpRixhQUFlNUUsU0FBU1EsY0FBYyxnQkFDM0NiLEtBQUtrRixnQkFBa0I3RSxTQUFTUSxjQUFjLG1CQUU5Q2IsS0FBS21GLGdCQUFrQjlFLFNBQVNRLGNBQWMsNkJBQzlDYixLQUFLb0Ysc0JBQXdCL0UsU0FBU1EsY0FBYywyQkFFcERiLEtBQUtxRixTQUFZaEYsU0FBU1EsY0FBYyxrQkFDeENiLEtBQUtzRixZQUFjakYsU0FBU1EsY0FBYyxnQkFDMUNiLEtBQUt1RixTQUFXbEYsU0FBU1EsY0FBYyxtQkFDdkNiLEtBQUt3RixTQUFXbkYsU0FBU1EsY0FBYyxtQkFDdkNiLEtBQUt5RixTQUFXcEYsU0FBU1EsY0FBYyxtQkFDdkNiLEtBQUswRixjQUFnQjFGLEtBQUt3RixTQUFTM0UsY0FBYyxnQkFDakRiLEtBQUsyRixjQUFnQjNGLEtBQUt1RixTQUFTMUUsY0FBYyxnQkFDakRiLEtBQUs0RixjQUFnQjVGLEtBQUt3RixTQUFTM0UsY0FBYyxnQkFDakRiLEtBQUs2RixjQUFnQjdGLEtBQUt5RixTQUFTNUUsY0FBYyxnQkFDakRiLEtBQUs4RixjQUFnQnpGLFNBQVNRLGNBQWMsZ0JBQzVDYixLQUFLK0YsTUFBUTFGLFNBQVNRLGNBQWMsZ0JBQ3BDYixLQUFLZ0csUUFBVTNGLFNBQVNRLGNBQWMsa0JBR3RDYixLQUFLaUcsUUFBVTVGLFNBQVNRLGNBQWMsZUFDdENiLEtBQUtrRyxRQUVMbEcsS0FBS2lGLGFBQWExRSxpQkFBaUIsUUFBU1AsS0FBS21HLGNBQWN6RixLQUFLVixPQUNwRUEsS0FBS21GLGdCQUFnQjVFLGlCQUFpQixRQUFTUCxLQUFLb0csYUFBYTFGLEtBQUtWLE9BQ3RFQSxLQUFLcUYsU0FBUzlFLGlCQUFpQixRQUFTUCxLQUFLcUcsU0FBUzNGLEtBQUtWLE9BRTNEQSxLQUFLa0YsZ0JBQWdCM0UsaUJBQWlCLFFBQVNQLEtBQUtzRyxhQUFhNUYsS0FBS1YsT0FDdEVBLEtBQUtvRixzQkFBc0I3RSxpQkFBaUIsUUFBU1AsS0FBS3VHLGtCQUFrQjdGLEtBQUtWLE9BRWpGQSxLQUFLMkYsY0FBY3BGLGlCQUFpQixTQUFVUCxLQUFLd0csU0FBUzlGLEtBQUtWLE9BQ2pFQSxLQUFLNEYsY0FBY3JGLGlCQUFpQixTQUFVUCxLQUFLd0csU0FBUzlGLEtBQUtWLE9BQ2pFQSxLQUFLNkYsY0FBY3RGLGlCQUFpQixTQUFVUCxLQUFLd0csU0FBUzlGLEtBQUtWLE9BRWpFZSxFQUFFLGlCQUFpQjBGLGFBR2hCQyxRQUFRQyxLQUFLN0IsRUFBYyxTQUFDOEIsR0FDM0JBLEVBQU9yRyxpQkFBaUIsUUFBU3NFLEVBQUtnQyxPQUFPbkcsS0FBSW1FLE1BR3JEaUMsUUFBUUMsSUFBSS9CLE1BQ1QwQixRQUFRQyxLQUFLM0IsRUFBZSxTQUFDNEIsR0FDNUJBLEVBQU9yRyxpQkFBaUIsUUFBU3NFLEVBQUttQyxlQUFldEcsS0FBSW1FLFNBb0I3RGxGLElBQUssV0FDTGdCLE1BZEssU0FBQzBDLEdBZUYsR0FBSTRELEdBQVNqSCxJQWRqQnFELEdBQU1DLGdCQUNOLElBQUk0RCxHQUFPN0QsRUFBTThELGFBRWpCLElBQXVCLEdBQW5CRCxFQUFLRSxXQUlULEtBaUJRLFdBaEJKLEdBQUlDLEdBQU8sRUFDVEMsRUFBSyxJQUNMQyxFQUFPQyxPQUNQQyxFQUFNLEdBQUlDLGdCQUNWQyxFQUFTLEdBQUl6SCxTQUFRLFNBQUNDLEVBQVNDLEdBQzdCcUgsRUFBSUcsS0FBSyxPQUFRVixFQUFLVyxhQUFhLFdBQ25DSixFQUFJSyxLQUFLLEdBQUlDLFVBQVNiLElBQ3RCTyxFQUFJTyxtQkFBcUIsV0FDakJQLEVBQUluSCxhQUFlK0csSUFDbkJKLEVBQUt0QixjQUFjc0MsUUFDZlIsRUFBSVMsU0FBV1osRUFDZm5ILElBRUFDLEdBQ0krSCxLQUFNQyxTQUFTWCxFQUFJUyxPQUFRLElBQzNCWCxRQUFTRSxFQUFJWSxnQkFRN0JkLEdBREFMLEVBQUtvQixhQUFhLGNBQ1JyQixFQUFLc0IsaUJBQWlCN0gsS0FBSXVHLEdBRTFCQSxFQUFLdUIsbUJBQW1COUgsS0FBSXVHLEdBRzFDVSxFQUFPbkgsS0FBSytHLEdBQVEsU0FBT04sRUFBS3dCLGlCQUFpQi9ILEtBQUl1RyxPQUd2RCxNQUFPeUIsR0FDTDVCLFFBQVFDLElBQUksVUFBVzJCLE9BeUIzQi9JLElBQUssbUJBQ0xnQixNQW5CYSxXQUNiWCxLQUFLMkksU0FBUzNJLEtBQUsrRixVQTBCbkJwRyxJQUFLLHFCQUNMZ0IsTUFyQmUsV0FDZlgsS0FBSzJJLFNBQVMzSSxLQUFLZ0csWUE0Qm5CckcsSUFBSyxpQkFDTGdCLE1BdkJXLFdBQ1hYLEtBQUsySSxTQUFTM0ksS0FBS3NGLGdCQThCbkIzRixJQUFLLG1CQUNMZ0IsTUF6QmEsU0FBQ2lJLEdBQ2Q5QixRQUFRQyxJQUFJNkIsRUFBT1QsS0FBTSx5QkFBMkJTLEVBQU9ULEtBQU8sS0FBT1MsRUFBT3JCLFFBQVUsS0FDMUZ2SCxLQUFLMkksU0FBUzNJLEtBQUs4RixrQkFnQ25CbkcsSUFBSyxTQUNMZ0IsTUEzQkcsV0FDSFgsS0FBSzJJLGNBa0NMaEosSUFBSyxnQkFDTGdCLE1BN0JVLFdBQ1ZYLEtBQUsySSxTQUFTM0ksS0FBSytGLFVBb0NuQnBHLElBQUssb0JBQ0xnQixNQS9CYyxXQUNkWCxLQUFLMEYsY0FBYzFDLE1BQU02RixXQUFhLFVBQ3RDN0ksS0FBSzJJLFNBQVMzSSxLQUFLd0YsYUFzQ25CN0YsSUFBSyxlQUNMZ0IsTUFqQ1MsV0FrQ0wsR0FBSW1JLEdBQVM5SSxJQWpDakJxRCxPQUFNQyxpQkFFTnZDLEVBQUV3QyxHQUFHdkMsU0FBUytILG1CQUFrQixHQUNoQ2hJLEVBQUV3QyxHQUFHdkMsU0FBU2dJLHNCQUFxQixHQUVuQ2hKLEtBQUswRixjQUFjMUMsTUFBTTZGLFdBQWEsUUFFdEMsSUFBSTNKLElBQ0krSixNQUFPLEdBRVhoSCxHQUNJQyxTQUFVLElBR2xCSSxVQUFTdEMsS0FBS3dGLFNBQVV0RyxFQUFPK0MsR0FDL0JqQyxLQUFLaUcsUUFBVWpHLEtBQUt3RixTQUVwQnRHLEdBQ1E4QyxRQUFTLEdBRWJDLEdBQ0lpSCxNQUFPLFdBQ0hKLEVBQUt6RCxTQUFTckMsTUFBTW1HLFFBQVUsU0FFbENqSCxTQUFVLEtBR2xCSSxTQUFTdEMsS0FBS3FGLFNBQVVuRyxFQUFPK0MsTUF5Qy9CdEMsSUFBSyxlQUNMZ0IsTUFwQ1MsV0FDVFgsS0FBSzJJLFNBQVMzSSxLQUFLdUYsYUE2Q25CNUYsSUFBSyxXQUNMZ0IsTUF0Q0ssU0FBQ3lJLEdBRU5ySSxFQUFFd0MsR0FBR3ZDLFNBQVMrSCxtQkFBa0IsR0FDaENoSSxFQUFFd0MsR0FBR3ZDLFNBQVNnSSxzQkFBcUIsRUFFbkMsSUFBSTlCLEdBQU9sSCxLQUFLaUcsUUFBUXBGLGNBQWMsT0FDMUIsT0FBUnFHLEdBQ0FtQyxXQUFXLFdBQUtuQyxFQUFLb0MsU0FBVyxLQUdoQixtQkFBVEYsR0FDUEEsRUFBUXBKLEtBQUtrRyxLQUFLcUQsTUFFbEJ2SixLQUFLa0csS0FBS3NELEtBQUt4SixLQUFLaUcsUUFHeEIsSUFBSS9HLElBQ0krSixPQUFTakosS0FBS2lHLFFBQVFsRCxZQUFjLE1BRXhDZCxHQUNJQyxTQUFVLElBR2xCSSxVQUFTdEMsS0FBS2lHLFFBQVMvRyxFQUFPK0MsR0FDOUIvQyxHQUNRK0osTUFBTyxHQUVYaEgsR0FDSUMsU0FBVSxLQUdsQkksU0FBUzhHLEVBQU9sSyxFQUFPK0MsR0FDdkJqQyxLQUFLaUcsUUFBVW1ELEtBOENmekosSUFBSyxXQUNMZ0IsTUF4Q0ssV0F5Q0QsR0FBSThJLEdBQVN6SixJQXZDakJlLEdBQUV3QyxHQUFHdkMsU0FBUytILG1CQUFrQixHQUNoQ2hJLEVBQUV3QyxHQUFHdkMsU0FBU2dJLHNCQUFxQixFQUVuQyxJQUFJOUosSUFDSStKLE9BQVNqSixLQUFLaUcsUUFBUWxELFlBQWMsTUFFeENkLEdBQ0lDLFNBQVUsSUFHbEJJLFVBQVN0QyxLQUFLaUcsUUFBUy9HLEVBQU8rQyxHQUM5QmpDLEtBQUtpRyxRQUFVLEtBRWYvRyxHQUNROEMsUUFBUyxHQUViQyxHQUNJRSxTQUFVLFdBQ05zSCxFQUFLcEUsU0FBU3JDLE1BQU1tRyxRQUFVLFFBRWxDakgsU0FBVSxLQUdsQkksU0FBU3RDLEtBQUtxRixTQUFVbkcsRUFBTytDLE1BK0MvQnRDLElBQUssZ0JBQ0xnQixNQTFDVSxTQUFDMEMsR0EyQ1AsR0FBSXFHLEdBQVMxSixJQTFDakJxRCxHQUFNQyxpQkFFTnZDLEVBQUV3QyxHQUFHdkMsU0FBUytILG1CQUFrQixHQUNoQ2hJLEVBQUV3QyxHQUFHdkMsU0FBU2dJLHNCQUFxQixFQUVuQyxJQUFJOUosSUFDSStKLE1BQU8sR0FFWGhILEdBQ0lDLFNBQVUsSUFHbEJJLFVBQVN0QyxLQUFLc0YsWUFBYXBHLEVBQU8rQyxHQUNsQ2pDLEtBQUtpRyxRQUFVakcsS0FBS3NGLFlBRXBCcEcsR0FDUThDLFFBQVMsR0FFYkMsR0FDSWlILE1BQU8sV0FDSFEsRUFBS3JFLFNBQVNyQyxNQUFNbUcsUUFBVSxTQUVsQ2pILFNBQVUsS0FHbEJJLFNBQVN0QyxLQUFLcUYsU0FBVW5HLEVBQU8rQyxPQXBUakMyQyxJQXVUUixJQUFJQTtBQzFUTixZQUlBLFNBQVNqRyxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FGaEgsR0FBSUMsY0FBZSxXQUFlLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNQyxPQUFPQyxlQUFlVCxFQUFRSSxFQUFXTSxJQUFLTixJQUFpQixNQUFPLFVBQVVSLEVBQWFlLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZWixFQUFpQkgsRUFBWWlCLFVBQVdGLEdBQWlCQyxHQUFhYixFQUFpQkgsRUFBYWdCLEdBQXFCaEIsT0FEamlCLFdBWUksR0FMTThLLEdBQVUsV0FLRCxRQUxUQSxHQUtVekMsR0FPUnZJLGdCQUFnQnFCLEtBWmxCMkosR0FNRTNKLEtBQUtrSCxLQUFPQSxFQUNaQSxFQUFLMEMsYUFBYSxhQUFjLGNBQ2hDMUMsRUFBSzNHLGlCQUFpQixTQUFVUCxLQUFLb0gsU0FBUzFHLEtBQUtWLE9BQ25Ea0gsRUFBS0UsU0FBV3BILEtBQUtvSCxTQUFTMUcsS0FBS1YsTUFDbkNrSCxFQUFLb0MsTUFBUXRKLEtBQUtzSixNQUFNNUksS0FBS1YsTUFFN0JBLEtBQUs2SixVQUNEQyxJQUNJQyxTQUFVLGlCQUNSaEUsTUFBTyxxQkFDUGlFLE1BQU8sa0NBQ1BDLElBQUssb0JBRVRDLElBQ0VILFNBQVUsa0NBQ1JoRSxNQUFPLHlCQUNQaUUsTUFBTywwQkFDUEMsSUFBSyx5QkFtTG5CLE1BbEtBbEwsY0F4Q0U0SyxJQXlDRWhLLElBQUssUUFDTGdCLE1BVkUsV0FDRlgsS0FBS2tILEtBQUtlLFFBQ1ZvQixXQUFXLFdBQ1AsR0FBSWMsR0FBUzlKLFNBQVMwRSxpQkFBaUIsZUFDbkNxRixFQUFTL0osU0FBUzBFLGlCQUFpQixtQ0FFcEMyQixRQUFRQyxLQUFLd0QsRUFBUSxTQUFDRSxHQUNyQkEsRUFBTWpJLFdBQVdDLFlBQVlnSSxRQUc5QjNELFFBQVFDLEtBQUt5RCxFQUFRLFNBQUNFLEdBQ3JCQSxFQUFNbEgsZ0JBQWdCLGdCQUN0QmtILEVBQU1sSCxnQkFBZ0IsaUJBRTVCLFFBb0JGekQsSUFBSyxXQUNMZ0IsTUFaSSxTQUFDNEosRUFBU2hELEVBQVNpRCxHQUV2QixHQUFpRixNQUE3RUQsRUFBUW5JLFdBQVd2QixjQUFjLDBCQUE0QjJKLEVBQU8sTUFBeEUsQ0FHQSxHQUFJSCxHQUFRaEssU0FBU29LLGNBQWMsSUFDbkNKLEdBQU1LLFlBQVlySyxTQUFTc0ssZUFBZXBELElBQzFDOEMsRUFBTXpJLFVBQVUrQyxJQUFJLGNBQ3BCMEYsRUFBTVQsYUFBYSxZQUFhWSxHQUNoQ0QsRUFBUW5JLFdBQVdzSSxZQUFZTCxPQXFCL0IxSyxJQUFLLGFBQ0xnQixNQWRNLFNBQUM0SixFQUFTQyxHQUVoQixHQUFJOUIsR0FBTTZCLEVBQVFuSSxXQUFXdkIsY0FBYywwQkFBNEIySixFQUFPLEtBQ25FLE9BQVA5QixHQUNBNkIsRUFBUW5JLFdBQVdDLFlBQVlxRyxNQXdCbkMvSSxJQUFLLFdBQ0xnQixNQWhCSSxTQUFDMEMsR0FpQkQsR0FBSXdCLEdBQVE3RSxJQWhCSSxvQkFBVHFELElBQXlCQSxFQUFNOEQsY0FBY21CLGFBQWEsZ0JBQ2pFakYsRUFBTUMsZ0JBR1YsSUFBSXNILElBQVEsRUFFUkMsRUFBZTdLLEtBQUtrSCxLQUFLbkMsaUJBQWlCLGdCQUMxQytGLEVBQWtCOUssS0FBS2tILEtBQUtuQyxpQkFBaUIsY0FDN0NnRyxFQUFhL0ssS0FBS2tILEtBQUtuQyxpQkFBaUIscUJBQ3hDaUcsRUFBZWhMLEtBQUtrSCxLQUFLbkMsaUJBQWlCLHVCQUMxQ2tHLEVBQVksR0FBSUMsUUFBTyxrZUFBMGYsS0FDamhCQyxFQUFjLEdBQUlELFFBQU8saUVBRzFCeEUsUUFBUUMsS0FBS2tFLEVBQWMsU0FBQ04sR0FDM0IsR0FBSVAsR0FBUW5GLEVBQUtxQyxLQUFLckcsY0FBYzBKLEVBQVExQyxhQUFhLGNBQ3JEMEMsR0FBUTVKLE1BQU15SyxRQUFVcEIsRUFBTXJKLE1BQU15SyxRQUNwQ1IsR0FBUSxFQUNSL0YsRUFBS3dHLFNBQVNkLEVBQVMxRixFQUFLZ0YsU0FBU3hKLFNBQVNxRSxLQUFLdEMsV0FBV3lGLGFBQWEsU0FBU21DLE1BQU8sVUFFM0ZuRixFQUFLeUcsV0FBV2YsRUFBUyxjQUs5QjdELFFBQVFDLEtBQUttRSxFQUFpQixTQUFDUCxHQUNELEtBQXpCQSxFQUFRNUosTUFBTXlLLFFBQ2RSLEdBQVEsRUFDUi9GLEVBQUt3RyxTQUFTZCxFQUFTMUYsRUFBS2dGLFNBQVN4SixTQUFTcUUsS0FBS3RDLFdBQVd5RixhQUFhLFNBQVNrQyxTQUFVLGFBRTlGbEYsRUFBS3lHLFdBQVdmLEVBQVMsaUJBSzlCN0QsUUFBUUMsS0FBS29FLEVBQVksU0FBQ1IsR0FDckJBLEVBQVM1SixNQUFNeUssT0FBT2hNLE9BQVMsR0FBTzZMLEVBQVVwSCxLQUFLMEcsRUFBUTVKLE1BQU15SyxXQUFZLEdBQy9FUixHQUFRLEVBQ1IvRixFQUFLd0csU0FBU2QsRUFBUzFGLEVBQUtnRixTQUFTeEosU0FBU3FFLEtBQUt0QyxXQUFXeUYsYUFBYSxTQUFTb0MsSUFBSyxRQUV6RnBGLEVBQUt5RyxXQUFXZixFQUFTLFlBSzlCN0QsUUFBUUMsS0FBS3FFLEVBQWMsU0FBQ1QsR0FDdEJBLEVBQVE1SixNQUFNeUssT0FBT2hNLE9BQVMsR0FBTytMLEVBQVl0SCxLQUFLMEcsRUFBUTVKLE1BQU15SyxXQUFZLEdBQ2pGUixHQUFRLEVBQ1IvRixFQUFLd0csU0FBU2QsRUFBUzFGLEVBQUtnRixTQUFTeEosU0FBU3FFLEtBQUt0QyxXQUFXeUYsYUFBYSxTQUFTOUIsTUFBTyxVQUUzRmxCLEVBQUt5RyxXQUFXZixFQUFTLFVBS2pDLElBQUlnQixHQUFhQyxNQUFNMUwsVUFBVTJMLE1BQU05RSxLQUFLa0UsR0FBY2EsT0FDdERGLE1BQU0xTCxVQUFVMkwsTUFBTTlFLEtBQUttRSxHQUMzQlUsTUFBTTFMLFVBQVUyTCxNQUFNOUUsS0FBS29FLEdBQzNCUyxNQUFNMUwsVUFBVTJMLE1BQU05RSxLQUFLcUUsT0FHNUJ0RSxRQUFRQyxLQUFLNEUsRUFBWSxTQUFDaEIsR0FDekIsR0FBSTdCLEdBQU02QixFQUFRbkksV0FBV3ZCLGNBQWMsY0FDM0MsSUFBVyxNQUFQNkgsRUFBYSxDQUNiLEdBQUlpRCxHQUFVdEwsU0FBU3VMLGdCQUFnQixlQUN2Q0QsR0FBUWhMLE9BQVEsRUFFTyxVQUFuQjRKLEVBQVFzQixTQUNSdEIsRUFBUXVCLFlBQVlDLGlCQUFpQkosR0FDckNwQixFQUFRdUIsWUFBWTFJLGdCQUFnQixnQkFFcENtSCxFQUFRd0IsaUJBQWlCSixHQUN6QnBCLEVBQVFuSCxnQkFBZ0IsbUJBRXpCLENBRUgsR0FBSTRJLEdBQVEzTCxTQUFTdUwsZ0JBQWdCLGFBQ3JDSSxHQUFNckwsT0FBUSxFQUNTLFVBQW5CNEosRUFBUXNCLFNBQ1J0QixFQUFRdUIsWUFBWUMsaUJBQWlCQyxHQUNyQ3pCLEVBQVF1QixZQUFZMUksZ0JBQWdCLGtCQUVwQ21ILEVBQVF3QixpQkFBaUJDLEdBQ3pCekIsRUFBUW5ILGdCQUFnQixtQkFLcEMsSUFBSTZJLEdBQWVqTSxLQUFLa0gsS0FBS25DLGlCQUFpQixlQUFlM0YsTUFXN0QsT0FWSTZNLEdBQWUsSUFDZnJCLEdBQVEsR0FHUkEsS0FBVSxHQUNVLG1CQUFUdkgsSUFDUEEsRUFBTUMsaUJBSVBzSCxNQXpMVGpCLEtBK0xGMUosRUFBUSxHQUFJQyxTQUFRLFNBQUNDLEVBQVNDLEdBQzlCLE1BQTJCLFdBQXZCQyxTQUFTQyxXQUFnQ0gsUUFDN0NFLFVBQVNFLGlCQUFpQixtQkFBb0IsV0FlMUMsTUFmZ0RKLFFBR3hERixHQUFNTyxLQUFLLFdBQ1AsR0FBSTBMLEdBQVE3TCxTQUFTMEUsaUJBQWlCLFdBQ25DMkIsUUFBUUMsS0FBS3VGLEVBQU8sU0FBQ2hGLEdBQ3BCLEdBQUl5QyxHQUFXekMiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIGNsYXNzIExhbmRnaW5nIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTdGFydCBpbml0aWFsaXphdGlvbiBvbiBkb21sb2FkXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IgKCkge1xuICAgICAgICAgICAgbGV0IHJlYWR5ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PntcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPSBcImxvYWRpbmdcIikgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKT0+IHJlc29sdmUoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlYWR5LnRoZW4odGhpcy5pbml0LmJpbmQodGhpcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBBZGRpbmcgZXZlbnRzIGFuZCBwcm9wZXJ0aWVzXG4gICAgICAgICAqL1xuICAgICAgICBpbml0ICgpIHtcbiAgICAgICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJylcbiAgICAgICAgICAgICAgICAsIGNsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsb2NrJyk7XG4gICAgICAgICAgICAkKFwiLmxhbmRpbmdcIikuZnVsbHBhZ2Uoe1xuICAgICAgICAgICAgICAgIHNlY3Rpb25TZWxlY3RvcjogXCIubGFuZGluZ19fc2VjdGlvblwiXG4gICAgICAgICAgICAgICAgLCBuYXZpZ2F0aW9uOiB0cnVlXG4gICAgICAgICAgICAgICAgLCBhZnRlckxvYWQ6IHRoaXMuaGlkZUxvYWRlci5iaW5kKHRoaXMpXG4gICAgICAgICAgICAgICAgLCBhZnRlclJlbmRlcjogdGhpcy5yZWNvdW50U2xpZGVzLmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICAsIGFmdGVyUmVzaXplOiB0aGlzLnJlY291bnRTbGlkZXMuYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgICwgb25MZWF2ZTogKCBpbmRleCwgbmV4dEluZGV4LCBkaXJlY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYobmV4dEluZGV4ID09IDEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9vcGVuJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9vcGVuJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZihuZXh0SW5kZXggPT0gNil7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9jay5jbGFzc0xpc3QudG9nZ2xlKCdjbG9ja192aXNpYmxlJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9jay5jbGFzc0xpc3QudG9nZ2xlKCdjbG9ja192aXNpYmxlJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvb3Rlcl9fdG9wXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnNjcm9sbFRvVG9wLmJpbmQodGhpcykpO1xuICAgICAgICB9XG5cblxuICAgICAgICBoaWRlTG9hZGVyICgpIHtcbiAgICAgICAgICAgIGxldCBsb2FkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9hZGVyX193cmFwcGVyJylcbiAgICAgICAgICAgICAgICAsIHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICwgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMFxuICAgICAgICAgICAgICAgICAgICAsIGNvbXBsZXRlOiAoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGxvYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBWZWxvY2l0eShsb2FkZXIsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgcmVjb3VudFNsaWRlcyAoKSB7XG4gICAgICAgICAgICBsZXQgY2xvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xvY2snKVxuICAgICAgICAgICAgICAgICwgY2xvY2tfc2xpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZnAtc2xpZGVzQ29udGFpbmVyJylcbiAgICAgICAgICAgICAgICAsIHRpdGxlID0gY2xvY2tfc2xpZGUucXVlcnlTZWxlY3RvcignLnNsaWRlX190aXRsZScpXG4gICAgICAgICAgICAgICAgLCB0ZXh0ID0gY2xvY2tfc2xpZGUucXVlcnlTZWxlY3RvcignLnNsaWRlX190ZXh0JylcbiAgICAgICAgICAgICAgICAsIGhlaWdodCA9IE1hdGgubWluKGNsb2NrX3NsaWRlLm9mZnNldEhlaWdodCAtIHRpdGxlLm9mZnNldEhlaWdodCAtIHRleHQub2Zmc2V0SGVpZ2h0ICsgOTAsIDcwMilcbiAgICAgICAgICAgICAgICAsIHBlcmMgPSBoZWlnaHQvNzAyO1xuXG4gICAgICAgICAgICBpZiAoY2xvY2tfc2xpZGUub2Zmc2V0V2lkdGggPD0gNzUwKSB7XG4gICAgICAgICAgICAgICAgY2xvY2suc3R5bGVbTW9kZXJuaXpyLnByZWZpeGVkKCd0cmFuc2Zvcm0nKV0gPSAnc2NhbGUoJysgcGVyYyArJyknO1xuICAgICAgICAgICAgICAgIGNsb2NrLnN0eWxlLm1hcmdpbiA9IFwiMCAwIDAgLVwiKyhjbG9jay5vZmZzZXRXaWR0aCpwZXJjKSowLjMzK1wicHhcIjtcbiAgICAgICAgICAgICAgICAvLyBjbG9jay5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JlZCc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsb2NrLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cblxuICAgICAgICBzY3JvbGxUb1RvcCAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLm1vdmVUbygxLDApO1xuICAgICAgICB9XG4gICAgfVxuICBuZXcgTGFuZGdpbmc7XG59KSgpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgd2luZG93Lm1vYmlsZUFuZFRhYmxldGNoZWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjaGVjayA9IGZhbHNlO1xuICAgICAgICAoZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgaWYgKC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyBjZXx4ZGF8eGlpbm98YW5kcm9pZHxpcGFkfHBsYXlib29rfHNpbGsvaS50ZXN0KGEpIHx8IC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pLnRlc3QoYS5zdWJzdHIoMCwgNCkpKSBjaGVjayA9IHRydWVcbiAgICAgICAgfSkobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYSk7XG4gICAgICAgIHJldHVybiBjaGVjaztcbiAgICB9O1xuXG4gICAgd2luZG93LmlzTW9iaWxlID0ge1xuICAgICAgICBBbmRyb2lkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAvQW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICAgIH0sXG4gICAgICAgIEJsYWNrQmVycnk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIC9CbGFja0JlcnJ5L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgfSxcbiAgICAgICAgaU9TOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAvaVBob25lfGlQYWR8aVBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICAgIH0sXG4gICAgICAgIFdpbmRvd3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIC9JRU1vYmlsZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFueTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gKGlzTW9iaWxlLkFuZHJvaWQoKSB8fCBpc01vYmlsZS5CbGFja0JlcnJ5KCkgfHwgaXNNb2JpbGUuaU9TKCkgfHwgaXNNb2JpbGUuV2luZG93cygpKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjbGFzcyBMYXlvdXQge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFN0YXJ0IGluaXRpYWxpemF0aW9uIG9uIGRvbWxvYWRcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgICAgICAgICBsZXQgcmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+e1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9IFwibG9hZGluZ1wiKSByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVhZHkudGhlbih0aGlzLmluaXQuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIEFkZGluZyBldmVudHMgYW5kIHByb3BlcnRpZXNcbiAgICAgICAgICovXG4gICAgICAgIGluaXQgKCkge1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5pc01vYmlsZS5BbmRyb2lkKCkpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnYW5kcm9pZCcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuaXNNb2JpbGUuaU9TKCkpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnaW9zJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5tb2JpbGVBbmRUYWJsZXRjaGVjaygpKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ3Vua25vd24tbW9iaWxlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdkZXNrdG9wJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnYW5kcm9pZCcpO1xuICAgICAgICB9XG4gICAgfVxuICBuZXcgTGF5b3V0O1xufSkoKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIGNsYXNzIE1lbnUge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFN0YXJ0IGluaXRpYWxpemF0aW9uIG9uIGRvbWxvYWRcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgICAgICAgICBsZXQgcmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+e1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9IFwibG9hZGluZ1wiKSByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVhZHkudGhlbih0aGlzLmluaXQuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIEFkZGluZyBldmVudHMgYW5kIHByb3BlcnRpZXNcbiAgICAgICAgICovXG4gICAgICAgIGluaXQgKCkge1xuICAgICAgICAgICAgbGV0IGJhY2tfYnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5sb2dpbl9fYmFjaycpXG4gICAgICAgICAgICAgICAgLCBsb2dpbl9idXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxvZ2luX19sb2dpbi1idXR0b24sIC5sb2dpbl9zdWNjZXNzIC5sb2dpbl9fc3VibWl0Jyk7XG5cbiAgICAgICAgICAgIHRoaXMubG9naW5fYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnVfX2xvZ2luJyk7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyX2J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51X19yZWdpc3RlcicpO1xuXG4gICAgICAgICAgICB0aGlzLnJlY292ZXJ5X2J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9fcGFzc3dvcmQtcmVjb3ZlcnknKTtcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJfYnV0dG9uX2lubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX19yZWdpc3Rlci1idXR0b24nKTtcblxuICAgICAgICAgICAgdGhpcy5saWdodGJveCA9ICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Pi5saWdodGJveCcpO1xuICAgICAgICAgICAgdGhpcy5sb2dpbl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9sb2dpbicpO1xuICAgICAgICAgICAgdGhpcy5yZWNvdmVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9yZWNvdmVyeScpO1xuICAgICAgICAgICAgdGhpcy5yZWdpc3RlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9yZWdpc3RlcicpO1xuICAgICAgICAgICAgdGhpcy5wYXNzd29yZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9wYXNzd29yZCcpO1xuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcl9iYWNrID0gdGhpcy5yZWdpc3Rlci5xdWVyeVNlbGVjdG9yKCcubG9naW5fX2JhY2snKTtcbiAgICAgICAgICAgIHRoaXMucmVjb3ZlcnlfZm9ybSA9IHRoaXMucmVjb3ZlcnkucXVlcnlTZWxlY3RvcignLmxvZ2luX19mb3JtJyk7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyX2Zvcm0gPSB0aGlzLnJlZ2lzdGVyLnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9fZm9ybScpO1xuICAgICAgICAgICAgdGhpcy5wYXNzd29yZF9mb3JtID0gdGhpcy5wYXNzd29yZC5xdWVyeVNlbGVjdG9yKCcubG9naW5fX2Zvcm0nKTtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JfbWVzc2FnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9lcnJvcicpO1xuICAgICAgICAgICAgdGhpcy5lbWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dpbl9lbWFpbCcpO1xuICAgICAgICAgICAgdGhpcy5zdWNjZXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ2luX3N1Y2Nlc3MnKTtcblxuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9naW5fb3BlbicpO1xuICAgICAgICAgICAgdGhpcy5sYXN0ID0gW107XG5cbiAgICAgICAgICAgIHRoaXMubG9naW5fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vcGVuTG9naW5Gb3JtLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5yZWNvdmVyeV9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5SZWNvdmVyeS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMubGlnaHRib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlQWxsLmJpbmQodGhpcykpO1xuXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3BlblJlZ2lzdGVyLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcl9idXR0b25faW5uZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5SZWdpc3RlcklubmVyLmJpbmQodGhpcykpO1xuXG4gICAgICAgICAgICB0aGlzLnJlY292ZXJ5X2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zZW5kRGF0YS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJfZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnNlbmREYXRhLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5wYXNzd29yZF9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuc2VuZERhdGEuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgICAgICQoJy5sb2dpbiBzZWxlY3QnKS5zZWxlY3QyKCk7XG5cblxuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGJhY2tfYnV0dG9ucywgKGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZ29iYWNrLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGxvZ2luX2J1dHRvbnMpO1xuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGxvZ2luX2J1dHRvbnMsIChidXR0b24pID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5Mb2dpbklubmVyLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFNlbmQgcmVnaXN0cmF0aW9uIGRhdGEgYW5kIHNob3cgbWVzc2FnZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VuZERhdGEgKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbGV0IGZvcm0gPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuXG4gICAgICAgICAgICBpZiAoZm9ybS52YWxpZGF0ZSgpID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGxldCBET05FID0gNFxuICAgICAgICAgICAgICAgICwgT0sgPSAyMDBcbiAgICAgICAgICAgICAgICAsIG1lc3NhZ2VcbiAgICAgICAgICAgICAgICAsIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG4gICAgICAgICAgICAgICAgLCBsb2FkZWQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHhoci5vcGVuKCdQT1NUJywgZm9ybS5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpKTtcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNlbmQobmV3IEZvcm1EYXRhKGZvcm0pKTtcbiAgICAgICAgICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gRE9ORSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVjb3ZlcnlfZm9ybS5yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSBPSykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IHBhcnNlSW50KHhoci5zdGF0dXMsIDEwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHhoci5zdGF0dXNUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChmb3JtLmhhc0F0dHJpYnV0ZSgnZGF0YS1jaGVjaycpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSB0aGlzLnNob3dDaGVja01lc3NhZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gdGhpcy5zaG93U3VjY2Vzc01lc3NhZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsb2FkZWQudGhlbihtZXNzYWdlKS5jYXRjaCh0aGlzLnNob3dFcnJvck1lc3NhZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgLy8gbG9hZGVkLnRoZW4obWVzc2FnZSkuY2F0Y2gobWVzc2FnZSk7XG5cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcjogJywgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gU2hvdyBjaGVjayBlbWFpbCBtZXNzYWdlXG4gICAgICAgICAqL1xuICAgICAgICBzaG93Q2hlY2tNZXNzYWdlICgpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5lbWFpbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFNob3cgc3VjY2VzcyBtZXNzYWdlXG4gICAgICAgICAqL1xuICAgICAgICBzaG93U3VjY2Vzc01lc3NhZ2UgKCkge1xuICAgICAgICAgICAgdGhpcy5vcGVuRm9ybSh0aGlzLnN1Y2Nlc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBPcGVuIGxvZ2luXG4gICAgICAgICAqL1xuICAgICAgICBvcGVuTG9naW5Jbm5lciAoKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5Gb3JtKHRoaXMubG9naW5fcG9wdXApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBTaG93IG1lc3NhZ2VcbiAgICAgICAgICovXG4gICAgICAgIHNob3dFcnJvck1lc3NhZ2UgKHJlYXNvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVhc29uLmNvZGUsICdSZXNwb25jZSBzdGF0dXMgY29kZTogJyArIHJlYXNvbi5jb2RlICsgJy4gJyArIHJlYXNvbi5tZXNzYWdlICsgJy4nKTtcbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5lcnJvcl9tZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gT3BlbiBsYXN0IHBhZ2VcbiAgICAgICAgICovXG4gICAgICAgIGdvYmFjayAoKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5Gb3JtKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFNob3cgZW1haWwgc2VudCB3YXJuaW5nXG4gICAgICAgICAqL1xuICAgICAgICBlbWFpbEhhdmVTZW5kICgpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5lbWFpbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIE9wZW4gcmVnaXN0ZXIgZm9ybVxuICAgICAgICAgKi9cbiAgICAgICAgb3BlblJlZ2lzdGVySW5uZXIgKCkge1xuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcl9iYWNrLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcbiAgICAgICAgICAgIHRoaXMub3BlbkZvcm0odGhpcy5yZWdpc3Rlcik7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIE9wZW4gcmVnaXN0ZXIgZm9ybVxuICAgICAgICAgKi9cbiAgICAgICAgb3BlblJlZ2lzdGVyICgpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICQuZm4uZnVsbHBhZ2Uuc2V0QWxsb3dTY3JvbGxpbmcoZmFsc2UpO1xuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5zZXRLZXlib2FyZFNjcm9sbGluZyhmYWxzZSk7XG5cbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJfYmFjay5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcblxuICAgICAgICAgICAgbGV0IHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICByaWdodDogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMucmVnaXN0ZXIsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMucmVnaXN0ZXI7XG5cbiAgICAgICAgICAgIHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBiZWdpbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saWdodGJveC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5saWdodGJveCwgcHJvcHMsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBPcGVuIHJlY292ZXJ5IGZvcm1zXG4gICAgICAgICAqL1xuICAgICAgICBvcGVuUmVjb3ZlcnkgKCkge1xuICAgICAgICAgICAgdGhpcy5vcGVuRm9ybSh0aGlzLnJlY292ZXJ5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gT3BlbiByZWNvdmVyeSBmb3Jtc1xuICAgICAgICAgKiBAcGFyYW0gZm9ybSB7bm9kZX0gRm9ybSB5b3Ugd2FudCB0byBvcGVuXG4gICAgICAgICAqIEBwYXJhbSBiYWNrIHtub2RlfSBGb3JtIHdoaWNoIHlvdSB3YW50IHRvIG9wZW4gd2hlbiB1c2VyIHByZXNzIGJhY2ssIGJ5IGRlZmF1bHQg4oCUwqBsYXN0IGZvcm0gb3BlbmVkXG4gICAgICAgICAqL1xuICAgICAgICBvcGVuRm9ybSAocG9wdXApIHtcblxuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5zZXRBbGxvd1Njcm9sbGluZyhmYWxzZSk7XG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLnNldEtleWJvYXJkU2Nyb2xsaW5nKGZhbHNlKTtcblxuICAgICAgICAgICAgbGV0IGZvcm0gPSB0aGlzLmN1cnJlbnQucXVlcnlTZWxlY3RvcignZm9ybScpO1xuICAgICAgICAgICAgaWYgKGZvcm0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9Pntmb3JtLmNsZWFyKCk7fSwgMjUwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwb3B1cCA9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgcG9wdXAgPSB0aGlzLmxhc3QucG9wKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdC5wdXNoKHRoaXMuY3VycmVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC0gdGhpcy5jdXJyZW50Lm9mZnNldFdpZHRoICsgXCJweFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgVmVsb2NpdHkodGhpcy5jdXJyZW50LCBwcm9wcywgb3B0aW9ucyk7XG4gICAgICAgICAgICBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTBcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBWZWxvY2l0eShwb3B1cCwgcHJvcHMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gcG9wdXA7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gQ2xvc2UgYWxsIGZvcm1zXG4gICAgICAgICAqL1xuICAgICAgICBjbG9zZUFsbCAoKSB7XG5cbiAgICAgICAgICAgICQuZm4uZnVsbHBhZ2Uuc2V0QWxsb3dTY3JvbGxpbmcodHJ1ZSk7XG4gICAgICAgICAgICAkLmZuLmZ1bGxwYWdlLnNldEtleWJvYXJkU2Nyb2xsaW5nKHRydWUpO1xuXG4gICAgICAgICAgICBsZXQgcHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtIHRoaXMuY3VycmVudC5vZmZzZXRXaWR0aCArIFwicHhcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMuY3VycmVudCwgcHJvcHMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gbnVsbDtcblxuICAgICAgICAgICAgcHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpZ2h0Ym94LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubGlnaHRib3gsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gT3BlbiBsb2dpbiBwb3B1cFxuICAgICAgICAgKi9cbiAgICAgICAgb3BlbkxvZ2luRm9ybSAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICQuZm4uZnVsbHBhZ2Uuc2V0QWxsb3dTY3JvbGxpbmcoZmFsc2UpO1xuICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5zZXRLZXlib2FyZFNjcm9sbGluZyhmYWxzZSk7XG5cbiAgICAgICAgICAgIGxldCBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTBcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBWZWxvY2l0eSh0aGlzLmxvZ2luX3BvcHVwLCBwcm9wcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLmxvZ2luX3BvcHVwO1xuXG4gICAgICAgICAgICBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlnaHRib3guc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDI1MFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFZlbG9jaXR5KHRoaXMubGlnaHRib3gsIHByb3BzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgbmV3IE1lbnU7XG59KSgpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4oZnVuY3Rpb24oKSB7XG5cbiAgICAvKipcbiAgICAgKiBAY2xhc3NkZXNjIENsYXNzIHJlcHJlc2VudGluZyBmb3JtIHZhbGlkYXRpb25cbiAgICAgKiBAY2xhc3NcbiAgICAgKi9cblxuICAgIGNsYXNzIFZhbGlkYXRpb24ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIEFkZGluZyBldmVudHMgYW5kIHByb3BlcnRpZXNcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3Rvcihmb3JtKSB7XG4gICAgICAgICAgICB0aGlzLmZvcm0gPSBmb3JtO1xuICAgICAgICAgICAgZm9ybS5zZXRBdHRyaWJ1dGUoXCJub3ZhbGlkYXRlXCIsIFwibm92YWxpZGF0ZVwiKTtcbiAgICAgICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy52YWxpZGF0ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIGZvcm0udmFsaWRhdGUgPSB0aGlzLnZhbGlkYXRlLmJpbmQodGhpcyk7XG4gICAgICAgICAgICBmb3JtLmNsZWFyID0gdGhpcy5jbGVhci5iaW5kKHRoaXMpO1xuXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0ge1xuICAgICAgICAgICAgICAgIGVuOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBcIlJlcXVpcmVkIGZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgLCBlbWFpbDogXCJXcm9uZyBlbWFpbCBmb3JtYXRcIlxuICAgICAgICAgICAgICAgICAgICAsIGVxdWFsOiBcIlBhc3N3b3JkIGZpZWxkcyBzaG91bGQgYmUgZXF1YWxcIlxuICAgICAgICAgICAgICAgICAgICAsIHVybDogXCJXcm9uZyB1cmwgZm9ybWF0XCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLCBydToge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogXCLQn9C+0LvQtSDQvtCx0Y/Qt9Cw0YLQtdC70YzQvdC+INC00LvRjyDQt9Cw0L/QvtC70L3QtdC90LjRj1wiXG4gICAgICAgICAgICAgICAgICAgICwgZW1haWw6IFwi0J/RgNC+0LLQtdGA0YzRgtC1INGE0L7RgNC80LDRgiBlbWFpbFwiXG4gICAgICAgICAgICAgICAgICAgICwgZXF1YWw6IFwi0J/QsNGA0L7Qu9C4INC00L7Qu9C20L3RiyDRgdC+0LLQv9Cw0LTQsNGC0YxcIlxuICAgICAgICAgICAgICAgICAgICAsIHVybDogXCLQn9GA0L7QstC10YDRjNGC0LUg0YTQvtGA0LzQsNGCIFVSTFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBSZXNldCBmb3JtIGFuZCBjbGVhciBlcnJvcnNcbiAgICAgICAgICovXG4gICAgICAgIGNsZWFyICgpIHtcbiAgICAgICAgICAgIHRoaXMuZm9ybS5yZXNldCgpO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgICAgIGxldCBlcnJvcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1lcnJvcicpLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS12YWxpZF0sIFtkYXRhLWludmFsaWRdJyk7XG5cbiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZXJyb3JzLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoZmllbGRzLCAoZmllbGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWludmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXZhbGlkJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LDEwMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFJlbW92ZSBlcnJvciBtZXNzYWdlIGFmdGVyIGVsZW1lbnRcbiAgICAgICAgICogQHBhcmFtIHtOb2RlfSBlbGVtZW50IC0gZWxlbWVudCwgYWZ0ZXIgd2hpY2ggd2Ugd2lsbCBhZGQgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSAtIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cHBlIC0gZXJyb3IgdHlwZVxuICAgICAgICAgKi9cbiAgICAgICAgYWRkRXJyb3IoZWxlbWVudCwgbWVzc2FnZSwgdHlwZSkge1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWVycm9yW2RhdGEtdHlwZT1cIicgKyB0eXBlICsgJ1wiXScpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZXJyb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdQJyk7XG4gICAgICAgICAgICBlcnJvci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShtZXNzYWdlKSk7XG4gICAgICAgICAgICBlcnJvci5jbGFzc0xpc3QuYWRkKCdmb3JtLWVycm9yJyk7XG4gICAgICAgICAgICBlcnJvci5zZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScsIHR5cGUpO1xuICAgICAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGVycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gUmVtb3ZlIGVycm9yIG1lc3NhZ2Ugb2Ygc29tZSB0eXBlIGFmdGVyIGVsZW1lbnRcbiAgICAgICAgICogQHBhcmFtIHtOb2RlfSBlbGVtZW50IC0gZWxlbWVudCwgYWZ0ZXIgd2hpY2ggZXJyb3IgbWVzc2FnZSBpc1xuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwcGUgLSBlcnJvciB0eXBlXG4gICAgICAgICAqL1xuICAgICAgICBjbGVhckVycm9yKGVsZW1lbnQsIHR5cGUpIHtcblxuICAgICAgICAgICAgbGV0IGVyciA9IGVsZW1lbnQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuZm9ybS1lcnJvcltkYXRhLXR5cGU9XCInICsgdHlwZSArICdcIl0nKTtcbiAgICAgICAgICAgIGlmIChlcnIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBWYWxpZGF0ZSBmb3JtXG4gICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IC0gc3VibWl0IGV2ZW50XG4gICAgICAgICAqIEB0b2RvIEltcGxlbWVudCBsb2dpbiB2YWxpZGF0aW9uXG4gICAgICAgICAqL1xuICAgICAgICB2YWxpZGF0ZShldmVudCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBldmVudCAhPSBcInVuZGVmaW5lZFwiICYmICFldmVudC5jdXJyZW50VGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1yZWxvYWQnKSkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCB2YWxpZCA9IHRydWUsXG4gICAgICAgICAgICAgICAgbmV4dCA9IG51bGwsXG4gICAgICAgICAgICAgICAgZXF1YWxfZmllbGRzID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWVxdWFsXScpLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkX2ZpZWxkcyA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdbcmVxdWlyZWRdJyksXG4gICAgICAgICAgICAgICAgdXJsX2ZpZWxkcyA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwidXJsXCJdJyksXG4gICAgICAgICAgICAgICAgZW1haWxfZmllbGRzID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJlbWFpbFwiXScpLFxuICAgICAgICAgICAgICAgIHVybF9yZWdleCA9IG5ldyBSZWdFeHAoXCJeKGh0dHB8aHR0cHN8ZnRwKVxcOi8vKFthLXpBLVowLTlcXC5cXC1dKyhcXDpbYS16QS1aMC05XFwuJmFtcDslXFwkXFwtXSspKkApKigoMjVbMC01XXwyWzAtNF1bMC05XXxbMC0xXXsxfVswLTldezJ9fFsxLTldezF9WzAtOV17MX18WzEtOV0pXFwuKDI1WzAtNV18MlswLTRdWzAtOV18WzAtMV17MX1bMC05XXsyfXxbMS05XXsxfVswLTldezF9fFsxLTldfDApXFwuKDI1WzAtNV18MlswLTRdWzAtOV18WzAtMV17MX1bMC05XXsyfXxbMS05XXsxfVswLTldezF9fFsxLTldfDApXFwuKDI1WzAtNV18MlswLTRdWzAtOV18WzAtMV17MX1bMC05XXsyfXxbMS05XXsxfVswLTldezF9fFswLTldKXwoW2EtekEtWjAtOVxcLV0rXFwuKSpbYS16QS1aMC05XFwtXStcXC4oY29tfGVkdXxnb3Z8aW50fG1pbHxuZXR8b3JnfGJpenxhcnBhfGluZm98bmFtZXxwcm98YWVyb3xjb29wfG11c2V1bXxbYS16QS1aXXsyfSkpKFxcOlswLTldKykqKC8oJHxbYS16QS1aMC05XFwuXFwsXFw/XFwnXFxcXFxcKyZhbXA7JVxcJCNcXD1+X1xcLV0rKSkqJFwiLCBcImlcIiksXG4gICAgICAgICAgICAgICAgZW1haWxfcmVnZXggPSBuZXcgUmVnRXhwKFwiXihbYS16QS1aMC05X1xcLlxcLV0pK1xcQCgoW2EtekEtWjAtOVxcLV0pK1xcLikrKFthLXpBLVowLTldezIsNH0pKyRcIik7XG5cbiAgICAgICAgICAgIC8qIGNoZWNrIGVxdWFsIGZpZWxkcyAqL1xuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGVxdWFsX2ZpZWxkcywgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZXF1YWwgPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcihlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtZXF1YWxcIikpO1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnZhbHVlLnRyaW0oKSAhPSBlcXVhbC52YWx1ZS50cmltKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFcnJvcihlbGVtZW50LCB0aGlzLm1lc3NhZ2VzW2RvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2xhbmcnKV0uZXF1YWwsIFwiZXF1YWxcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckVycm9yKGVsZW1lbnQsIFwiZXF1YWxcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qIGNoZWNrIHJlcXVpcmVkIGZpZWxkcyAqL1xuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKHJlcXVpcmVkX2ZpZWxkcywgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC52YWx1ZS50cmltKCkgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFcnJvcihlbGVtZW50LCB0aGlzLm1lc3NhZ2VzW2RvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2xhbmcnKV0ucmVxdWlyZWQsIFwicmVxdWlyZWRcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckVycm9yKGVsZW1lbnQsICdyZXF1aXJlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKiBjaGVjayB1cmwgZmllbGRzICovXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwodXJsX2ZpZWxkcywgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoKGVsZW1lbnQudmFsdWUudHJpbSgpLmxlbmd0aCA+IDApICYmICh1cmxfcmVnZXgudGVzdChlbGVtZW50LnZhbHVlLnRyaW0oKSkgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEVycm9yKGVsZW1lbnQsIHRoaXMubWVzc2FnZXNbZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnbGFuZycpXS51cmwsICd1cmwnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRXJyb3IoZWxlbWVudCwgJ3VybCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKiBjaGVjayBlbWFpbCBmaWVsZHMgKi9cbiAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChlbWFpbF9maWVsZHMsIChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKChlbGVtZW50LnZhbHVlLnRyaW0oKS5sZW5ndGggPiAwKSAmJiAoZW1haWxfcmVnZXgudGVzdChlbGVtZW50LnZhbHVlLnRyaW0oKSkgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEVycm9yKGVsZW1lbnQsIHRoaXMubWVzc2FnZXNbZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnbGFuZycpXS5lbWFpbCwgJ2VtYWlsJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckVycm9yKGVsZW1lbnQsICdlbWFpbCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgIGxldCBhbGxfZmllbGRzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZXF1YWxfZmllbGRzKS5jb25jYXQoXG4gICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwocmVxdWlyZWRfZmllbGRzKSxcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh1cmxfZmllbGRzKSxcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlbWFpbF9maWVsZHMpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoYWxsX2ZpZWxkcywgKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZXJyID0gZWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWVycm9yJyk7XG4gICAgICAgICAgICAgICAgaWYgKGVyciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnZhbGlkID0gZG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKFwiZGF0YS1pbnZhbGlkXCIpO1xuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkLnZhbHVlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lID09IFwiU0VMRUNUXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQubmV4dFNpYmxpbmcuc2V0QXR0cmlidXRlTm9kZShpbnZhbGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQubmV4dFNpYmxpbmcucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZU5vZGUoaW52YWxpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS12YWxpZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgdmFsaWQgPSBkb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUoXCJkYXRhLXZhbGlkXCIpO1xuICAgICAgICAgICAgICAgICAgICB2YWxpZC52YWx1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT0gXCJTRUxFQ1RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5uZXh0U2libGluZy5zZXRBdHRyaWJ1dGVOb2RlKHZhbGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQubmV4dFNpYmxpbmcucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWludmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlTm9kZSh2YWxpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1pbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IGVycm9yc19jb3VudCA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9lcnJvcicpLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChlcnJvcnNfY291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHZhbGlkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXZlbnQgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHZhbGlkO1xuXG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGxldCByZWFkeSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT0gXCJsb2FkaW5nXCIpIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHJlc29sdmUoKSk7XG4gICAgfSk7XG5cbiAgICByZWFkeS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBsZXQgZm9ybXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdmb3JtJyk7XG4gICAgICAgIFtdLmZvckVhY2guY2FsbChmb3JtcywgKGZvcm0pID0+IHtcbiAgICAgICAgICAgIG5ldyBWYWxpZGF0aW9uKGZvcm0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==